(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{18:function(e,t,n){n("3zUU"),e.exports=n("xZRm")},"3zUU":function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("TeQF"),n("x0AG"),n("QWBl"),n("pjDv"),n("yq1k"),n("4mDm"),n("oVuX"),n("2B1R"),n("E9XD"),n("sMBO"),n("qePV"),n("T63A"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("B6y2"),n("5s+n"),n("rB9j"),n("JfAA"),n("JTJg"),n("PKPk"),n("Rm1S"),n("UxlC"),n("hByQ"),n("FZtP"),n("3bBZ"),n("ls82");var l=n("DRYN"),d=n("Cwf3"),p=n("JoMe"),f=n("rdEv"),m=n("JbUL");function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(e,t,n,r,a,o,u){try{var i=e[o](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function y(i){return function(){var e=this,u=arguments;return new Promise(function(t,n){var r=i.apply(e,u);function a(e){c(r,t,n,a,o,"next",e)}function o(e){c(r,t,n,a,o,"throw",e)}a(void 0)})}}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){b(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function e(){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,"setHandledProduct",function(e){var r=e.dataset.productId,t=e.querySelector(".product__value");if(t){var a=t.value;t.addEventListener("input",function(e){var t=e.target.value,n=o.totalInsurance.subtract(a).add(t);o.totalOrderSummary=o.totalOrderSummary.subtract(o.lastInsurancePercentage),o.valueInsurance=o.valueInsurance.subtract(o.lastInsurancePercentage),o.totalInsuranceElement.textContent=n.format(),o.totalInsurance=n,o.lastInsurancePercentage=o.totalInsurance.multiply(.01).format(),o.totalOrderSummary=o.totalOrderSummary.add(o.lastInsurancePercentage),o.valueInsurance=o.valueInsurance.add(o.lastInsurancePercentage),a=t,o.products[r]=g({},o.products[r],{totalInsurance:Object(d.a)(t).value,totalInsuranceFormatted:Object(d.a)(t).format()}),o.setTotalOrderSummaryElement(),o.setValueInsuranceElement()})}}),this.products={},this.cartService=new f.a,(window.InsuranceChangePage=this).valueInsurance=Object(d.a)("R$ 0,00"),this.totalInsurance=Object(d.a)("R$ 0,00"),this.totalOrderSummary=Object(d.a)("R$ 0,00"),this.totalTransporterSelected=Object(d.a)("R$ 0,00"),this.totalInsuranceElement,this.totalTransporterSelectedElement,this.lastInsurancePercentage="R$ 0,00",this.rejectInsuranceModalInstance=null,this.orderForm={},this.orderDetails={},this.init()}var t,n,r,a,o,u,i,c,s;return t=e,(n=[{key:"init",value:(s=y(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/_secure/seguro/contratacao"!==location.pathname&&this.setHandledButtonSkipStepClick(),e.next=3,this.cartService.getCurrent();case 3:if(this.orderForm=e.sent,"/_secure/seguro/contratacao"===location.pathname)return t=location.search.match(/[\d\-\d{2}]+/g)[0],e.next=8,fetch("/api/oms/pvt/orders/".concat(t));e.next=13;break;case 8:return e.next=10,e.sent.json();case 10:n=e.sent,this.orderForm=n,this.orderDetails=n;case 13:"/seguro"===location.pathname||"/_secure/seguro/contratacao"===location.pathname?(this.setTotalTransporterSelected(),this.getProductstInOrderForm(),this.getProductsInCustomData(),this.mapProducts(),this.getInsuranceDataInCustomData(),this.setTotalOrderSummary(),this.setValueInsurance(),this.setTotalInsuranceElement(),this.setTotalOrderSummaryElement(),this.setValueInsuranceElement(),this.setInputMasks(),this.updateProducts(),this.setHandledProducts(),this.setHandledButtonSaveClick()):(this.initRejectInsuranceModal(),this.setHandledButtonRejectInsuranceClick(),this.setHandledButtonConfirmRejectInsuranceClick());case 14:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"setTotalTransporterSelected",value:function(){var r=this,e=this.orderForm.customData;e&&e.customApps.filter(function(e){return"selectedcourier"===e.id}).forEach(function(e){var t=e.fields.courier_data,n=JSON.parse(t).deliveryTypeSelected.priceFormatted;r.totalTransporterSelected=r.totalTransporterSelected.add(n)})}},{key:"setTotalInsuranceElement",value:function(){var e=document.querySelector(".js-total-insurance");e.textContent=this.totalInsurance.format(),this.totalInsuranceElement=e}},{key:"setTotalOrderSummaryElement",value:function(){document.querySelector(".js-total-order-summary").textContent=this.totalOrderSummary.format()}},{key:"setTotalOrderSummary",value:function(){this.totalOrderSummary=this.totalOrderSummary.add(this.totalTransporterSelected.format()).add(this.totalInsurance.multiply(.01).format())}},{key:"setValueInsurance",value:function(){this.valueInsurance=this.valueInsurance.add(this.totalInsurance.multiply(.01).format()),this.lastInsurancePercentage=this.valueInsurance.format()}},{key:"setValueInsuranceElement",value:function(){document.querySelector(".js-value-insurance").textContent=this.valueInsurance.format()}},{key:"mapProducts",value:function(){var n=this;v(document.querySelectorAll(".product")).forEach(function(e){var t=e.dataset.productId;n.products[t]={productId:t,totalInsurance:0,totalInsuranceFormatted:"R$ 0,00"}})}},{key:"setHandledProducts",value:function(){v(document.querySelectorAll(".product")).forEach(this.setHandledProduct)}},{key:"getProductstInOrderForm",value:function(){var i=this,e=this.orderForm.items,t=document.querySelector(".insurance-items__table"),n=e.filter(function(e){var t=e.id;return!p.a.includes(parseInt(t))}).map(function(e){var t=e.name,n=e.imageUrl,r=e.productId,a=e.skuName,o=e.quantity,u=t.replace(a,"");return'\n          <div class="table__row table__row--hidden">\n            '.concat(i.createProduct({imageUrl:n,productId:r,productName:u,description:"",quantity:o}),"\n          </div>\n        ")});t.innerHTML+=n.join("")}},{key:"getProductsInCustomData",value:function(){var o=this,e=this.orderForm.customData;e&&e.customApps.filter(function(e){return"selecteditems"===e.id}).map(function(e){var t=e.fields.products_data,n=JSON.parse(t).filter(function(e){return e.isCustom}),r=document.querySelector(".insurance-items__table"),a=n.map(function(e){return'\n              <div class="table__row table__row--hidden">\n                '.concat(o.createCustomProduct(e),"\n              </div>\n            ")}).join("");r.innerHTML+=a})}},{key:"updateProducts",value:function(){Object.values(this.products).forEach(function(e){var t=e.productId,n=e.totalInsuranceFormatted;document.querySelector("[data-product-id='".concat(t,"']")).querySelector(".js-product-insurance-input").value=n})}},{key:"createProduct",value:function(e){var t=e.productId,n=e.productName,r=e.description,a=e.imageUrl,o=e.quantity;return'\n      <div \n        class="product"\n        data-product-id="'.concat(t,'"\n      >\n        <div class="product__container">\n          <figure class="product__figure">\n            <img \n              class="product__image" \n              alt="').concat(n,'"\n              src="').concat(a,'"\n            />\n          </figure>\n          \n          <div class="product__group">\n            <h3 class="product__name">').concat(n," (").concat(o,' un.)</h3>\n            \n            <div class="product__attributes">\n              <p class="attributes__item">').concat(r,'</p>\n            </div>\n          </div>\n        </div>\n      \n        <input \n          type="tel"\n          placeholder="R$ 0,00"\n          class="product__value js-product-insurance-input"\n        />\n      </div>\n    ')}},{key:"createProducts",value:function(e){var t=this;return e=e.map(function(e){return'\n        <div class="table__row">\n          '.concat(t.createProduct(e),"\n        </div>\n      ")}).join("")}},{key:"createCustomProduct",value:function(e){var t=e.quantity,n=e.customAttributes,r=e.productId;return'\n      <div \n        class="product"\n        data-product-quantity="'.concat(t,'"\n        data-product-id="').concat(r,'"\n      >\n        <div class="product__container">\n          <div class="product__icon-container">\n            <i class="far fa-box product__icon"></i>\n          </div>\n          \n          <div class="product__group">\n            <h3 class="product__name">\n              ').concat(n["product-name"]," (").concat(t,' un.)\n            </h3>\n            \n            <div class="product__attributes">\n              <p class="attributes__item">\n                ').concat(n["product-height"],"cm x \n                ").concat(n["product-width"],"cm x \n                ").concat(n["product-depth"],'cm\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <input \n          type="tel"\n          placeholder="R$ 0,00"\n          class="product__value js-product-insurance-input"\n        />\n      </div>\n    ')}},{key:"addProductsToDOM",value:function(){document.querySelector(".insurance-items__table").innerHTML+=this.createProducts()}},{key:"setInputMasks",value:function(){v(document.querySelectorAll(".js-product-insurance-input")).forEach(function(e){Object(l.a)(e,{mask:"R$ num",blocks:{num:{mask:Number,thousandsSeparator:".",scale:2}}})})}},{key:"setHandledButtonSaveClick",value:function(){var n=this,e=document.querySelector(".js-button-save"),r=document.querySelector(".footer__buttom-submit");e.addEventListener("click",y(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return document.dispatchEvent(window.initSaveCustomDataEvent),e.next=3,n.saveData();case 3:document.dispatchEvent(window.endSaveCustomDataEvent);case 4:case"end":return e.stop()}},e)}))),r&&r.addEventListener("click",function(){var t=y(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r.classList.toggle("js-loading"),e.next=4,n.saveData();case 4:r.classList.toggle("js-loading"),"/_secure/seguro/contratacao"===location.pathname?window.location.assign("/checkout/#/payment"):window.location.assign("/resumo");case 6:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}())}},{key:"getInsuranceDataInCustomData",value:function(){var a=this,e=this.orderForm.customData;e&&e.customApps.filter(function(e){return"insurance"===e.id}).forEach(function(e){var t=e.fields,n=t.items,r=t.total;(n=["skipped","none"].includes(n)?n:JSON.parse(n))&&!["skipped","none"].includes(n)&&(n=Object.entries(n).filter(function(e){var t=h(e,2),n=t[0];t[1];return n in a.products}).reduce(function(e,t){var n=h(t,2);return g({},e,b({},n[0],n[1]))},{}),a.products=g({},a.products,{},n)),r&&(a.totalInsurance=Object(d.a)(r))})}},{key:"saveData",value:(c=y(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t={items:JSON.stringify(this.products),total:this.totalInsurance.format()},n={id:35,quantity:1,seller:"1"},0<this.totalInsurance.intValue)return e.next=6,window.vtexjs.checkout.getOrderForm();e.next=11;break;case 6:return e.next=8,window.vtexjs.checkout.addToCart([n],null);case 8:return this.orderForm=e.sent,e.next=11,this.updateInsuranceSKUPrice(this.totalInsurance.multiply(.01).intValue);case 11:if("/_secure/seguro/contratacao"===location.pathname)return e.next=14,this.updateCheckoutAddress();e.next=14;break;case 14:return e.next=16,Promise.all([this.cartService.setMultipleCustomDataFields("insurance",t),this.cartService.setSingleCustomDataField("orderinfo","current_step","insurance-change-2")]);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log("saveData",e.t0);case 21:case"end":return e.stop()}},e,this,[[0,18]])})),function(){return c.apply(this,arguments)})},{key:"skipInsuranceStep",value:(i=y(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.orderForm.items.forEach(function(e,t){var n=e.id;35===parseInt(n)&&(r=t)}),r)return e.next=5,this.cartService.remove(r);e.next=5;break;case 5:return e.next=7,Promise.all([this.cartService.removeSingleCustomDataField("insurance","total"),this.cartService.setSingleCustomDataField("insurance","items","skipped"),this.cartService.setSingleCustomDataField("orderinfo","current_step","insurance-change-1")]);case 7:return e.abrupt("return",!0);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:return e.abrupt("return");case 14:case"end":return e.stop()}},e,this,[[0,10]])})),function(){return i.apply(this,arguments)})},{key:"noContractInsurance",value:(u=y(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.orderForm.items.forEach(function(e,t){var n=e.id;35===parseInt(n)&&(r=t)}),r)return e.next=5,this.cartService.remove(r);e.next=5;break;case 5:return e.next=7,Promise.all([this.cartService.removeSingleCustomDataField("insurance","total"),this.cartService.setSingleCustomDataField("insurance","items","none"),this.cartService.setSingleCustomDataField("orderinfo","current_step","insurance-change-1")]);case 7:return e.abrupt("return",!0);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:return e.abrupt("return");case 14:case"end":return e.stop()}},e,this,[[0,10]])})),function(){return u.apply(this,arguments)})},{key:"setHandledButtonSkipStepClick",value:function(){var n=this;document.querySelector(".js-button-later-contract").addEventListener("click",function(){var t=y(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n.skipInsuranceStep();case 3:window.location.assign("/resumo");case 4:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}())}},{key:"initRejectInsuranceModal",value:function(){var e=this,t=document.querySelector(".reject-insurance-modal");if(t){this.rejectInsuranceModalInstance=new m.a({modal:t,modalShowCLass:"wrapper-modal--show"});var n=t.querySelector(".modal__close"),r=t.querySelector(".button--primary");n.addEventListener("click",function(){e.rejectInsuranceModalInstance.close()}),r.addEventListener("click",function(){r.classList.add("js-loading","button--disabled"),setTimeout(function(){window.location.assign("/resumo")},1500)})}}},{key:"setHandledButtonRejectInsuranceClick",value:function(){var t=this;document.querySelector(".js-button-no-contract").addEventListener("click",function(e){e.preventDefault(),t.rejectInsuranceModalInstance.show()})}},{key:"setHandledButtonConfirmRejectInsuranceClick",value:function(){var n=this;document.querySelector(".reject-insurance-modal").querySelector(".modal__button").addEventListener("click",function(){var t=y(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n.noContractInsurance();case 3:window.location.assign("/resumo");case 4:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}())}},{key:"updateInsuranceSKUPrice",value:(o=y(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.orderForm.orderFormId,-1===(r=this.orderForm.items.findIndex(function(e){var t=e.id;return 35===parseInt(t)})))return e.abrupt("return");e.next=4;break;case 4:return a="https://wcdlfckgi9.execute-api.us-east-2.amazonaws.com/v1/api/checkout/pub/orderform/".concat(n,"/items/").concat(r,"/price"),e.next=7,fetch(a,{method:"PUT",body:JSON.stringify({price:t}),headers:{Accept:"application/json","Content-Type":"application/json"}});case 7:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"updateCheckoutAddress",value:(a=y(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.orderDetails.shippingData.selectedAddresses,e.next=3,this.cartService.updateCheckoutAddress(t[0]);case 3:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})}])&&k(t.prototype,n),r&&k(t,r),e}();document.addEventListener("DOMContentLoaded",function(){new a})},Cwf3:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("cvkN"),a=n.n(r),o=function(e){return a()(e,{symbol:"R$ ",precision:2,separator:".",decimal:",",formatWithSymbol:!0})}},JbUL:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return a});var a=function(){function o(e){var t=e.modal,n=e.modalShowCLass,r=e.openModalCallback,a=e.closeModalCallback;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.isOpen=!1,this.modalShowCLass=n||"show",this.openCallback=r||new Function,this.closeCallback=a||new Function,this.modal=t instanceof Element?t:document.querySelector(t)}var e,t,n;return e=o,(t=[{key:"show",value:function(){this.isOpen||this.modal.classList.add(this.modalShowCLass),this.isOpen=!0,this.openCallback(this)}},{key:"close",value:function(){this.isOpen&&this.modal.classList.remove(this.modalShowCLass),this.isOpen=!1,this.closeCallback(this)}}])&&r(e.prototype,t),n&&r(e,n),o}()},JoMe:function(e,t,n){"use strict";t.a=[19,698,25,26,33,35,696,699]},RDzO:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("QWBl"),n("pjDv"),n("4mDm"),n("07d7"),n("JfAA"),n("PKPk"),n("FZtP"),n("3bBZ");function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"isUndefined",value:function(e){var t=0<arguments.length&&void 0!==e?e:void 0;return null==t||""===t||t==={}||t===[]}},{key:"isInputValid",value:function(e){return!this.isUndefined(e)&&e.checkValidity()}},{key:"hasProps",value:function(e,t){return this.getMissingProps(e,t).length<=0}},{key:"getMissingProps",value:function(t,e){var n=[];return a(e).forEach(function(e){e in t||n.push(e)}),n}}],(n=null)&&o(t.prototype,n),r&&o(t,r),e}();t.a=r},jmbs:function(e,t,n){"use strict";n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return i});var r=n("RDzO");n("ma9I"),n("TeQF"),n("yq1k"),n("oVuX"),n("sMBO"),n("toAj"),n("07d7"),n("TWNs"),n("rB9j"),n("JfAA"),n("JTJg"),n("UxlC"),n("EnZy");function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._logger=new i("Ensure"),this.props=e||{language:navigator.language||navigator.userLanguage,currency:"BRL",currencyLocale:"pt-br",minimumFractionDigits:2}}var e,n,r;return e=t,r=[{key:"getParents",value:function(e,t){Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;0<=--n&&t.item(n)!==this;);return-1<n});for(var n=[];e&&e!==document;e=e.parentNode)(!t||e.matches(t))&&n.push(e);return n}},{key:"serializeForm",value:function(e){for(var t=[],n=0;n<e.elements.length;n++){var r=e.elements[n];if(r.name&&!r.disabled&&"file"!==r.type&&"reset"!==r.type&&"submit"!==r.type&&"button"!==r.type)if("select-multiple"===r.type)for(var a=0;a<r.options.length;a++)r.options[a].selected&&t.push(encodeURIComponent(r.name)+"="+encodeURIComponent(r.options[a].value));else("checkbox"!==r.type&&"radio"!==r.type||r.checked)&&t.push(encodeURIComponent(r.name)+"="+encodeURIComponent(r.value))}return t.join("&")}},{key:"getFormData",value:function(e){for(var t={},n=0;n<e.elements.length;n++){var r=e.elements[n];if(r.name&&!r.disabled&&"file"!==r.type&&"reset"!==r.type&&"submit"!==r.type&&"button"!==r.type)if("select-multiple"===r.type)for(var a=0;a<r.options.length;a++)r.options[a].selected&&(t[r.name]=r.options[a].value);else("checkbox"!==r.type&&"radio"!==r.type||r.checked)&&(t[r.name]=r.value)}return t}},{key:"getRandomID",value:function(){return"_"+Math.random().toString(36).substr(2,9)}},{key:"setCookie",value:function(e,t,n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var a="expires="+r.toUTCString();document.cookie="".concat(e,"=").concat(t,";").concat(a,";path=/")}},{key:"getCookie",value:function(t){return decodeURIComponent(document.cookie).split(";").filter(function(e){return e.includes(t)})[0]||""}},{key:"isInViewport",value:function(e){var t=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth,r=e.getBoundingClientRect(),a=r.top,o=r.right,u=r.bottom,i=r.left;return 0<=a&&0<=i&&u<=t&&o<=n}},{key:"removeAccents",value:function(e){var t={a:"á|à|ã|â|À|Á|Ã|Â",e:"é|è|ê|É|È|Ê",i:"í|ì|î|Í|Ì|Î",o:"ó|ò|ô|õ|Ó|Ò|Ô|Õ",u:"ú|ù|û|ü|Ú|Ù|Û|Ü",c:"ç|Ç",n:"ñ|Ñ"};for(var n in t)e=e.replace(new RegExp(t[n],"g"),n);return e}}],(n=[{key:"formatPrice",value:function(e){return e=(+(e/=100)).toFixed(Math.max(0,~~this.props.minimumFractionDigits)),new Intl.NumberFormat(this.props.currencyLocale,{style:"currency",currency:this.props.currency,minimumFractionDigits:this.props.minimumFractionDigits}).format(e)}}])&&a(e.prototype,n),r&&a(e,r),t}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"B8ONE Logger Component";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.logName=e}var e,n,r;return e=t,(n=[{key:"error",value:function(e,t){var n=0<arguments.length&&void 0!==e?e:"",r=1<arguments.length&&void 0!==t?t:{};console.error(n,r)}},{key:"info",value:function(e){var t=0<arguments.length&&void 0!==e?e:"";console.info(t)}},{key:"warning",value:function(e){var t=0<arguments.length&&void 0!==e?e:"";console.warn(this.logName,t)}},{key:"log",value:function(e){var t=0<arguments.length&&void 0!==e?e:"";console.log(t)}},{key:"log",value:function(e,t){var n=0<arguments.length&&void 0!==e?e:"",r=1<arguments.length&&void 0!==t?t:{};console.log(n,r)}}])&&u(e.prototype,n),r&&u(e,r),t}()},rdEv:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("TeQF"),n("x0AG"),n("QWBl"),n("pjDv"),n("yq1k"),n("4mDm"),n("2B1R"),n("E9XD"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("B6y2"),n("5s+n"),n("JfAA"),n("JTJg"),n("PKPk"),n("FZtP"),n("3bBZ"),n("ls82");var k=n("jmbs"),b=n("x9ji");function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){a(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function x(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(e,t,n,r,a,o,u){try{var i=e[o](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function S(i){return function(){var e=this,u=arguments;return new Promise(function(t,n){var r=i.apply(e,u);function a(e){c(r,t,n,a,o,"next",e)}function o(e){c(r,t,n,a,o,"throw",e)}a(void 0)})}}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._VTEX_API_ENDPOINT="/api/checkout/pub/orderForm",this._logger=new k.c("Cart service"),this._httpClient=new b.a}var t,n,r,a,o,u,i,c,s,l,d,p,f,m,h,v,y,g;return t=e,(n=[{key:"getCurrent",value:(g=S(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._httpClient.get(this._VTEX_API_ENDPOINT);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return g.apply(this,arguments)})},{key:"add",value:(y=S(regeneratorRuntime.mark(function e(t,n){var r,a,o,u,i,c=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<c.length&&void 0!==c[2]?c[2]:1,k.a.isUndefined(t)){e.next=10;break}return e.next=4,this.getCurrent();case 4:return a=e.sent,-1<(o=a.items.findIndex(function(e){return e.id===t}))&&(n=parseInt(n)+parseInt(a.items[o].quantity)),u="".concat(this._VTEX_API_ENDPOINT,"/").concat(a.orderFormId,"/items"),i={orderItems:[{seller:r.toString(),quantity:parseInt(n),id:t.toString()}]},e.abrupt("return",this._httpClient.patch(u,i));case 10:case"end":return e.stop()}},e,this)})),function(e,t){return y.apply(this,arguments)})},{key:"checkoutCRUD",value:(v=S(regeneratorRuntime.mark(function e(t){var n,o,r,a,u,i,c,s,l,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.vtexjs.checkout.getOrderForm();case 2:if(n=e.sent,o=n.items,r=this.getCustomProducts(t),t=t.filter(function(e){return!e.isCustom}),t=[].concat(x(t),x(r)),a=[19,698,25,26],0<(u=o.reduce(function(e,t,n){return[25,26].includes(parseInt(t.id))?[].concat(x(e),[n]):e},[])).length)return e.next=12,this.removeMoreProducts(u);e.next=14;break;case 12:(i=e.sent)&&(o=i.items);case 14:if(c=t.filter(function(e){return 0<e.quantity}).filter(function(t){return-1===o.findIndex(function(e){return parseInt(e.productId)===parseInt(t.productId)})&&0<t.quantity}).map(function(e){return{quantity:e.quantity,seller:1,id:e.skuId||e.id}}),console.log("productsToAdd",c),s=t.filter(function(e){return 0<e.quantity}).filter(function(e){var t=e.skuId||e.id,n=o.findIndex(function(e){return parseInt(e.id)===parseInt(t)});if(-1===n)return!1;var r=parseInt(o[n].id)===parseInt(e.id),a=parseInt(o[n].quantity)!==parseInt(e.quantity);return r&&a&&0<e.quantity}).map(function(e){var t=e.skuId||e.id;return{index:o.findIndex(function(e){return parseInt(e.id)===parseInt(t)}),quantity:e.quantity}}),console.log("productsToUpdate",s),l=t.filter(function(e){return 0<e.quantity&&!a.includes(parseInt(e.skuId||e.id))}).filter(function(t){var e=o.findIndex(function(e){return parseInt(e.productId)===parseInt(t.productId)});return-1!==e&&parseInt(o[e].id)!==parseInt(t.skuId)}).map(function(t){return[{index:o.findIndex(function(e){return parseInt(e.productId)===parseInt(t.productId)}),seller:1,quantity:0},{seller:1,id:t.skuId,quantity:t.quantity}]}).reduce(function(e,t){var n=w(t,2),r=n[0],a=n[1];return[].concat(x(e),[r,a])},[]),console.log("productsToReplaceSKU",l),d=t.filter(function(e){return e.quantity<1}).filter(function(e){var t=e.skuId||e.id;return-1!==o.findIndex(function(e){return parseInt(e.id)===parseInt(t)})&&0==e.quantity}).map(function(e){var t=e.skuId||e.id;return{index:o.findIndex(function(e){return parseInt(e.id)===parseInt(t)}),quantity:0}}),console.log("productsToRemove",d),s[0])return e.next=25,window.vtexjs.checkout.updateItems(s,null,!1);e.next=25;break;case 25:if(l[0])return e.next=28,window.vtexjs.checkout.replaceSKU(l);e.next=28;break;case 28:if(d[0])return e.next=31,window.vtexjs.checkout.removeItems(d);e.next=31;break;case 31:if(c[0])return e.next=34,window.vtexjs.checkout.addToCart(c,null);e.next=34;break;case 34:case"end":return e.stop()}},e,this)})),function(e){return v.apply(this,arguments)})},{key:"getCustomProducts",value:function(e){var u={};return e.filter(function(e){return!0===e.isCustom}).forEach(function(e){var t=e.skuId,n=e.quantity,r=e.customProductItem,a=u[t],o=parseInt(r.quantity)*parseInt(n);a?a=I({},a,{quantity:parseInt(a.quantity)+o}):a=I({},r,{quantity:o,isCustom:!0});u[t]=a}),Object.values(u)}},{key:"getProductIndexInOrderForm",value:(h=S(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCurrent();case 2:if(n=e.sent,r=n.items,-1!==(a=r.findIndex(function(e){return e.productId==t})))return e.abrupt("return",a);e.next=7;break;case 7:return e.abrupt("return");case 8:case"end":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)})},{key:"remove",value:(m=S(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCurrent();case 2:return n=e.sent,r="".concat(this._VTEX_API_ENDPOINT,"/").concat(n.orderFormId,"/items"),a={orderItems:[{index:t,quantity:0}],expectedOrderFormSections:["items"],noSplitItem:!0},e.next=7,this._httpClient.patch(r,a);case 7:case"end":return e.stop()}},e,this)})),function(e){return m.apply(this,arguments)})},{key:"removeMoreProducts",value:(f=S(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCurrent();case 2:return n=e.sent,r="".concat(this._VTEX_API_ENDPOINT,"/").concat(n.orderFormId,"/items"),a={orderItems:t.map(function(e){return{index:e,quantity:0}}),expectedOrderFormSections:["items"],noSplitItem:!0},e.next=7,this._httpClient.patch(r,a);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"updateProduct",value:(p=S(regeneratorRuntime.mark(function e(t,n){var r,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={seller:2<a.length&&void 0!==a[2]?a[2]:1,quantity:n,id:t},e.next=4,this.updateProducts([r]);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)})),function(e,t){return p.apply(this,arguments)})},{key:"updateProducts",value:(d=S(regeneratorRuntime.mark(function e(t){var n,o,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCurrent();case 2:if(n=e.sent,o=n.items,r=n.orderFormId,0<(t=t.map(function(e){var t=e.id,n=e.quantity,r=e.seller,a=o.findIndex(function(e){return parseInt(e.id)===parseInt(t)});return{id:t,index:a,quantity:n,seller:r||1}}).filter(function(e){return-1!==e.index})).length)return a={orderItems:t},e.next=10,this._httpClient.patch("/api/checkout/pub/orderForm/".concat(r,"/items"),a);e.next=11;break;case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"simulateOrderForm",value:(l=S(regeneratorRuntime.mark(function e(t){var n,r,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=1<a.length&&void 0!==a[1]?a[1]:"BRA",e.prev=1,e.next=4,vtexjs.checkout.getOrderForm();case 4:return e.next=6,vtexjs.checkout.calculateShipping({postalCode:t,country:n});case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(1),console.error("Error in simulateOrderForm",e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])})),function(e){return l.apply(this,arguments)})},{key:"simulateShipping",value:(s=S(regeneratorRuntime.mark(function e(t,n){var r,a,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=2<o.length&&void 0!==o[2]?o[2]:"BRA",e.next=3,vtexjs.checkout.simulateShipping(t,n,r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)})),function(e,t){return s.apply(this,arguments)})},{key:"updateCheckoutTransporterSLA",value:(c=S(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vtexjs.checkout.getOrderForm();case 2:return(n=vtexjs.checkout.orderForm.shippingData).logisticsInfo=t,e.next=6,vtexjs.checkout.sendAttachment("shippingData",n);case 6:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)})},{key:"updateCheckoutAddress",value:(i=S(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,vtexjs.checkout.getOrderForm();case 3:return(n=vtexjs.checkout.orderForm.shippingData).availableAddresses=[I({},n.address,{},t)],n.selectedAddresses=[I({},n.address,{},t)],n.address=I({},n.address,{},t),e.next=9,vtexjs.checkout.sendAttachment("shippingData",n);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})},{key:"setMultipleCustomDataFields",value:(u=S(regeneratorRuntime.mark(function e(t,n){var r,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCurrent();case 2:return r=e.sent,a=r.orderFormId,o="/api/checkout/pub/orderForm/".concat(a,"/customData/").concat(t),e.prev=5,e.next=8,this._httpClient.put(o,n);case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(5),console.error("setMultipleCustomDataFields",e.t0);case 14:return e.abrupt("return");case 15:case"end":return e.stop()}},e,this,[[5,11]])})),function(e,t){return u.apply(this,arguments)})},{key:"setSingleCustomDataField",value:(o=S(regeneratorRuntime.mark(function e(t,n,r){var a,o,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCurrent();case 2:return a=e.sent,o=a.orderFormId,u="/api/checkout/pub/orderForm/".concat(o,"/customData/").concat(t,"/").concat(n),i={value:r},e.prev=6,e.next=9,this._httpClient.put(u,i);case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(6),console.error("setSingleCustomDataField",e.t0);case 15:return e.abrupt("return");case 16:case"end":return e.stop()}},e,this,[[6,12]])})),function(e,t,n){return o.apply(this,arguments)})},{key:"removeSingleCustomDataField",value:(a=S(regeneratorRuntime.mark(function e(t,n){var r,a,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCurrent();case 2:return r=e.sent,a=r.orderFormId,o="/api/checkout/pub/orderForm/".concat(a,"/customData/").concat(t,"/").concat(n),u={value:null},e.prev=6,e.next=9,this._httpClient.delete(o,u);case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(6),console.error("removeSingleCustomDataField",e.t0);case 15:return e.abrupt("return");case 16:case"end":return e.stop()}},e,this,[[6,12]])})),function(e,t){return a.apply(this,arguments)})},{key:"_payloadFactory",value:function(e,t,n){return{id:e,quantity:t,seller:2<arguments.length&&void 0!==n?n:1}}}])&&j(t.prototype,n),r&&j(t,r),e}();t.a=o},x9ji:function(e,t,n){"use strict";n("07d7"),n("5s+n"),n("ls82");var o=n("m/Gl"),u=n("jmbs");function c(e,t,n,r,a,o,u){try{var i=e[o](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._logger=new u.c("httpClient")}var t,n,r,i,a;return t=e,(n=[{key:"get",value:function(e){if(!u.a.isUndefined(e))return this._execute(e,"GET")}},{key:"delete",value:function(e){if(!u.a.isUndefined(e))return this._execute(e,"DELETE")}},{key:"post",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};if(!u.a.isUndefined(e))return this._execute(e,"POST",n)}},{key:"put",value:function(e,t){if(!u.a.isUndefined(e)&&!u.a.isUndefined(t))return this._execute(e,"PUT",t)}},{key:"patch",value:function(e,t){if(!u.a.isUndefined(e)&&!u.a.isUndefined(t))return this._execute(e,"PATCH",t)}},{key:"_execute",value:function(e,t,n){var r=this,a={method:t,headers:{accept:"application/vnd.vtex.masterdata.v10+json","content-type":"application/json; charset=utf-8"}};return n&&(a.body=JSON.stringify(n)),Object(o.a)(e,a).then(this.validateResponse).then(this.parseResponseToJson).then(function(e){return e}).catch(function(e){return r._logger.log("Request succeeded with JSON response",e),e})}},{key:"parseResponseToJson",value:(i=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,t.json();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}),a=function(){var e=this,u=arguments;return new Promise(function(t,n){var r=i.apply(e,u);function a(e){c(r,t,n,a,o,"next",e)}function o(e){c(r,t,n,a,o,"throw",e)}a(void 0)})},function(e){return a.apply(this,arguments)})},{key:"validateResponse",value:function(e){return e.ok?Promise.resolve(e):Promise.reject(new Error(e.statusText))}}])&&s(t.prototype,n),r&&s(t,r),e}();t.a=r},xZRm:function(e,t){}},[[18,0,2]]]);
//# sourceMappingURL=b8one.mobile.insurance-change-1.js.map