(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"/mdI":function(e,t,r){"use strict";r.d(t,"a",function(){return a});r("pNMO"),r("4Brf"),r("0oug"),r("ma9I"),r("QWBl"),r("pjDv"),r("4mDm"),r("07d7"),r("5s+n"),r("JfAA"),r("PKPk"),r("FZtP"),r("3bBZ"),r("Kz25"),r("ls82");var n=r("vDqi"),s=r.n(n);function u(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e,t,r,n,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function d(c){return function(){var e=this,o=arguments;return new Promise(function(t,r){var n=c.apply(e,o);function a(e){l(n,t,r,a,i,"next",e)}function i(e){l(n,t,r,a,i,"throw",e)}a(void 0)})}}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.api=s.a.create({baseURL:"".concat(e,"/api/catalog_system")})}var e,r,n,a,i,o,c;return e=t,(r=[{key:"getProductsByCategories",value:(c=d(regeneratorRuntime.mark(function e(t,r){var n,a,i,o,c=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=2<c.length&&void 0!==c[2]?c[2]:0,a=3<c.length&&void 0!==c[3]?c[3]:49,i=4<c.length&&void 0!==c[4]?c[4]:["OrderByNameASC"],e.prev=3,(o=new URLSearchParams).append("_to",a),o.append("_from",n),o.append("fq","C:/".concat(t,"/").concat(r)),i.forEach(function(e){return o.append("O",e)}),e.next=11,this.api.get("/pub/products/search",{params:o});case 11:return e.abrupt("return",e.sent);case 14:e.prev=14,e.t0=e.catch(3),console.error("Error in VtexCatalogService on method getProductsByCategories",e.t0);case 17:return e.abrupt("return");case 18:case"end":return e.stop()}},e,this,[[3,14]])})),function(e,t){return c.apply(this,arguments)})},{key:"getAllProductsByCategories",value:(o=d(regeneratorRuntime.mark(function e(t,r){var n,a,i,o,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=[],a=0,i=49;case 4:return e.next=7,this.getProductsByCategories(t,r,a,i);case 7:if(o=e.sent,c=o.data,s=o.status,a=i+1,i=2*i+1,n=[].concat(u(n),u(c)),200===s)return e.abrupt("break",17);e.next=15;break;case 15:e.next=4;break;case 17:return e.abrupt("return",n);case 20:e.prev=20,e.t0=e.catch(0),console.error("Error in VtexCatalogService on method getAllProductsByCategories",e.t0);case 23:return e.abrupt("return");case 24:case"end":return e.stop()}},e,this,[[0,20]])})),function(e,t){return o.apply(this,arguments)})},{key:"getAllCategories",value:(i=d(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.api.get("/pub/category/tree/1");case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.error("Error in VtexCatalogService on method getAllCategories",e.t0);case 9:return e.abrupt("return");case 10:case"end":return e.stop()}},e,this,[[0,6]])})),function(){return i.apply(this,arguments)})},{key:"getProductVariations",value:(a=d(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.api.get("/pub/products/variations/".concat(t));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.error("Error in VtexCatalogService on method getProductVariations",e.t0);case 9:return e.abrupt("return");case 10:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return a.apply(this,arguments)})}])&&p(e.prototype,r),n&&p(e,n),t}()},19:function(e,t,r){r("wPis"),e.exports=r("QCFF")},Cwf3:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("cvkN"),a=r.n(n),i=function(e){return a()(e,{symbol:"R$ ",precision:2,separator:".",decimal:",",formatWithSymbol:!0})}},JbUL:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,"a",function(){return a});var a=function(){function i(e){var t=e.modal,r=e.modalShowCLass,n=e.openModalCallback,a=e.closeModalCallback;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.isOpen=!1,this.modalShowCLass=r||"show",this.openCallback=n||new Function,this.closeCallback=a||new Function,this.modal=t instanceof Element?t:document.querySelector(t)}var e,t,r;return e=i,(t=[{key:"show",value:function(){this.isOpen||this.modal.classList.add(this.modalShowCLass),this.isOpen=!0,this.openCallback(this)}},{key:"close",value:function(){this.isOpen&&this.modal.classList.remove(this.modalShowCLass),this.isOpen=!1,this.closeCallback(this)}}])&&n(e.prototype,t),r&&n(e,r),i}()},JoMe:function(e,t,r){"use strict";t.a=[19,698,25,26,33,35,696,699]},OzKi:function(e,t,r){"use strict";r.d(t,"a",function(){return n});r("TeQF"),r("x0AG"),r("yq1k"),r("4mDm"),r("2B1R"),r("E9XD"),r("07d7"),r("5s+n"),r("JTJg"),r("PKPk"),r("3bBZ"),r("ls82");var s=r("rdEv"),u=r("/mdI"),f=r("JoMe");function l(e,t,r,n,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function d(c){return function(){var e=this,o=arguments;return new Promise(function(t,r){var n=c.apply(e,o);function a(e){l(n,t,r,a,i,"next",e)}function i(e){l(n,t,r,a,i,"throw",e)}a(void 0)})}}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cartService=new s.a,this.vtexCatalogService=new u.a}var t,r,n,a,i,o,c;return t=e,(r=[{key:"getTotalStorageQuantity",value:(c=d(regeneratorRuntime.mark(function e(){var t,r,n,a,i,l=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cartService.getCurrent();case 2:return t=e.sent,r=t.items,e.next=6,Promise.all(r.filter(function(e){return!f.a.includes(parseInt(e.id))}).map(function(){var t=d(regeneratorRuntime.mark(function e(t){var r,n,a,i,o,c,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.productId,n=t.id,a=t.quantity,e.next=3,l.vtexCatalogService.getProductVariations(r);case 3:if(i=e.sent,o=i.data,c=o.skus.filter(function(e){var t=e.sku;return parseInt(t)===parseInt(n)})[0])return s=c.measures.weight,u=s*a,e.abrupt("return",u);e.next=10;break;case 10:return e.abrupt("return",0);case 11:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()));case 6:return n=e.sent,a=Math.round(n.reduce(function(e,t){return e+t},0)),i=0<(i=Math.round(a/5))?i:1,e.abrupt("return",i);case 11:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"addSKUStorageToOrderForm",value:(o=d(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cartService.add(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return o.apply(this,arguments)})},{key:"removeSKUStorageInOrderForm",value:(i=d(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==(n=r.findIndex(function(e){return parseInt(e.id)===t})))return e.next=4,this.cartService.remove(n);e.next=5;break;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"dispatchActionWorksWithStorageSKU",value:(a=d(regeneratorRuntime.mark(function e(){var t,r,n,a,i,o,c,s,u,l,d,p=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<p.length&&void 0!==p[0]?p[0]:1,r=33,e.next=4,this.cartService.getCurrent();case 4:if(n=e.sent,a=n.customData,i=n.items,a){e.next=9;break}return e.abrupt("return");case 9:if(o=a.customApps.filter(function(e){return"orderinfo"===e.id})[0],c=i.filter(function(e){return parseInt(e.id)===r})[0],s=i.filter(function(e){return!f.a.includes(parseInt(e.id))}).length,o){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,this.getTotalStorageQuantity();case 16:if(u=e.sent,u*=t,l=o.fields.user_need_storage,c&&(d=c.quantity!==u),d&&0<s)return e.next=23,this.cartService.updateProduct(r,u);e.next=26;break;case 23:return e.abrupt("return",e.sent);case 26:if("true"===l.toLowerCase()&&0<s)return e.next=29,this.addSKUStorageToOrderForm(r,u);e.next=32;break;case 29:return e.abrupt("return",e.sent);case 32:return e.next=34,this.removeSKUStorageInOrderForm(r,i);case 34:return e.abrupt("return",e.sent);case 35:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})}])&&p(t.prototype,r),n&&p(t,n),e}()},QCFF:function(e,t){},RDzO:function(e,t,r){"use strict";r("pNMO"),r("4Brf"),r("0oug"),r("QWBl"),r("pjDv"),r("4mDm"),r("07d7"),r("JfAA"),r("PKPk"),r("FZtP"),r("3bBZ");function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"isUndefined",value:function(e){var t=0<arguments.length&&void 0!==e?e:void 0;return null==t||""===t||t==={}||t===[]}},{key:"isInputValid",value:function(e){return!this.isUndefined(e)&&e.checkValidity()}},{key:"hasProps",value:function(e,t){return this.getMissingProps(e,t).length<=0}},{key:"getMissingProps",value:function(t,e){var r=[];return a(e).forEach(function(e){e in t||r.push(e)}),r}}],(r=null)&&i(t.prototype,r),n&&i(t,n),e}();t.a=n},UxvN:function(e,t,r){"use strict";r.d(t,"a",function(){return n});r("ma9I"),r("07d7"),r("5s+n"),r("ls82");function s(e,t,r,n,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n,c,a;return t=e,(r=[{key:"updateInsuranceSKUPrice",value:(c=regeneratorRuntime.mark(function e(t,r,n){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==r&&t){e.next=2;break}return e.abrupt("return");case 2:return a="https://wcdlfckgi9.execute-api.us-east-2.amazonaws.com/v1/api/checkout/pub/orderform/".concat(n,"/items/").concat(r,"/price"),e.next=5,fetch(a,{method:"PUT",body:JSON.stringify({price:t}),headers:{Accept:"application/json","Content-Type":"application/json"}});case 5:return e.next=7,e.sent.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}),a=function(){var e=this,o=arguments;return new Promise(function(t,r){var n=c.apply(e,o);function a(e){s(n,t,r,a,i,"next",e)}function i(e){s(n,t,r,a,i,"throw",e)}a(void 0)})},function(e,t,r){return a.apply(this,arguments)})}])&&i(t.prototype,r),n&&i(t,n),e}()},jmbs:function(e,t,r){"use strict";r.d(t,"a",function(){return n.a}),r.d(t,"b",function(){return i}),r.d(t,"c",function(){return c});var n=r("RDzO");r("ma9I"),r("TeQF"),r("yq1k"),r("oVuX"),r("sMBO"),r("toAj"),r("07d7"),r("TWNs"),r("rB9j"),r("JfAA"),r("JTJg"),r("UxlC"),r("EnZy");function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._logger=new c("Ensure"),this.props=e||{language:navigator.language||navigator.userLanguage,currency:"BRL",currencyLocale:"pt-br",minimumFractionDigits:2}}var e,r,n;return e=t,n=[{key:"getParents",value:function(e,t){Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),r=t.length;0<=--r&&t.item(r)!==this;);return-1<r});for(var r=[];e&&e!==document;e=e.parentNode)(!t||e.matches(t))&&r.push(e);return r}},{key:"serializeForm",value:function(e){for(var t=[],r=0;r<e.elements.length;r++){var n=e.elements[r];if(n.name&&!n.disabled&&"file"!==n.type&&"reset"!==n.type&&"submit"!==n.type&&"button"!==n.type)if("select-multiple"===n.type)for(var a=0;a<n.options.length;a++)n.options[a].selected&&t.push(encodeURIComponent(n.name)+"="+encodeURIComponent(n.options[a].value));else("checkbox"!==n.type&&"radio"!==n.type||n.checked)&&t.push(encodeURIComponent(n.name)+"="+encodeURIComponent(n.value))}return t.join("&")}},{key:"getFormData",value:function(e){for(var t={},r=0;r<e.elements.length;r++){var n=e.elements[r];if(n.name&&!n.disabled&&"file"!==n.type&&"reset"!==n.type&&"submit"!==n.type&&"button"!==n.type)if("select-multiple"===n.type)for(var a=0;a<n.options.length;a++)n.options[a].selected&&(t[n.name]=n.options[a].value);else("checkbox"!==n.type&&"radio"!==n.type||n.checked)&&(t[n.name]=n.value)}return t}},{key:"getRandomID",value:function(){return"_"+Math.random().toString(36).substr(2,9)}},{key:"setCookie",value:function(e,t,r){var n=new Date;n.setTime(n.getTime()+24*r*60*60*1e3);var a="expires="+n.toUTCString();document.cookie="".concat(e,"=").concat(t,";").concat(a,";path=/")}},{key:"getCookie",value:function(t){return decodeURIComponent(document.cookie).split(";").filter(function(e){return e.includes(t)})[0]||""}},{key:"isInViewport",value:function(e){var t=window.innerHeight||document.documentElement.clientHeight,r=window.innerWidth||document.documentElement.clientWidth,n=e.getBoundingClientRect(),a=n.top,i=n.right,o=n.bottom,c=n.left;return 0<=a&&0<=c&&o<=t&&i<=r}},{key:"removeAccents",value:function(e){var t={a:"á|à|ã|â|À|Á|Ã|Â",e:"é|è|ê|É|È|Ê",i:"í|ì|î|Í|Ì|Î",o:"ó|ò|ô|õ|Ó|Ò|Ô|Õ",u:"ú|ù|û|ü|Ú|Ù|Û|Ü",c:"ç|Ç",n:"ñ|Ñ"};for(var r in t)e=e.replace(new RegExp(t[r],"g"),r);return e}}],(r=[{key:"formatPrice",value:function(e){return e=(+(e/=100)).toFixed(Math.max(0,~~this.props.minimumFractionDigits)),new Intl.NumberFormat(this.props.currencyLocale,{style:"currency",currency:this.props.currency,minimumFractionDigits:this.props.minimumFractionDigits}).format(e)}}])&&a(e.prototype,r),n&&a(e,n),t}();function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"B8ONE Logger Component";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.logName=e}var e,r,n;return e=t,(r=[{key:"error",value:function(e,t){var r=0<arguments.length&&void 0!==e?e:"",n=1<arguments.length&&void 0!==t?t:{};console.error(r,n)}},{key:"info",value:function(e){var t=0<arguments.length&&void 0!==e?e:"";console.info(t)}},{key:"warning",value:function(e){var t=0<arguments.length&&void 0!==e?e:"";console.warn(this.logName,t)}},{key:"log",value:function(e){var t=0<arguments.length&&void 0!==e?e:"";console.log(t)}},{key:"log",value:function(e,t){var r=0<arguments.length&&void 0!==e?e:"",n=1<arguments.length&&void 0!==t?t:{};console.log(r,n)}}])&&o(e.prototype,r),n&&o(e,n),t}()},rdEv:function(e,t,r){"use strict";r("pNMO"),r("4Brf"),r("0oug"),r("ma9I"),r("TeQF"),r("x0AG"),r("QWBl"),r("pjDv"),r("yq1k"),r("4mDm"),r("2B1R"),r("E9XD"),r("5DmW"),r("27RR"),r("tkto"),r("07d7"),r("B6y2"),r("5s+n"),r("JfAA"),r("JTJg"),r("PKPk"),r("FZtP"),r("3bBZ"),r("ls82");var b=r("jmbs"),k=r("x9ji");function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function S(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach(function(e){a(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function I(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t,r,n,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function w(c){return function(){var e=this,o=arguments;return new Promise(function(t,r){var n=c.apply(e,o);function a(e){s(n,t,r,a,i,"next",e)}function i(e){s(n,t,r,a,i,"throw",e)}a(void 0)})}}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._VTEX_API_ENDPOINT="/api/checkout/pub/orderForm",this._logger=new b.c("Cart service"),this._httpClient=new k.a}var t,r,n,a,i,o,c,s,u,l,d,p,f,m,h,v,g,y;return t=e,(r=[{key:"getCurrent",value:(y=w(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._httpClient.get(this._VTEX_API_ENDPOINT);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return y.apply(this,arguments)})},{key:"add",value:(g=w(regeneratorRuntime.mark(function e(t,r){var n,a,i,o,c,s=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=2<s.length&&void 0!==s[2]?s[2]:1,b.a.isUndefined(t)){e.next=10;break}return e.next=4,this.getCurrent();case 4:return a=e.sent,-1<(i=a.items.findIndex(function(e){return e.id===t}))&&(r=parseInt(r)+parseInt(a.items[i].quantity)),o="".concat(this._VTEX_API_ENDPOINT,"/").concat(a.orderFormId,"/items"),c={orderItems:[{seller:n.toString(),quantity:parseInt(r),id:t.toString()}]},e.abrupt("return",this._httpClient.patch(o,c));case 10:case"end":return e.stop()}},e,this)})),function(e,t){return g.apply(this,arguments)})},{key:"checkoutCRUD",value:(v=w(regeneratorRuntime.mark(function e(t){var r,i,n,a,o,c,s,u,l,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.vtexjs.checkout.getOrderForm();case 2:if(r=e.sent,i=r.items,n=this.getCustomProducts(t),t=t.filter(function(e){return!e.isCustom}),t=[].concat(I(t),I(n)),a=[19,698,25,26],0<(o=i.reduce(function(e,t,r){return[25,26].includes(parseInt(t.id))?[].concat(I(e),[r]):e},[])).length)return e.next=12,this.removeMoreProducts(o);e.next=14;break;case 12:(c=e.sent)&&(i=c.items);case 14:if(s=t.filter(function(e){return 0<e.quantity}).filter(function(t){return-1===i.findIndex(function(e){return parseInt(e.productId)===parseInt(t.productId)})&&0<t.quantity}).map(function(e){return{quantity:e.quantity,seller:1,id:e.skuId||e.id}}),console.log("productsToAdd",s),u=t.filter(function(e){return 0<e.quantity}).filter(function(e){var t=e.skuId||e.id,r=i.findIndex(function(e){return parseInt(e.id)===parseInt(t)});if(-1===r)return!1;var n=parseInt(i[r].id)===parseInt(e.id),a=parseInt(i[r].quantity)!==parseInt(e.quantity);return n&&a&&0<e.quantity}).map(function(e){var t=e.skuId||e.id;return{index:i.findIndex(function(e){return parseInt(e.id)===parseInt(t)}),quantity:e.quantity}}),console.log("productsToUpdate",u),l=t.filter(function(e){return 0<e.quantity&&!a.includes(parseInt(e.skuId||e.id))}).filter(function(t){var e=i.findIndex(function(e){return parseInt(e.productId)===parseInt(t.productId)});return-1!==e&&parseInt(i[e].id)!==parseInt(t.skuId)}).map(function(t){return[{index:i.findIndex(function(e){return parseInt(e.productId)===parseInt(t.productId)}),seller:1,quantity:0},{seller:1,id:t.skuId,quantity:t.quantity}]}).reduce(function(e,t){var r=_(t,2),n=r[0],a=r[1];return[].concat(I(e),[n,a])},[]),console.log("productsToReplaceSKU",l),d=t.filter(function(e){return e.quantity<1}).filter(function(e){var t=e.skuId||e.id;return-1!==i.findIndex(function(e){return parseInt(e.id)===parseInt(t)})&&0==e.quantity}).map(function(e){var t=e.skuId||e.id;return{index:i.findIndex(function(e){return parseInt(e.id)===parseInt(t)}),quantity:0}}),console.log("productsToRemove",d),u[0])return e.next=25,window.vtexjs.checkout.updateItems(u,null,!1);e.next=25;break;case 25:if(l[0])return e.next=28,window.vtexjs.checkout.replaceSKU(l);e.next=28;break;case 28:if(d[0])return e.next=31,window.vtexjs.checkout.removeItems(d);e.next=31;break;case 31:if(s[0])return e.next=34,window.vtexjs.checkout.addToCart(s,null);e.next=34;break;case 34:case"end":return e.stop()}},e,this)})),function(e){return v.apply(this,arguments)})},{key:"getCustomProducts",value:function(e){var o={};return e.filter(function(e){return!0===e.isCustom}).forEach(function(e){var t=e.skuId,r=e.quantity,n=e.customProductItem,a=o[t],i=parseInt(n.quantity)*parseInt(r);a?a=S({},a,{quantity:parseInt(a.quantity)+i}):a=S({},n,{quantity:i,isCustom:!0});o[t]=a}),Object.values(o)}},{key:"getProductIndexInOrderForm",value:(h=w(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCurrent();case 2:if(r=e.sent,n=r.items,-1!==(a=n.findIndex(function(e){return e.productId==t})))return e.abrupt("return",a);e.next=7;break;case 7:return e.abrupt("return");case 8:case"end":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)})},{key:"remove",value:(m=w(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCurrent();case 2:return r=e.sent,n="".concat(this._VTEX_API_ENDPOINT,"/").concat(r.orderFormId,"/items"),a={orderItems:[{index:t,quantity:0}],expectedOrderFormSections:["items"],noSplitItem:!0},e.next=7,this._httpClient.patch(n,a);case 7:case"end":return e.stop()}},e,this)})),function(e){return m.apply(this,arguments)})},{key:"removeMoreProducts",value:(f=w(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCurrent();case 2:return r=e.sent,n="".concat(this._VTEX_API_ENDPOINT,"/").concat(r.orderFormId,"/items"),a={orderItems:t.map(function(e){return{index:e,quantity:0}}),expectedOrderFormSections:["items"],noSplitItem:!0},e.next=7,this._httpClient.patch(n,a);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"updateProduct",value:(p=w(regeneratorRuntime.mark(function e(t,r){var n,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={seller:2<a.length&&void 0!==a[2]?a[2]:1,quantity:r,id:t},e.next=4,this.updateProducts([n]);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)})),function(e,t){return p.apply(this,arguments)})},{key:"updateProducts",value:(d=w(regeneratorRuntime.mark(function e(t){var r,i,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCurrent();case 2:if(r=e.sent,i=r.items,n=r.orderFormId,0<(t=t.map(function(e){var t=e.id,r=e.quantity,n=e.seller,a=i.findIndex(function(e){return parseInt(e.id)===parseInt(t)});return{id:t,index:a,quantity:r,seller:n||1}}).filter(function(e){return-1!==e.index})).length)return a={orderItems:t},e.next=10,this._httpClient.patch("/api/checkout/pub/orderForm/".concat(n,"/items"),a);e.next=11;break;case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"simulateOrderForm",value:(l=w(regeneratorRuntime.mark(function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=1<a.length&&void 0!==a[1]?a[1]:"BRA",e.prev=1,e.next=4,vtexjs.checkout.getOrderForm();case 4:return e.next=6,vtexjs.checkout.calculateShipping({postalCode:t,country:r});case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(1),console.error("Error in simulateOrderForm",e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])})),function(e){return l.apply(this,arguments)})},{key:"simulateShipping",value:(u=w(regeneratorRuntime.mark(function e(t,r){var n,a,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=2<i.length&&void 0!==i[2]?i[2]:"BRA",e.next=3,vtexjs.checkout.simulateShipping(t,r,n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)})),function(e,t){return u.apply(this,arguments)})},{key:"updateCheckoutTransporterSLA",value:(s=w(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vtexjs.checkout.getOrderForm();case 2:return(r=vtexjs.checkout.orderForm.shippingData).logisticsInfo=t,e.next=6,vtexjs.checkout.sendAttachment("shippingData",r);case 6:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)})},{key:"updateCheckoutAddress",value:(c=w(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,vtexjs.checkout.getOrderForm();case 3:return(r=vtexjs.checkout.orderForm.shippingData).availableAddresses=[S({},r.address,{},t)],r.selectedAddresses=[S({},r.address,{},t)],r.address=S({},r.address,{},t),e.next=9,vtexjs.checkout.sendAttachment("shippingData",r);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)})},{key:"setMultipleCustomDataFields",value:(o=w(regeneratorRuntime.mark(function e(t,r){var n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCurrent();case 2:return n=e.sent,a=n.orderFormId,i="/api/checkout/pub/orderForm/".concat(a,"/customData/").concat(t),e.prev=5,e.next=8,this._httpClient.put(i,r);case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(5),console.error("setMultipleCustomDataFields",e.t0);case 14:return e.abrupt("return");case 15:case"end":return e.stop()}},e,this,[[5,11]])})),function(e,t){return o.apply(this,arguments)})},{key:"setSingleCustomDataField",value:(i=w(regeneratorRuntime.mark(function e(t,r,n){var a,i,o,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCurrent();case 2:return a=e.sent,i=a.orderFormId,o="/api/checkout/pub/orderForm/".concat(i,"/customData/").concat(t,"/").concat(r),c={value:n},e.prev=6,e.next=9,this._httpClient.put(o,c);case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(6),console.error("setSingleCustomDataField",e.t0);case 15:return e.abrupt("return");case 16:case"end":return e.stop()}},e,this,[[6,12]])})),function(e,t,r){return i.apply(this,arguments)})},{key:"removeSingleCustomDataField",value:(a=w(regeneratorRuntime.mark(function e(t,r){var n,a,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCurrent();case 2:return n=e.sent,a=n.orderFormId,i="/api/checkout/pub/orderForm/".concat(a,"/customData/").concat(t,"/").concat(r),o={value:null},e.prev=6,e.next=9,this._httpClient.delete(i,o);case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(6),console.error("removeSingleCustomDataField",e.t0);case 15:return e.abrupt("return");case 16:case"end":return e.stop()}},e,this,[[6,12]])})),function(e,t){return a.apply(this,arguments)})},{key:"_payloadFactory",value:function(e,t,r){return{id:e,quantity:t,seller:2<arguments.length&&void 0!==r?r:1}}}])&&x(t.prototype,r),n&&x(t,n),e}();t.a=i},wPis:function(e,t,r){"use strict";r.r(t);r("pNMO"),r("4Brf"),r("0oug"),r("ma9I"),r("TeQF"),r("fbCW"),r("x0AG"),r("QWBl"),r("pjDv"),r("yq1k"),r("yXV3"),r("4mDm"),r("oVuX"),r("2B1R"),r("E9XD"),r("ToJy"),r("sMBO"),r("T63A"),r("5DmW"),r("27RR"),r("tkto"),r("07d7"),r("B6y2"),r("5s+n"),r("rB9j"),r("JfAA"),r("JTJg"),r("PKPk"),r("UxlC"),r("hByQ"),r("EnZy"),r("FZtP"),r("3bBZ"),r("ls82");var d=r("jmbs"),p=r("JbUL"),f=r("x9ji"),m=r("rdEv"),h=r("OzKi"),v=r("UxvN"),y=r("Cwf3"),g=r("JoMe"),n=r("zwY0"),b=r.n(n),k=r("Io36"),a=(r("1+rt"),r("Wgwc")),S=r.n(a);function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function I(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach(function(e){w(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t,r,n,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function C(c){return function(){var e=this,o=arguments;return new Promise(function(t,r){var n=c.apply(e,o);function a(e){s(n,t,r,a,i,"next",e)}function i(e){s(n,t,r,a,i,"throw",e)}a(void 0)})}}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.products={},this.addressCep=null,this.logisticsInfo=null,this.modalRemoveProductInstance=null,this.dateSelected=null,this.modalDate=null,this.calendarInstance=null,this.insuranceItems={},this.cartService=new m.a,this.httpClient=new f.a,this.storageService=new h.a,this.insuranceService=new v.a,this.helper=new d.b,this.userIsDefined=null,this.orderForm={},this.transporterSelected,this.totalInsuranceFormatted,this.totalInsurance=Object(y.a)("R$ 0,00"),this.totalOrderSummary=Object(y.a)("R$ 0,00"),this.totalTransporterSelected=Object(y.a)("R$ 0,00"),this.totalStorageMonth="R$ 0,00",this.totalStorage=Object(y.a)("R$ 0,00"),this.userSelectedStorageMonths=1,this.totalizers=[],this.customSelectStorageServiceInstance=null,this.logisticsInfo=[],this.liftingQuantity=0,this.lifting="içamento na origem e destino",this.tableContentElement=document.querySelector(".summary-table .table__content"),(window.OrderSummaryPage=this).init()}var t,r,n,a,i,o,c,s,u,l;return t=e,(r=[{key:"init",value:(l=C(regeneratorRuntime.mark(function e(){var t,r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("/no-cache/profileSystem/getProfile");case 2:return t=e.sent,this.userIsDefined=t.IsUserDefined,this.initModalRemoveProduct(),this.initModalDate(),this.initTermsModal(),this.setHandledTermsCheckboxChange(),this.handleGoToPaymentButton(),this.setHandledButtonEditDateClick(),this.setHandledButtonSaveClick(),e.t0=this,e.next=14,this.cartService.getCurrent();case 14:return e.t1=e.sent,e.t0.updateOrderForm.call(e.t0,e.t1),e.next=18,this.updateShippingData();case 18:this.logisticsInfo=this.orderForm.shippingData.logisticsInfo,this.setTransporterSelected(),this.setTotalInsurance(),this.getProductsInCustomData(),this.setDate(),this.getAddress(),this.getInsuranceItems(),this.setAddressCep(),this.getLiftingFromCustomData(),this.addServicesToDOM(),this.updateSelectedSLA(),this.initCalendar(),this.setTotalTransporterSelected(),this.setTotalOrderSummary(),this.setTotalOrderSummaryElement(),r=this.createTransporterElement(this.transporterSelected),n=this.createProductstInOrderForm(),a=this.createCustomProducts(),this.addTransporterToDOM(r),this.addOrderFormProductsToDOM(n),this.addCustomProductsToDOM(a),document.querySelector('a[href="#entenda-o-prazo-de-entrega-da-sua-mudanca"]').addEventListener("click",function(e){e.preventDefault();var t=document.querySelector("#entenda-o-prazo-de-entrega-da-sua-mudanca"),r=document.querySelector(".header");window.scrollTo(0,t.offsetTop-(r.offsetHeight+48))}),this.setHandledProducts(),this.setHandledTransporterElement(),this.setHandledUpdateButtonClick(),this.removePageLoading();case 44:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"updateOrderForm",value:function(e){e&&(this.orderForm=e)}},{key:"getLiftingFromCustomData",value:function(){var r=this,e=this.orderForm.customData;e&&e.customApps.filter(function(e){return"orderinfo"===e.id}).forEach(function(e){var t=e.fields.lifting;t&&(r.lifting=t)})}},{key:"initCalendar",value:function(){this.calendarInstance=b()(".js-calendar",{inline:!0,dateFormat:"d/m/Y",minDate:(new Date).fp_incr(7),defaultDate:this.dateSelected,locale:k.Portuguese,appendTo:document.querySelector(".js-calendar"),prevArrow:'<i class="fas fa-caret-left next-month-icon-left"></i>',nextArrow:'<i class="fas fa-caret-right next-month-icon-right"></i>',disable:[function(e){return 0===e.getDay()||6===e.getDay()}]}),this.calendarInstance.setDate(new Date(this.dateSelected))}},{key:"initTermsModal",value:function(){var t=this,e=document.querySelector(".modal__terms"),r=e.querySelector(".js-button-continue"),n=e.querySelector(".js-button-close-modal");this.modalTerms=new p.a({modal:e,modalShowCLass:"wrapper-modal--show"}),r.addEventListener("click",C(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.classList.add("js-loading"),e.next=3,t.saveData();case 3:return t.updateInsuranceValue(),e.next=6,t.updateTranspoterValue();case 6:r.classList.remove("js-loading"),t.userIsDefined?window.location.assign("/checkout/#/payment"):t.loginUser();case 8:case"end":return e.stop()}},e)}))),n.addEventListener("click",function(){return t.modalTerms.close()})}},{key:"updateShippingData",value:(u=C(regeneratorRuntime.mark(function e(){var t,r,n,a,i,o,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.userIsDefined){e.next=28;break}if(t=this.orderForm,r=t.customData,n=t.totalizers,a=t.clientProfileData,r){e.next=4;break}return e.abrupt("return");case 4:if(!(i=r.customApps.filter(function(e){return"orderinfo"===e.id})[0])){e.next=28;break}if(o={addressType:"residential",city:i.fields.to_city,neighborhood:i.fields.to_address_county,number:i.fields.to_address_number,postalCode:i.fields.to_address_zipcode,state:i.fields.to_state,street:i.fields.to_address_name,receiverName:a.firstName&&a.lastName?"".concat(a.firstName," ").concat(a.lastName):a.email.split("@")[0].replace(/\W/g,"")},c=n.filter(function(e){return"Shipping"===e.id})[0],s=r.customApps.filter(function(e){return"orderinfo"===e.id})[0],c){e.next=14;break}return e.next=12,window.vtexjs.checkout.getOrderForm();case 12:return e.next=14,window.vtexjs.checkout.calculateShipping({postalCode:s.fields.to_address_zipcode,country:"BRA"});case 14:return e.t0=this,e.next=17,this.cartService.updateCheckoutAddress(o);case 17:return e.t1=e.sent,e.t0.updateOrderForm.call(e.t0,e.t1),e.t2=this,e.next=22,this.cartService.updateCheckoutTransporterSLA(this.logisticsInfo);case 22:if(e.t3=e.sent,e.t2.updateOrderForm.call(e.t2,e.t3),-1<window.location.search.indexOf("?logged=true"))return e.next=27,window.vtexjs.checkout.clearMessages();e.next=28;break;case 27:window.location.assign("/checkout/#/payment");case 28:return e.abrupt("return");case 29:case"end":return e.stop()}},e,this)})),function(){return u.apply(this,arguments)})},{key:"loginUser",value:function(){vtexid.start({returnUrl:"".concat(window.location.href,"?logged=true"),locale:"pt-BR",forceReload:!1}),window.scrollTo(0,0)}},{key:"handleGoToPaymentButton",value:function(){var e=this;document.querySelector(".js-toPayment-button").addEventListener("click",function(){e.modalTerms.show()})}},{key:"setHandledTermsCheckboxChange",value:function(){var e=document.querySelector(".modal__terms"),t=document.querySelector(".modal__terms .js-button-continue");e.addEventListener("change",function(e){!x(document.querySelectorAll(".modal__terms .modal__fakeInput")).map(function(e){return e.checked}).includes(!1)?t.removeAttribute("disabled"):t.setAttribute("disabled",!0)})}},{key:"setTotalTransporterSelected",value:function(){var e=this.transporterSelected.deliveryTypeSelected.priceFormatted;this.totalTransporterSelected=this.totalTransporterSelected.add(e)}},{key:"setTotalInsurance",value:function(){var r=this,e=this.orderForm.customData;e&&e.customApps.filter(function(e){return"insurance"===e.id}).forEach(function(e){var t=e.fields.total;t&&(r.totalInsurance=r.totalInsurance.add(t),r.totalInsuranceFormatted=r.totalInsurance.format())})}},{key:"setTotalOrderSummaryElement",value:function(){var t=this;document.querySelectorAll(".js-total-order-summary").forEach(function(e){e.textContent=t.totalOrderSummary.format()})}},{key:"setTotalOrderSummary",value:function(){this.totalOrderSummary=this.totalOrderSummary.add(this.totalTransporterSelected.format()).add(this.totalInsurance.multiply(.01).format())}},{key:"initModalRemoveProduct",value:function(){var r=this,e=document.querySelector(".modal--remove-product"),t=e.querySelector(".modal__close"),n=e.querySelector(".js-button-remove-product"),a=e.querySelector(".js-button-cancel-remove-product");this.modalRemoveProductInstance=new p.a({modal:e,modalShowCLass:"wrapper-modal--show",closeModalCallback:function(){1==Object.keys(r.products).length&&r.hideErrorRemoveProductMessage()}}),n.addEventListener("click",function(e){var t=e.target.dataset.productIdToRemove;1<Object.keys(r.products).length?(r.handledConfirmRemoveProduct(t,r.products[t]),r.modalRemoveProductInstance.close()):r.showErrorRemoveProductMessage()}),[t,a].forEach(function(e){e.addEventListener("click",function(e){return r.modalRemoveProductInstance.close()})})}},{key:"showErrorRemoveProductMessage",value:function(){document.querySelector(".modal--remove-product .modal__paragraph--error").classList.add("modal__paragraph--error-show")}},{key:"hideErrorRemoveProductMessage",value:function(){document.querySelector(".modal--remove-product .modal__paragraph--error").classList.remove("modal__paragraph--error-show")}},{key:"initModalDate",value:function(){var r=this,e=document.querySelector(".modal-date"),t=e.querySelector(".modal__close"),n=e.querySelector(".js-button-continue"),a=e.querySelector(".js-button-cancel");this.modalDate=new p.a({modal:e,modalShowCLass:"wrapper-modal--show"}),n.addEventListener("click",function(e){e.target;var t=r.calendarInstance.formatDate(r.calendarInstance.selectedDates[0],"Y/m/d");r.dateSelected=t,r.updateCalendarComponent(t),r.modalDate.close()}),[t,a].forEach(function(e){e.addEventListener("click",function(e){return r.modalDate.close()})})}},{key:"setHandledButtonEditDateClick",value:function(){var t=this;document.querySelector(".card__button--edit").addEventListener("click",function(e){t.modalDate.show()})}},{key:"setHandledTransporterElement",value:function(){var a=this,i=document.querySelector(".transporter");x(i.querySelectorAll(".price")).forEach(function(n){n.addEventListener("change",function(e){var t=document.querySelector(".price--active");t&&(t.classList.remove("price--active"),t.querySelector('input[type="checkbox"]').checked=!1);n.classList.add("price--active"),n.querySelector('input[type="checkbox"]').checked=!0;var r=n.dataset.transporterDeliveryType;i.setAttribute("data-transporter-delivery-type-selected",r),a.setTransporterSelected(i)})})}},{key:"setHandledProduct",value:function(t){var r=this,e=t.querySelector(".product__quantity--minus"),n=t.querySelector(".product__quantity--add"),a=t.querySelector(".js-input-special-packaging"),i=t.querySelector(".product__remove-button"),o=t.querySelector(".product__quantity"),c=t.querySelector(".js-input-product-active");e.addEventListener("click",function(e){return r.handledMinusQuantityProduct(e,t)}),n.addEventListener("click",function(e){return r.handledAddQuantityProduct(e,t)}),a&&a.addEventListener("change",function(e){return r.handledSpecialPackagingProduct(e,t)}),i.addEventListener("click",function(e){return r.handledRemoveProductClick(e,t)}),o.addEventListener("input",function(e){return r.handledProductQuantityChange(e,t)}),c.addEventListener("change",function(e){return r.handledProductActiveChange(e,t)})}},{key:"setHandledProducts",value:function(){var t=this;x(document.querySelectorAll(".summary-table .product")).forEach(function(e){return t.setHandledProduct(e)})}},{key:"setTotalizers",value:function(e){this.totalizers=e}},{key:"setTransporterSelected",value:function(e){var r=this,t=0<arguments.length&&void 0!==e?e:null;if(t){var n=t.dataset.transporterDeliveryTypeSelected;this.transporterSelected.deliveryTypeSelected=this.transporterSelected.deliveryTypes.filter(function(e){return e.type===n})[0]}else{var a=this.orderForm.customData;if(!a)return;a.customApps.filter(function(e){return"selectedcourier"===e.id}).forEach(function(e){var t=e.fields.courier_data;r.transporterSelected=JSON.parse(t),r.orderDeliveryTypesByLessPrice()})}}},{key:"handledAddQuantityProduct",value:function(e,t){var r=t.dataset.productId,n=t.querySelector(".product__quantity"),a=t.dataset.productQuantity=++n.value;this.products[r].quantity=parseInt(a),this.products[r].liftingQuantity=this.products[r].requiresLifting?+parseInt(a):0,"içamento na origem e destino"===this.lifting?(this.products[r].liftingQuantityOrigin=this.products[r].liftingQuantity,this.products[r].liftingQuantityDestination=this.products[r].liftingQuantity):"içamento no origem"===this.lifting?this.products[r].liftingQuantityOrigin=this.products[r].liftingQuantity:this.products[r].liftingQuantityDestination=this.products[r].liftingQuantity}},{key:"handledMinusQuantityProduct",value:function(e,t){var r=t.dataset,n=r.productId,a=r.productQuantity,i=t.querySelector(".product__quantity");if(1<+a){var o=t.dataset.productQuantity=--i.value;this.products[n].quantity=parseInt(o),this.products[n].liftingQuantity=this.products[n].requiresLifting?+parseInt(o):0,"içamento na origem e destino"===this.lifting?(this.products[n].liftingQuantityOrigin=this.products[n].liftingQuantity,this.products[n].liftingQuantityDestination=this.products[n].liftingQuantity):"içamento no origem"===this.lifting?this.products[n].liftingQuantityOrigin=this.products[n].liftingQuantity:this.products[n].liftingQuantityDestination=this.products[n].liftingQuantity}}},{key:"handledProductQuantityChange",value:function(e,t){var r=e.target.value,n=t.dataset.productId;0<r&&(this.products[n].quantity=parseInt(r),t.dataset.productQuantity=r,this.products[n].liftingQuantity=this.products[n].requiresLifting?+parseInt(r):0,"içamento na origem e destino"===this.lifting?(this.products[n].liftingQuantityOrigin=this.products[n].liftingQuantity,this.products[n].liftingQuantityDestination=this.products[n].liftingQuantity):"içamento no origem"===this.lifting?this.products[n].liftingQuantityOrigin=this.products[n].liftingQuantity:this.products[n].liftingQuantityDestination=this.products[n].liftingQuantity)}},{key:"handledSpecialPackagingProduct",value:function(e,t){var r=e.target.checked,n=t.dataset,a=n.productId,i=n.skuIdWithBox,o=n.skuIdWithoutBox;t.dataset.productSpecialPackaging=r;var c=this.products[a];i*=1,o*=1,c.specialPackaging=r,c.skuId=r?i:o,c.isCustom&&(c.customProductItem.id=c.skuId)}},{key:"handledProductActiveChange",value:function(e,t){var r=e.target.checked,n=t.dataset.productId;this.products[n].active=r}},{key:"createProductForModalRemove",value:function(e,t,r){var n=2<arguments.length&&void 0!==r?r:"",a=document.createElement("article");return a.setAttribute("class","product"),a.innerHTML+='\n      <figure class="product__figure">\n        <img \n          class="product__image js-modal-product-image"\n          src="'.concat(t,'"\n          alt="').concat(e,'"\n        />\n      </figure>\n    \n      <div class="product__group">\n        <h3 class="product__name js-modal-product-name">\n          ').concat(e,'\n        </h3>\n        \n        <div class="product__attributes">\n          <p class="attributes__item js-modal-product-attribute-item">\n            ').concat(n,"\n          </p>\n        </div>\n      </div>\n    "),a}},{key:"createCustomProductForModalRemove",value:function(e,t){var r=1<arguments.length&&void 0!==t?t:"",n=document.createElement("article");return n.setAttribute("class","product"),n.innerHTML+='\n      <div class="product__icon-container">\n        <i class="far fa-box product__icon"></i>\n      </div>\n    \n      <div class="product__group">\n        <h3 class="product__name js-modal-product-name">\n          '.concat(e,'\n        </h3>\n        \n        <div class="product__attributes">\n          <p class="attributes__item js-modal-product-attribute-item">\n            ').concat(r,"\n          </p>\n        </div>\n      </div>\n    "),n}},{key:"handledConfirmRemoveProduct",value:(s=C(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.querySelector('[data-product-id="'.concat(t,'"]')),r.isCustom){e.next=6;break}if(-1!==(a=this.orderForm.items.findIndex(function(e){return e.productId==t})))return e.next=6,this.cartService.remove(a);e.next=6;break;case 6:return delete this.products[t],delete this.insuranceItems[t],e.t0=this,e.next=11,this.cartService.getCurrent();case 11:return e.t1=e.sent,e.t0.updateOrderForm.call(e.t0,e.t1),e.next=15,this.saveData();case 15:return this.updateInsuranceValue(),e.next=18,this.updateTranspoterValue();case 18:this.updateTotalOrderValue(),n.parentElement.remove();case 20:case"end":return e.stop()}},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"handledRemoveProductClick",value:function(e,t){var r,n=t.dataset.productId,a=this.products[n].isCustom,i=t.querySelector(".product__name"),o=t.querySelector(".product__image"),c=(t.querySelector(".attributes__item"),document.querySelector(".modal--remove-product")),s=c.querySelector(".product__container"),u=c.querySelector(".js-button-remove-product"),l=c.querySelector(".product");l&&l.remove(),r=a?this.createCustomProductForModalRemove(i.textContent):this.createProductForModalRemove(i.textContent,o.src),s.prepend(r),u.setAttribute("data-product-id-to-remove",n),this.modalRemoveProductInstance.show()}},{key:"updateInsuranceValue",value:function(e){var r=this;if(!["skipped","none"].includes(this.insuranceItems)){var t=Object.values(this.insuranceItems).filter(function(e){var t=e.productId;return r.products[t].active}).reduce(function(e,t){return e.add(t.totalInsuranceFormatted)},Object(y.a)("R$ 0,00"));this.totalInsurance=t}}},{key:"updateTranspoterValue",value:(c=C(regeneratorRuntime.mark(function e(){var t,r,n,a,i,o,c,s,u,l,d,p,f=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.orderForm,r=t.items,n=t.totalizers,this.setTotalizers(n),a=r.filter(function(e){var t=e.id;return 35===parseInt(t)})[0],i=this.totalizers.filter(function(e){return"Shipping"!==e.id}).reduce(function(e,t){return e+t.value},0),o=Object.values(this.products).filter(function(e){return e.active&&!g.a.includes(e.skuId)}).map(function(e){return{quantity:e.quantity,seller:1,id:e.skuId}}),c=Object.values(this.products).filter(function(e){return e.active&&e.isCustom}).reduce(function(e,t){var r=t.customProductItem,n=r.quantity,a=r.id,i=n*t.quantity;return e[a]?e[a].quantity=e[a].quantity+i:e[a]={id:a,quantity:i,seller:1},e},{}),c=Object.values(c),s=r.filter(function(e){return 33===parseInt(e.id)}).map(function(e){return{id:e.id,quantity:e.quantity,seller:1}})[0],u=r.filter(function(e){return 10===parseInt(e.productId)}).map(function(e){return{id:e.id,quantity:e.quantity,seller:1}}),l=[].concat(x(o),x(c)),s&&l.push(s),0<u.length&&(l=[].concat(x(l),x(u))),e.next=15,this.cartService.simulateShipping(l,this.addressCep);case 15:d=e.sent,p=d.logisticsInfo,this.logisticsInfo=p.filter(function(e){var t=f.transporterSelected.courierIds.split(";");return e.slas=e.slas.filter(function(e){return t.includes(e.deliveryIds[0].courierId)}),e}),this.getDeliveryTypes(),this.transporterSelected.deliveryTypes=this.transporterSelected.deliveryTypes.map(function(r){var e=p.reduce(function(e,t){return e+t.slas.filter(function(e){return e.id===r.slaName})[0].price},0);e+=a?i+-a.manualPrice:i;var t=f.helper.formatPrice(e);return I({},r,{price:e,priceFormatted:t})}),this.transporterSelected.deliveryTypeSelected=this.transporterSelected.deliveryTypes.filter(function(e){return e.slaName===f.transporterSelected.deliveryTypeSelected.slaName})[0],this.totalTransporterSelected=Object(y.a)(this.transporterSelected.deliveryTypeSelected.priceFormatted),this.updateTransporterElement();case 23:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"updateTransporterElement",value:function(){this.transporterSelected.deliveryTypes.forEach(function(e){document.querySelector('[data-transporter-delivery-type="'.concat(e.type,'"]')).querySelector(".price__total").textContent=e.priceFormatted})}},{key:"updateTotalOrderValue",value:function(){this.totalOrderSummary=Object(y.a)("R$ 0,00"),this.setTotalOrderSummary(),this.setTotalOrderSummaryElement()}},{key:"getTransporterVariations",value:function(e){var i={};return e.forEach(function(e){e.slas.forEach(function(e){var t=e.id,r=e.price,n=e.name,a=t.toLowerCase().replace(/\s/g,"");i[a]?i[a].price+=r:i[a]={price:r,name:n}})}),i}},{key:"getDeliveryTypes",value:function(){var l=this,d=this.getTransporterVariations(this.logisticsInfo);delete this.transporterSelected.deliveryType,delete this.transporterSelected.deliveryTypes,this.logisticsInfo[0].slas.forEach(function(e){var t=e.id,r=e.name,n=e.deliveryIds,a=t.toLowerCase().replace(/\s/g,""),i=_(t.split(" - "),2),o=(i[0],i[1]),c=n[0].courierId,s=d[a].price,u=[{price:s,priceFormatted:l.helper.formatPrice(s),id:c,type:o,slaName:r}];l.transporterSelected.deliveryTypes?l.transporterSelected.deliveryTypes=[].concat(u,x(l.transporterSelected.deliveryTypes)):l.transporterSelected.deliveryTypes=u})}},{key:"createProduct",value:function(e){e.skuId;var t=e.imageUrl,r=e.quantity,n=e.productId,a=e.productName,i=(e.description,e.skuIdWithBox),o=e.skuIdWithoutBox,c=(e.requiresLifting,e.specialPackaging);e.liftingQuantityOrigin,e.liftingQuantityDestination;return'\n      <article \n        class="product"\n        data-product-id="'.concat(n,'"\n        data-product-quantity="').concat(r,'" \n        data-product-special-packaging="').concat(c,'"\n        data-sku-id-with-box="').concat(i||!1,'"\n        data-sku-id-without-box="').concat(o,'"\n      >\n        <div class="product__container">\n          <div class="product__container-checkbox">\n            <label for="product-').concat(n,'">\n              <div class="checkbox">\n                <input \n                  checked="true"\n                  type="checkbox"\n                  class="js-input-product-active" \n                  id="product-').concat(n,'"\n                />\n                <i class="far fa-check checkbox__icon"></i>\n              </div>\n            </label>\n          </div>\n      \n          <figure class="product__figure">\n            <img \n              class="product__image" \n              alt="').concat(a,'"\n              src="').concat(t,'" \n            />\n          </figure>\n      \n          <div class="product__group">\n            <h3 class="product__name">').concat(a,'</h3>\n          </div>\n        </div>\n        \n        <div class="product__actions">\n          <button class="actions__button product__quantity--minus">\n            <i class="fal fa-minus button__icon"></i>\n          </button>\n      \n          <input\n            min="1"\n            type="number"\n            class="product__quantity"\n            placeholder="1"\n            value="').concat(r,'"\n          />\n      \n          <button class="actions__button product__quantity--add">\n            <i class="fal fa-plus button__icon"></i>\n          </button>\n        </div>\n        \n        <button class="product__remove-button">\n          <i class="far fa-trash-alt remove-button__icon"></i>\n        </button>\n      </article>\n    ')}},{key:"createCustomProduct",value:function(e){var t=e.quantity,r=e.customAttributes,n=e.productId,a=e.specialPackaging;return'\n      <article \n        class="product"\n        data-product-id="'.concat(n,'"\n        data-product-quantity="').concat(t,'"\n        data-product-special-packaging="').concat(a,'"\n        data-sku-id-with-box="',26,'"\n        data-sku-id-without-box="',25,'"\n      >\n        <div class="product__container">\n          <div class="product__container-checkbox">\n            <label for="product-').concat(n,'">\n              <div class="checkbox">\n                <input \n                  checked="true" \n                  type="checkbox"\n                  class="js-input-product-active"\n                  id="product-').concat(n,'"\n                />\n                <i class="far fa-check checkbox__icon"></i>\n              </div>\n            </label>\n          </div>\n\n          <div class="product__icon-container">\n            <i class="far fa-box product__icon"></i>\n          </div>\n          \n          <div class="product__group">\n            <h3 class="product__name">\n              ').concat(r["product-name"],'\n            </h3>\n          </div>\n        </div>\n\n        <div class="product__actions">\n          <button class="actions__button product__quantity--minus">\n            <i class="fal fa-minus button__icon"></i>\n          </button>\n      \n          <input\n            min="1"\n            type="number"\n            class="product__quantity"\n            placeholder="1"\n            value="').concat(t,'"\n          />\n      \n          <button class="actions__button product__quantity--add">\n            <i class="fal fa-plus button__icon"></i>\n          </button>\n        </div>\n\n        <button class="product__remove-button">\n          <i class="far fa-trash-alt remove-button__icon"></i>\n        </button\n      </article>\n    ')}},{key:"createProductstInOrderForm",value:function(){var h=this;return this.orderForm.items.filter(function(e){var t=e.id;return!g.a.includes(parseInt(t))}).map(function(e){var t=e.name,r=e.skuName,n=e.imageUrl,a=e.productId,i=e.quantity,o=e.id,c=t.replace(r,""),s=h.products[a],u=s.skuIdWithBox,l=s.skuIdWithoutBox,d=s.specialPackaging,p=s.requiresLifting,f=s.liftingQuantityOrigin,m=s.liftingQuantityDestination;return'\n            <div class="table__row">\n              '.concat(h.createProduct({skuId:o,quantity:i,imageUrl:n,productId:a,productName:c,description:"",skuIdWithBox:u,skuIdWithoutBox:l,requiresLifting:p,specialPackaging:d,liftingQuantityOrigin:f,liftingQuantityDestination:m}),"\n            </div>\n          ")}).join("")}},{key:"getProductByID",value:(o=C(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.httpClient.get("/api/catalog_system/pub/products/variations/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"createCustomProducts",value:function(){var t=this;return Object.values(this.products).filter(function(e){return e.isCustom}).map(function(e){return'\n          <div class="table__row">\n            '.concat(t.createCustomProduct(e),"\n          </div>\n        ")}).join("")}},{key:"addCustomProductsToDOM",value:function(e){this.tableContentElement.innerHTML+=e}},{key:"addOrderFormProductsToDOM",value:function(e){this.tableContentElement.innerHTML+=e}},{key:"addTransporterToDOM",value:function(e){document.querySelector(".card--transporter").innerHTML+=e}},{key:"getProductsInCustomData",value:function(){var r=this;try{var e=this.orderForm.customData;if(!e)return;e.customApps.filter(function(e){return"selecteditems"===e.id}).forEach(function(e){var t=e.fields.products_data;JSON.parse(t).forEach(function(e){e.active=!0,r.products[e.productId]=e})})}catch(e){console.error("Error in getCustomProductsInLocalStorage",e)}}},{key:"createTransporterPriceElement",value:function(e,t){var r=1<arguments.length&&void 0!==t&&t;return'\n      <div \n        class="price '.concat(r?"price--active":"",'" \n        data-transporter-delivery-type="').concat(e.type,'"\n      >\n        <div class="price__row">\n          <div class="price__container price__container--flex">\n            <label for="').concat(e.id,'">\n              <div class="checkbox">\n                <input \n                  type="checkbox" \n                  id="').concat(e.id,'"\n                  ').concat(r?'checked="true"':"",'\n                />\n                  \n                <i class="fa fa-check checkbox__icon"></i>\n              </div>\n\n              <p class="checkbox__label">').concat(e.type,'</p>\n            </label>\n\n            <button \n              class="tooltip without-padding" \n              data-balloon-pos="left" \n              data-balloon-length="large"\n              aria-label="').concat("Exclusivo"===e.type?"Nas mudanças exclusivas, o caminhão da mudança vai direto para sua nova residência. Apenas seus bens vão no caminhão de mudança. Prazo de entrega: A entrega ocorrerá imediatamente após a embalagem dos seus itens. Por favor, considere os dias de viagens necessários para que o caminhão da mudança chegue até o destino. Antes da embalagem nossos consultores entrarão em contato para agendar a melhor data para sua conveniência":"Nas mudanças compartilhadas os seus bens podem ir no caminhão de mudança junto com outros de outras pessoas. Mas o fato de compartilhar o caminhão não representa qualquer risco para seus bens e sem qualquer perda de qualidade. Prazo de entrega: Em até 45 dias da data da embalagem. Nossos consultores entrarão em contato para agendar a melhor data para sua conveniência",'">\n              <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path fill-rule="evenodd" clip-rule="evenodd" d="M0 8C0 3.58172 3.58172 0 8 0C10.1217 0 12.1566 0.842855 13.6569 2.34315C15.1571 3.84344 16 5.87827 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8ZM1.6 8C1.6 4.46538 4.46538 1.6 8 1.6C9.69739 1.6 11.3253 2.27428 12.5255 3.47452C13.7257 4.67475 14.4 6.30261 14.4 8C14.4 11.5346 11.5346 14.4 8 14.4C4.46538 14.4 1.6 11.5346 1.6 8Z" fill="#FF8B30"></path>\n                <path fill-rule="evenodd" clip-rule="evenodd" d="M10.2907 7.53114C10.5738 7.28895 10.7798 6.97699 10.8854 6.63034C11.0329 6.11191 10.9471 5.55896 10.6482 5.10234C10.4031 4.73488 10.0414 4.44987 9.61467 4.28794C9.11078 4.09022 8.5693 3.9922 8.02371 3.99994C7.65121 4.00747 7.28303 4.0768 6.93596 4.20474C6.41622 4.38232 5.96755 4.70764 5.65166 5.13594C5.46403 5.38958 5.36133 5.69056 5.35685 5.99994C5.3473 6.17964 5.42014 6.35453 5.55678 6.47994C5.6583 6.56944 5.78567 6.62846 5.92275 6.64954C6.23437 6.73113 6.56596 6.61184 6.74111 6.35514C6.81762 6.2391 6.88223 6.11632 6.94689 5.99346C6.97673 5.93675 7.00658 5.88002 7.03761 5.82394C7.15101 5.57642 7.36828 5.38457 7.6374 5.29434C7.88275 5.22353 8.14259 5.20981 8.39476 5.25434C8.55994 5.27946 8.71693 5.33964 8.85392 5.43034C9.23345 5.68314 9.30291 6.25434 9.08096 6.60314C8.91857 6.83449 8.71373 7.03659 8.47609 7.19994C8.15735 7.41611 7.85915 7.65809 7.58488 7.92314C7.34888 8.15468 7.21292 8.46108 7.20366 8.78234C7.18548 9.04698 7.32284 9.29964 7.56116 9.43994C7.7043 9.52066 7.87169 9.55441 8.03726 9.53594C8.29383 9.53636 8.52418 9.38752 8.61672 9.16154C8.66077 9.0634 8.70595 8.961 8.75226 8.85434C8.80661 8.71112 8.89875 8.58336 9.01996 8.48314L9.02 8.48311C9.20128 8.34872 9.38256 8.21433 9.56723 8.08634C9.82276 7.91863 10.0646 7.73304 10.2907 7.53114ZM7.01389 11.1343C7.01389 11.6124 7.42428 11.9999 7.93052 11.9999C8.17362 11.9999 8.40677 11.9087 8.57867 11.7464C8.75057 11.5841 8.84714 11.3639 8.84714 11.1343C8.84714 10.6563 8.43676 10.2687 7.93052 10.2687C7.42428 10.2687 7.01389 10.6563 7.01389 11.1343Z" fill="#FF8B30"></path>\n              </svg>\n            </button>\n          </div>\n\n          <div class="price__container price__container--right">\n            <span class="price__total">').concat(e.priceFormatted,'</span>\n            <p class="price__parcels">até 6x sem juros</p>\n          </div>\n        </div>\n\n        ').concat("Compartilhado"===e.type?'\n          <p class="price__paragraph price__paragraph--text-orange price__paragraph--text-center price__paragraph--initial-wrap">\n            * Prazo de entrega: em até 45 dias da data da embalagem.\n          </p>\n        ':"","\n      </div> \n    ")}},{key:"createTransporterElement",value:function(e){var r=this,t=e.id,n=e.nome,a=e.logoURL,i=(e.features,e.descricao,e.deliveryTypes),o=e.deliveryTypeSelected,c=i.map(function(e){var t=e.id===o.id;return r.createTransporterPriceElement(e,t)}).join(""),s=i.filter(function(e){return"Compartilhado"===e.type})[0],u=i.filter(function(e){return"Exclusivo"===e.type})[0];return'\n      <section \n        id="'.concat(t,'" \n        data-transporter-id="').concat(t,'"\n        class="transporter transporter--without-padding"\n        data-transporter-delivery-type-selected="').concat(s?s.type:u.type,'"\n      >\n        <figure class="transporter__brand">\n          <img \n            class="transporter__logo" \n            src="').concat(a,'"\n          />\n        </figure>\n\n        <div class="transporter__details">\n          <div class="transporter__row">\n            <h3 class="transporter__name">').concat(n,'</h3>\n          </div>\n        </div>\n\n        <div class="transporter__prices">\n          ').concat(c,'\n        </div>\n      </section>\n\n      <div class="shipping-date" id="entenda-o-prazo-de-entrega-da-sua-mudanca">\n        <p class="shipping-date__paragraph shipping-date__paragraph--center shipping-date__paragraph--margin-bottom">\n          <b>Entenda o prazo de entrega da sua mudança</b>\n        </p>\n        \n        <p class="shipping-date__paragraph shipping-date__paragraph--margin-bottom">\n          <b>COMPARTILHADA: </b> Em até 45 dias da data da embalagem. Nossos consultores entrarão em contato para agendar a\n          melhor data para sua conveniência. Fique tranquilo, sua mudança não será entregue sem prévio aviso.\n        </p>\n        \n        <p class="shipping-date__paragraph shipping-date__paragraph--margin-bottom">\n          <b>EXCLUSIVA: </b> A entrega ocorrerá imediatamente após a embalagem dos seus itens. Por favor, considere os dias de\n          viagens necessários para que o caminhão da mudança chegue até o destino. Antes da embalagem nossos consultores\n          entrarão em contato para agendar a melhor data para sua conveniência. Fique tranquilo, sua mudança não será entregue\n          sem prévio aviso.\n        </p>\n      </div>\n    ')}},{key:"setDate",value:function(){var r=this,e=this.orderForm.customData;e&&e.customApps.filter(function(e){return"orderinfo"===e.id}).forEach(function(e){var t=e.fields.moving_date;r.dateSelected=t,r.updateCalendarComponent(t)})}},{key:"updateCalendarComponent",value:function(e){var t=document.querySelector(".card__number--big"),r=S()(new Date(e)).locale("pt-br"),n=r.format("dddd"),a=r.format("MMMM"),i=r.year(),o="".concat(n,", ").concat(a," / ").concat(i);t.textContent=r.date(),t.nextElementSibling.textContent=o}},{key:"getAddress",value:function(){var e=this.orderForm.customData;e&&e.customApps.filter(function(e){return"orderinfo"===e.id}).forEach(function(e){var g=Object.entries(e.fields).filter(function(e){var t=_(e,2),r=t[0];t[1];return r.includes("from_")||r.includes("to_")}).reduce(function(e,t){var r=_(t,2);return I({},e,w({},r[0],r[1]))},{});[document.querySelector(".js-address-from"),document.querySelector(".js-address-to")].forEach(function(e){var t=e.classList.contains("js-address-from")?"from":"to",r=e.querySelector(".card__content"),n=e.querySelector(".js-address-special-handly-condition"),a=e.querySelector(".js-address-home-type"),i=g["".concat(t,"_special_handly_condition")],o=g["".concat(t,"_address_complement")],c=g["".concat(t,"_address_county")],s=g["".concat(t,"_address_name")],u=g["".concat(t,"_address_number")],l=g["".concat(t,"_address_zipcode")],d=g["".concat(t,"_city")],p=g["".concat(t,"_state")],f=g["".concat(t,"_home_type")];a.textContent=f,n.textContent=i;var m=[s,u].filter(function(e){return void 0!==e&&""!==e}).join(", "),h=[o,c].filter(function(e){return void 0!==e&&""!==e}).join(" - "),v=[d,p].filter(function(e){return void 0!==e&&""!==e}).join(" - ");r.innerHTML='\n            <h3 class="card__subtitle">'.concat(l,'</h3>\n            <p class="card__paragraph">').concat(m,'</p>\n            <p class="card__paragraph">').concat(h,'</p>\n            <p class="card__paragraph">').concat(v,"</p>\n          ")})})}},{key:"getInsuranceItems",value:function(){var r=this,e=this.orderForm.customData;e&&e.customApps.filter(function(e){return"insurance"===e.id}).forEach(function(e){var t=e.fields.items;["skipped","none"].includes(t)||(r.insuranceItems=JSON.parse(t))})}},{key:"saveData",value:(i=C(regeneratorRuntime.mark(function e(){var t,r,n,a,i,o,c,s,u,l,d,p,f,m,h,v,g=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(0<g.length&&void 0!==g[0])||g[0],e.prev=1,e.next=4,window.vtexjs.checkout.removeAllItems();case 4:if(r=Object.values(this.products).filter(function(e){return 0!==e.quantity}),n=this.getAdditionalWeightSKU(r),a=r.map(function(e){return I({},e,{seller:1,id:e.skuId})}),i=this.getDisassemblyAndAssemblySKU(r),o=this.getLiftingSKUs(),c=this.getInsuranceSKU(),s=this.getInsuranceDataInCustomData(),u=s.total,!t){e.next=19;break}if(u)return e.next=15,this.cartService.checkoutCRUD([].concat(x(a),x(o),[n,i,c]));e.next=17;break;case 15:e.next=19;break;case 17:return e.next=19,this.cartService.checkoutCRUD([].concat(x(a),x(o),[n,i]));case 19:return e.t0=this,e.next=22,this.cartService.getCurrent();case 22:if(e.t1=e.sent,e.t0.updateOrderForm.call(e.t0,e.t1),l=this.getInsuranceSkuIndex(),u&&-1!==l)return e.t2=this,e.next=29,this.insuranceService.updateInsuranceSKUPrice(Object(y.a)(u).multiply(.01).intValue,l,this.orderForm.orderFormId);e.next=31;break;case 29:e.t3=e.sent,e.t2.updateOrderForm.call(e.t2,e.t3);case 31:if(d=this.calculateLiftingTotalPrice(),p=this.calculateTotalForSpecialPackaging(),f=this.calculateTotalForDisassemblyAndAssembly(),this.updateServiceItem("Içamento",d),this.updateServiceItem("Embalagem especial",p),this.updateServiceItem("Desmontagem e Montagem",f),location.search.includes("logged"))return e.t4=this,e.next=41,this.cartService.updateCheckoutTransporterSLA(this.logisticsInfo);e.next=43;break;case 41:e.t5=e.sent,e.t4.updateOrderForm.call(e.t4,e.t5);case 43:return m={current_step:"order-summary",moving_date:this.dateSelected,user_selected_storage_months:this.userSelectedStorageMonths,lifting_total_price:d,special_packaging_total_price:p},h="string"==typeof this.insuranceItems?this.insuranceItems:JSON.stringify(this.insuranceItems),v={items:h,total:this.totalInsurance.format()},e.next=48,Promise.all([this.cartService.setMultipleCustomDataFields("orderinfo",m),this.cartService.setMultipleCustomDataFields("insurance",v),this.cartService.setSingleCustomDataField("selecteditems","products_data",JSON.stringify(r)),this.cartService.setSingleCustomDataField("selectedcourier","courier_data",JSON.stringify(this.transporterSelected))]);case 48:e.next=53;break;case 50:e.prev=50,e.t6=e.catch(1),console.log("saveData",e.t6);case 53:case"end":return e.stop()}},e,this,[[1,50]])})),function(){return i.apply(this,arguments)})},{key:"setHandledUpdateButtonClick",value:function(){var t=this,r=document.querySelector(".js-button-update"),n=r.querySelector("span");r.addEventListener("click",function(e){1<=Object.values(t.products).filter(function(e){return e.active}).length?(t.hideUpdateErrorMessage(),t.handledUpdateButtonClick(r,n)):t.showUpdateErrorMessage()})}},{key:"showUpdateErrorMessage",value:function(){document.querySelector(".actions__warning").classList.add("actions__warning--show")}},{key:"hideUpdateErrorMessage",value:function(){document.querySelector(".actions__warning").classList.remove("actions__warning--show")}},{key:"handledUpdateButtonClick",value:(a=C(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.classList.add("js-loading"),e.next=3,this.saveData();case 3:return this.updateInsuranceValue(!0),e.next=6,this.updateTranspoterValue(!0);case 6:if(Object.values(this.products).map(function(e){return e.active}).includes(!1)){e.next=10;break}return e.next=10,this.cartService.setSingleCustomDataField("selectedcourier","courier_data",JSON.stringify(this.transporterSelected));case 10:r.innerText="VALORES ATUALIZADOS",this.updateTotalOrderValue(),t.classList.remove("js-loading"),setTimeout(function(){r.innerText="ATUALIZAR VALORES"},3e3);case 14:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"setAddressCep",value:function(){var r=this,e=this.orderForm.customData;e&&e.customApps.filter(function(e){return"orderinfo"===e.id}).forEach(function(e){var t=e.fields.to_address_zipcode;r.addressCep=t})}},{key:"setHandledButtonSaveClick",value:function(){var t=this;document.querySelector(".js-button-save").addEventListener("click",C(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return document.dispatchEvent(window.initSaveCustomDataEvent),e.next=3,t.saveData();case 3:document.dispatchEvent(window.endSaveCustomDataEvent);case 4:case"end":return e.stop()}},e)})))}},{key:"orderDeliveryTypesByLessPrice",value:function(){this.transporterSelected.deliveryTypes.sort(function(e,t){return e.price-t.price})}},{key:"getLiftingItems",value:function(){return this.orderForm.items.filter(function(e){return 10===parseInt(e.productId)})}},{key:"calculateLiftingTotalPrice",value:function(){var e,n=this,t=this.getLiftingItems();if(0===t.length)e=0;else{var r=Object.values(this.products).filter(function(e){return!e.active}).reduce(function(e,t){var r=e+t.liftingQuantity;return"içamento na origem e destino"===n.lifting?2*r:r},0),a=t.reduce(function(e,t){return e+t.quantity},-r),i=t[0].price;e=(a-1)*i/2,e+=0<a?i:-1*e,e=this.helper.formatPrice(e)}return Object(y.a)(e).format()}},{key:"getStorageItem",value:function(){return this.orderForm.items.filter(function(e){return 15===parseInt(e.productId)})[0]}},{key:"calculateStoragePrice",value:function(){var e=this.getStorageItem();if(!e)return"R$ 0,00";var t=this.helper.formatPrice(e.price*e.quantity);return this.totalStorageMonth=Object(y.a)(t).divide(parseInt(this.userSelectedStorageMonths)).format(),this.totalStorageMonth}},{key:"getItemsWithSpecialPackaging",value:function(){return this.orderForm.items.filter(function(e){return"com caixa"===e.skuName})}},{key:"calculateTotalForSpecialPackaging",value:function(){var n=this,e=this.getItemsWithSpecialPackaging(),a=Object.values(this.products),t=e.filter(function(e){var t=e.productId,r=e.id;return 12==t&&(t=a.filter(function(e){return e.skuId==r})[0].productId),n.products[t].active}).reduce(function(e,t){return e+t.price*t.quantity},0);return t=this.helper.formatPrice(t),Object(y.a)(t).format()}},{key:"calculateTotalForDisassemblyAndAssembly",value:function(){var e=this.orderForm.items.find(function(e){return 699===parseInt(e.id)});if(!e)return"R$ 0,00";var t=e.quantity,r=e.price;return this.helper.formatPrice(t*r)}},{key:"createServiceItem",value:function(e,t){return'\n      <div class="service" data-service="'.concat(e,'">\n        <div class="service__container">\n          <div class="service__group">\n            <h3 class="service__name">').concat(e,"</h3>\n          </div>\n        </div>\n\n        ").concat("Armazenagem"===e?'\n          <div class="custom-select">\n            <select class="select__native">\n              <option value="1">30 dias</option>\n              <option value="2">60 dias</option>\n              <option value="3">90 dias</option>\n              <option value="4">120 dias</option>\n              <option value="5">150 dias</option>\n              <option value="6">180 dias</option>\n            </select>\n            \n            <span class="select__custom-selected">30 dias</span>\n            \n            <div class="select__custom">\n              <ul class="select__list"></ul>\n            </div>\n\n            <i class="fas fa-caret-down select__icon"></i>\n          </div>\n        ':"",'\n\n        <span class="service__value">').concat(t,"</span>\n      </div>\n    ")}},{key:"updateServiceItem",value:function(e,t){var r=document.querySelector('.service[data-service="'.concat(e,'"]'));r&&(r.querySelector(".service__value").textContent=t)}},{key:"addServicesToDOM",value:function(){var e=this.calculateLiftingTotalPrice(),t=this.calculateStoragePrice(),r=this.calculateTotalForSpecialPackaging(),n=this.calculateTotalForDisassemblyAndAssembly(),a="R$ 0,00"!==t?this.createServiceItem("Armazenagem",t):"",i="R$ 0,00"!==e?this.createServiceItem("Içamento",e):"",o="R$ 0,00"!==r?this.createServiceItem("Embalagem especial",r):"",c="R$ 0,00"!==n?this.createServiceItem("Desmontagem e Montagem",n):"",s=document.querySelector(".service-items-table"),u=[a,i,o,c].join("");s.innerHTML+=u,""!==a&&(this.createCustomSelectForStorageService(),this.updateCustomSelectStorageService()),""===u&&s.remove()}},{key:"createCustomSelectForStorageService",value:function(){var r=this,e=document.querySelector(".custom-select .select__native"),t=document.querySelector(".custom-select .select__custom"),n=document.querySelector(".custom-select .select__list"),a=document.querySelector(".custom-select .select__custom-selected");this.customSelectStorageServiceInstance=new CustomSelect({selectElement:e,customSelectList:n,customSelectSelected:a,customSelectListItemClassName:"",customSelectListItemClassNameActive:"active",selectOpenCallback:function(){var e=n.offsetHeight;t.classList.add("select__custom--open"),t.style.maxHeight="".concat(e,"px")},selectCloseCallback:function(){t.classList.remove("select__custom--open"),t.style.maxHeight=0},selectChangeCallback:function(e){var t=e.value;r.totalStorage=Object(y.a)(r.totalStorageMonth).multiply(parseInt(t)),r.userSelectedStorageMonths=parseInt(t),r.updateServiceItem("Armazenagem",r.totalStorage.format())}})}},{key:"getStorageMonths",value:function(){var r=this,e=this.orderForm.customData;e&&e.customApps.filter(function(e){return"orderinfo"===e.id}).forEach(function(e){var t=e.fields.user_selected_storage_months;t&&(r.userSelectedStorageMonths=t)})}},{key:"updateCustomSelectStorageService",value:function(){this.customSelectStorageServiceInstance.changeOption(this.userSelectedStorageMonths)}},{key:"updateSelectedSLA",value:function(){var t=this.transporterSelected.deliveryTypeSelected.slaName;this.logisticsInfo=this.logisticsInfo.map(function(e){return I({},e,{selectedSla:t})})}},{key:"getLiftingSKUs",value:function(){this.getLiftingQuantity();var e="içamento na origem e destino"===this.lifting?this.liftingQuantity/2:this.liftingQuantity,t=[];return"içamento na origem e destino"!==this.lifting&&"içamento no origem"!==this.lifting||(e=Object.values(this.products).filter(function(e){return 0<e.quantity}).reduce(function(e,t){return e+t.liftingQuantityOrigin},0),t.push({id:19,skuId:19,seller:1,productId:10,quantity:e})),"içamento na origem e destino"!==this.lifting&&"içamento no destino"!==this.lifting||(e=Object.values(this.products).filter(function(e){return 0<e.quantity}).reduce(function(e,t){return e+t.liftingQuantityDestination},0),t.push({id:698,skuId:698,seller:1,productId:10,quantity:e})),t}},{key:"getLiftingQuantity",value:function(){this.liftingQuantity=Object.values(this.products).filter(function(e){return 0<e.quantity}).reduce(function(e,t){return e+t.liftingQuantity},0),this.liftingQuantity*="içamento na origem e destino"===this.lifting?2:1}},{key:"removePageLoading",value:function(){document.body.classList.remove("page-app--loading")}},{key:"getAdditionalWeightSKU",value:function(e){return{id:696,seller:1,quantity:e.filter(function(e){return e.additionalWeight}).reduce(function(e,t){return e+t.quantity},0)}}},{key:"getDisassemblyAndAssemblySKU",value:function(e){return{id:699,seller:1,quantity:e.filter(function(e){var t=e.requiresAssembly,r=e.requiresDisassembly;return t&&r}).reduce(function(e,t){return e+t.quantity},0)}}},{key:"getInsuranceSKU",value:function(){return{id:35,seller:1,quantity:1}}},{key:"getInsuranceDataInCustomData",value:function(){var e=this.orderForm.customData;if(!e)return{};var t=e.customApps.find(function(e){return"insurance"===e.id});return t?t.fields:{}}},{key:"getInsuranceSkuIndex",value:function(){var e=this.orderForm.items;return e.findIndex(function(e){return 35===parseInt(e.id)})}}])&&P(t.prototype,r),n&&P(t,n),e}();document.addEventListener("DOMContentLoaded",function(){new o})},x9ji:function(e,t,r){"use strict";r("07d7"),r("5s+n"),r("ls82");var i=r("m/Gl"),o=r("jmbs");function s(e,t,r,n,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._logger=new o.c("httpClient")}var t,r,n,c,a;return t=e,(r=[{key:"get",value:function(e){if(!o.a.isUndefined(e))return this._execute(e,"GET")}},{key:"delete",value:function(e){if(!o.a.isUndefined(e))return this._execute(e,"DELETE")}},{key:"post",value:function(e,t){var r=1<arguments.length&&void 0!==t?t:{};if(!o.a.isUndefined(e))return this._execute(e,"POST",r)}},{key:"put",value:function(e,t){if(!o.a.isUndefined(e)&&!o.a.isUndefined(t))return this._execute(e,"PUT",t)}},{key:"patch",value:function(e,t){if(!o.a.isUndefined(e)&&!o.a.isUndefined(t))return this._execute(e,"PATCH",t)}},{key:"_execute",value:function(e,t,r){var n=this,a={method:t,headers:{accept:"application/vnd.vtex.masterdata.v10+json","content-type":"application/json; charset=utf-8"}};return r&&(a.body=JSON.stringify(r)),Object(i.a)(e,a).then(this.validateResponse).then(this.parseResponseToJson).then(function(e){return e}).catch(function(e){return n._logger.log("Request succeeded with JSON response",e),e})}},{key:"parseResponseToJson",value:(c=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,t.json();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}),a=function(){var e=this,o=arguments;return new Promise(function(t,r){var n=c.apply(e,o);function a(e){s(n,t,r,a,i,"next",e)}function i(e){s(n,t,r,a,i,"throw",e)}a(void 0)})},function(e){return a.apply(this,arguments)})},{key:"validateResponse",value:function(e){return e.ok?Promise.resolve(e):Promise.reject(new Error(e.statusText))}}])&&u(t.prototype,r),n&&u(t,n),e}();t.a=n}},[[19,0,2]]]);
//# sourceMappingURL=b8one.mobile.order-summary.js.map