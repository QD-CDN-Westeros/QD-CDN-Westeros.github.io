{"version":3,"sources":["webpack:///./src/js/general/repositories/b8one.masterdataRepository.js","webpack:///./src/js/general/services/b8one.transporterService.js","webpack:///./src/js/store/desktop/transporter/index.js","webpack:///./src/js/general/components/b8one.accordionComponent.js","webpack:///./src/js/general/common/b8one.ensure.js","webpack:///./src/js/general/components/b8one.customSelect.js","webpack:///./src/js/general/common/b8one.helper.js","webpack:///./src/js/general/common/b8one.logger.js","webpack:///./src/js/general/services/b8one.cartService.js","webpack:///./src/js/general/services/b8one.httpClient.js"],"names":["MasterdataRepository","entityCode","this","entityCode_","httpClient_","HttpClient","_VTEX_MASTERDATA_ENDPOINT","entityPayload","apiEndpoint","put","then","res","error","patch","params","get","documentId","fields","delete","field","fileName","getAttachmentUrl","TransporterService","httpClient","endpoint","console","hubID","query","TransporterPage","modalCompare","addressCep","transporterSelected","transporters","logisticsInfo","filters","Set","compareTransportersList","masterdataRepository","cartService","CartService","helper","Helper","orderBy","totalizers","orderForm","transporterService","window","init","initFilterAccordions","createCustomSelect","getCurrent","setAddressCep","setHubID","fetchTransporters","Promise","all","getDeliveryTypes","setLogoUrlInTransportes","orderTransportersByLessPrice","addTransportersToDOM","setHandledFiltersChange","setHandledsToTransporterElement","setHandledScheduleChangeButtonsClick","setHandledButtonSaveClick","benefitTabs","document","querySelectorAll","forEach","accordion","accordionHeader","querySelector","AccordionComponent","openAccordionCallback","classList","add","closeAccordionCallback","remove","isOpen","filterItem","addEventListener","event","handledFilterChange","transporter","priceElement","transporterDeliveryType","dataset","setAttribute","scheduleChangeButton","getParents","handledScheduleChangeButtonClick","handledButtonSaveClick","target","filterName","filter","checked","transporterElement","id","filtersArray","map","includes","compareButton","transporterID","toggle","contains","updateTransporterFooter","columns","createCompareTableColumn","join","compareTable","innerHTML","children","outerHTML","createTransportersCustomSelects","show","setTransporterSelected","saveData","location","assign","priceActive","dispatchEvent","initSaveCustomDataEvent","endSaveCustomDataEvent","transporterSelect","selectElement","selectCustom","customSelectList","customSelectSelected","CustomSelect","customSelectListItemClassName","customSelectListItemClassNameActive","selectOpenCallback","selectListHeight","offsetHeight","style","maxHeight","selectCloseCallback","selectChangeCallback","value","filterSelect","orderTransportersBy","compareTransporterList","sort","a","b","deliveryTypes","price","index","prevTransporterElement","nextTransporterElement","insertBefore","nome","logoURL","armazenagem","certificacao","tempoMercado","equipeFeminina","deliveryShared","type","deliveryExclusive","priceFormatted","item","StrongPrice","substring","length","replace","decimals","transporterData","featuresX","features","featuresText","descricao","prices","createTransporterPriceElement","slaName","split","feature","tab","row","parentNode","getTransportersByHUB","Error","bugsnagClient","notify","filename","compareFooter","compareFooterParagraph","compareFooterButton","size","transporterId","transporterDeliveryTypeSelected","findIndex","deliveryTypeSelected","selectedSla","updateSelectedSLA","updateCheckoutTransporterSLA","setSingleCustomDataField","JSON","stringify","log","logo","fetchTransporterLogoURL","transporterVariations","slas","name","key","toLowerCase","customData","customApps","customApp","to_address_zipcode","orderInfoApp","find","simulateOrderForm","shippingData","setTotalizers","getLogisticsInfo","insuranceSKU","items","parseInt","getTransporterVariations","totalItemsWithDiscounts","total","reduce","totalizer","courier","courierId","deliveryIds","courierIds","transporterIndex","courierType","courierTypeLowerCase","manualPrice","formatPrice","currentTransporter","removeTransportersWithoutDeliveryType","orderDeliveryTypesByLessPrice","hasOwnProperty","createTransporterElement","openCallback","Function","closeCallback","Element","setHandleClick","Ensure","undefined","input","isUndefined","checkValidity","object","props","getMissingProps","missingProps","prop","push","setCurrentSelectedItem","createSelectList","setListenerForCurrentSelected","options","selectedIndex","textContent","newValue","prevListItemActive","close","changeOption","option","listItem","createElement","trim","handleSelectChange","append","open","body","className","eventChange","Event","bubbles","_logger","Logger","language","navigator","userLanguage","currency","currencyLocale","minimumFractionDigits","elem","selector","prototype","matches","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","s","ownerDocument","i","parents","form","serialized","elements","disabled","n","selected","encodeURIComponent","data","Math","random","toString","substr","cname","cvalue","exdays","date","Date","setTime","getTime","expires","toUTCString","cookie","decodeURIComponent","element","heightViewport","innerHeight","documentElement","clientHeight","widthViewport","innerWidth","clientWidth","getBoundingClientRect","top","right","bottom","left","str","pattern","mapAccents","e","o","u","c","RegExp","toFixed","max","Intl","NumberFormat","format","logName","message","errorObj","info","warn","_VTEX_API_ENDPOINT","_httpClient","skuId","productQuantity","sellerId","current","indexFound","x","quantity","endpointUrl","orderFormId","payload","orderItems","seller","skus","vtexjs","checkout","getOrderForm","skusCustomProducts","getCustomProducts","sku","isCustom","skuToIgnore","indexToRemove","indexList","removeMoreProducts","response","productsToAdd","productId","productsToUpdate","sameSku","diffQuantity","productsToReplaceSKU","itemsList","oldSKU","newSKU","productsToRemove","updateItems","replaceSKU","removeItems","addToCart","customProducts","customProductItem","currentCustomProduct","customProductQuantity","newQuantity","Object","values","itemIndex","expectedOrderFormSections","noSplitItem","itemsIndex","updateProducts","postalCode","country","calculateShipping","simulateShipping","orderFormSimulated","sendAttachment","address","availableAddresses","selectedAddresses","appName","appFieldName","appFieldValue","_execute","httpVerb","header","method","headers","accept","fetch","validateResponse","parseResponseToJson","catch","ok","json","resolve","reject","statusText"],"mappings":"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","file":"js/b8one.desktop.transporter.js","sourcesContent":["import HttpClient from '../services/b8one.httpClient';\n\n/**\n * Masterdata Base Repository\n */\nclass MasterdataRepository {\n  /**\n   * Masterdata Repository constructor\n   * @param {*} entityCode\n   */\n  constructor(entityCode) {\n    const STORE_ID = 'TR';\n\n    this.entityCode_ = entityCode;\n    this.httpClient_ = new HttpClient();\n\n    // this._VTEX_MASTERDATA_ENDPOINT = `//api.vtexcrm.com.br/${STORE_ID}/dataentities/${entityCode}`;\n    this._VTEX_MASTERDATA_ENDPOINT = `/api/dataentities/${entityCode}`;\n  }\n\n  /**\n   * add\n   * @param {*} entityPayload\n   * @return {*}\n   */\n  add(entityPayload) {\n    const apiEndpoint = `${this._VTEX_MASTERDATA_ENDPOINT}/documents`;\n\n    return this.httpClient_.put(apiEndpoint, entityPayload).then(\n      res => {\n        return res;\n      },\n      error => {\n        return error;\n      }\n    );\n  }\n\n  /**\n   * update..\n   * @param {*} entityPayload\n   * @return {*}\n   */\n  update(entityPayload) {\n    const apiEndpoint = `${this._VTEX_MASTERDATA_ENDPOINT}/documents`;\n\n    return this.httpClient_.patch(apiEndpoint, entityPayload).then(\n      res => {\n        return res;\n      },\n      error => error\n    );\n  }\n\n  /**\n   * search\n   * @param {*} params\n   * @return {*}\n   */\n  search(params) {\n    const apiEndpoint = `${this._VTEX_MASTERDATA_ENDPOINT}/search?${params}`;\n\n    return this.httpClient_.get(apiEndpoint).then(res => {\n      return res;\n    });\n  }\n\n  /**\n   * Get Document by document ID\n   * @param {GUID} documentId Document Id\n   */\n  async getByDocumentId(documentId) {\n    const apiEndpoint = `${this._VTEX_MASTERDATA_ENDPOINT}/documents/${documentId}`;\n\n    const res = await this.httpClient_.get(apiEndpoint);\n    return res;\n  }\n\n  async getByDocumentIdWithFields(documentId, fields) {\n    const apiEndpoint = `${this._VTEX_MASTERDATA_ENDPOINT}/documents/${documentId}?_fields=${fields}`;\n\n    const res = await this.httpClient_.get(apiEndpoint);\n    return res;\n  }\n  /**\n   * delete\n   * @param {*} documentId\n   * @return {*}\n   */\n  delete(documentId) {\n    const apiEndpoint = `${this._VTEX_MASTERDATA_ENDPOINT}/documents/${documentId}`;\n\n    return this.httpClient_.delete(apiEndpoint).then(res => {\n      return res;\n    });\n  }\n\n  /**\n   *\n   * @param {*} documentId\n   * @param {*} field\n   * @param {*} fileName\n   */\n  getAttachmentUrl(documentId = '', field = '', fileName = '') {\n    return `${this._VTEX_MASTERDATA_ENDPOINT}/documents/${documentId}/${field}/attachments/${fileName}`;\n  }\n\n  /**\n   * Get attachments\n   * @param {*} documentId\n   * @param {*} field\n   * @param {*} fileName\n   */\n  async getAttachment(documentId = '', field = '', fileName = '') {\n    // /api/dataentities/{{data_entity_name}}/documents/{{id}}/{{field}}/attachments/{{file_name}}\n    const apiEndpoint = this.getAttachmentUrl(documentId, field, fileName);\n\n    const res = await this.httpClient_.get(apiEndpoint);\n    return res;\n  }\n}\n\nexport default MasterdataRepository;\n","import HttpClient from './b8one.httpClient';\n\nexport default class TransporterService {\n  constructor() {\n    this.httpClient = new HttpClient();\n  }\n\n  /**\n   * This function return all active hubs from HUB Entity.\n   * @param  {Array|String} fields=['id', 'initialZipcode', 'finalZipcode']\n   */\n  async getALLHUBS(fields = ['id', 'initialZipcode', 'finalZipcode']) {\n    try {\n      const endpoint = `/api/dataentities/HB/search?_fields=${fields}&_where=active=true`;\n\n      return this.httpClient.get(endpoint);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  /**\n   * This functions get and filter the transporters by hubID property.\n   * @param  {String} hubID The documentID of a document from HUB Entity.\n   * @param  {Array|String} fields Document fields what you need\n   */\n  async getTransportersByHUB(hubID, fields) {\n    try {\n      const query = `(status=true AND idHUB=${hubID})`;\n\n      const endpoint = `/api/dataentities/TR/search?_fields=${fields}&_where=${query}&v=123`;\n\n      return this.httpClient.get(endpoint);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n}\n","// Commons\nimport { Helper } from 'Commons';\n\n// Components\nimport CustomSelect from 'Components/b8one.customSelect.js';\nimport AccordionComponent from 'Components/b8one.accordionComponent.js';\n\n// Repositories\nimport MasterdataRepository from 'Repositories/b8one.masterdataRepository.js';\n\n// Services\nimport CartService from 'Services/b8one.cartService.js';\nimport TransporterService from 'Services/b8one.transporterService.js';\nimport { root } from '../../../../../../../../../Library/Caches/typescript/4.0/node_modules/postcss/lib/postcss';\n\n/*\n  Class TransporterPage\n*/\nclass TransporterPage {\n  constructor() {\n    this.modalCompare = null;\n    this.addressCep = null;\n    this.transporterSelected = null;\n    this.transporters = [];\n    this.logisticsInfo = [];\n    this.filters = new Set();\n    this.compareTransportersList = new Set();\n    this.masterdataRepository = new MasterdataRepository('TR');\n    this.cartService = new CartService();\n    this.helper = new Helper();\n    this.orderBy = 'less-price';\n    this.totalizers = [];\n    this.orderForm = {};\n    this.hubID = null;\n    this.transporterService = new TransporterService();\n\n    window.TransporterPage = this;\n\n    this.init();\n  }\n\n  // Init Functions\n  async init() {\n    this.initFilterAccordions();\n    this.createCustomSelect();\n\n    this.orderForm = await this.cartService.getCurrent();\n\n    await this.setAddressCep();\n\n    this.setHubID();\n\n    this.transporters = await this.fetchTransporters();\n\n    await Promise.all([\n      this.getDeliveryTypes(),\n      this.setLogoUrlInTransportes(),\n    ]);\n\n    this.orderTransportersByLessPrice();\n\n    this.addTransportersToDOM();\n\n    this.setHandledFiltersChange();\n    this.setHandledsToTransporterElement();\n    this.setHandledScheduleChangeButtonsClick();\n    this.setHandledButtonSaveClick();\n\n    await this.benefitTabs();\n  }\n\n  initFilterAccordions() {\n    const accordions = [...document.querySelectorAll('.js-accordion-filter')];\n\n    accordions.forEach(accordion => {\n      const accordionHeader = accordion.querySelector('.filter__header');\n\n      const accordionInstance = new AccordionComponent({\n        accordion,\n        accordionHeader,\n        openAccordionCallback: () => {\n          accordion.classList.add('filter--show');\n        },\n        closeAccordionCallback: ({ accordion }) => {\n          accordion.classList.remove('filter--show');\n        },\n      });\n\n      accordionInstance.isOpen = true;\n    });\n  }\n\n  // Set Handled Functions\n  setHandledFiltersChange() {\n    const filterItems = [...document.querySelectorAll('.filter__item')];\n\n    filterItems.forEach(filterItem =>\n      filterItem.addEventListener('change', event =>\n        this.handledFilterChange(event, filterItem)\n      )\n    );\n  }\n\n  setHandledsToTransporterElement() {\n    const transporters = [\n      ...document.querySelectorAll('.compare-transporter__list .transporter'),\n    ];\n\n    transporters.forEach(transporter => {\n      const priceElements = [...transporter.querySelectorAll('.price')];\n\n      priceElements.forEach(priceElement => {\n        priceElement.addEventListener('change', event => {\n          const { transporterDeliveryType } = priceElement.dataset;\n\n          transporter.setAttribute(\n            'data-transporter-delivery-type-selected',\n            transporterDeliveryType\n          );\n        });\n      });\n    });\n  }\n\n  setHandledScheduleChangeButtonsClick() {\n    const scheduleChangeButtons = [\n      ...document.querySelectorAll('.js-button-schedule-change'),\n    ];\n\n    scheduleChangeButtons.forEach(scheduleChangeButton => {\n      scheduleChangeButton.addEventListener('click', event => {\n        const transporterElement = Helper.getParents(\n          scheduleChangeButton,\n          '.transporter'\n        )[0];\n\n        //voltar\n        this.handledScheduleChangeButtonClick(scheduleChangeButton);\n      });\n    });\n  }\n\n  setHandledButtonSaveClick() {\n    const buttonSave = document.querySelector('.js-button-save');\n\n    buttonSave.addEventListener('click', () => this.handledButtonSaveClick());\n  }\n\n  // Handled Functions\n  handledFilterChange({ target }, filterItem) {\n    const { filter: filterName } = filterItem.dataset;\n\n    if (target.checked) {\n      this.filters.add(filterName);\n    } else {\n      this.filters.delete(filterName);\n    }\n\n    this.transporters.forEach(transporter => {\n      const transporterElement = document.querySelector(\n        `[id=\"${transporter.id}\"]`\n      );\n\n      const filtersArray = [...this.filters].map(\n        filter => !!transporter[filter]\n      );\n\n      if (transporterElement) {\n        filtersArray.includes(false)\n          ? transporterElement.classList.add('hide')\n          : transporterElement.classList.remove('hide');\n      }\n    });\n  }\n\n  handledTransporterCompareButtonClick(compareButton, transporterID) {\n    compareButton.classList.toggle('transporter__compare-button--active');\n\n    const toCompare = compareButton.classList.contains(\n      'transporter__compare-button--active'\n    );\n\n    if (toCompare) {\n      this.compareTransportersList.add(transporterID);\n    } else {\n      this.compareTransportersList.delete(transporterID);\n    }\n\n    this.updateTransporterFooter();\n  }\n\n  handledCompareButtonFooterClick() {\n    const compareButton = document.querySelector(\n      '.compare-transporter__footer .button'\n    );\n\n    compareButton.addEventListener('click', event => {\n      const columns = [...this.compareTransportersList]\n        .map(transporterID => {\n          return this.createCompareTableColumn(transporterID);\n        })\n        .join('');\n\n      const compareTable = document.querySelector(\n        '.modal-compare .compare__table'\n      );\n\n      compareTable.innerHTML = compareTable.children[0].outerHTML;\n\n      compareTable.innerHTML += columns;\n\n      this.setHandledScheduleChangeButtonsClick();\n      this.createTransportersCustomSelects();\n\n      this.modalCompare.show();\n    });\n  }\n\n  async handledScheduleChangeButtonClick(scheduleChangeButton) {\n    const transporterElement = Helper.getParents(\n      scheduleChangeButton,\n      '.transporter'\n    )[0];\n    this.setTransporterSelected(transporterElement);\n\n    await this.saveData();\n\n    if (this.transporterSelected) {\n      window.location.assign('/endereco');\n    }\n  }\n\n  async handledButtonSaveClick() {\n    const transporterElement = Helper.getParents(\n      priceActive,\n      '.transporter'\n    )[0];\n    this.setTransporterSelected(transporterElement);\n\n    document.dispatchEvent(window.initSaveCustomDataEvent);\n\n    await this.saveData();\n\n    document.dispatchEvent(window.endSaveCustomDataEvent);\n  }\n\n  // Create Functions\n  createTransportersCustomSelects() {\n    const transportersSelects = [\n      ...document.querySelectorAll('.transporter__select-custom'),\n    ];\n\n    transportersSelects.forEach(transporterSelect => {\n      const selectElement = transporterSelect.querySelector('.select__native');\n      const selectCustom = transporterSelect.querySelector('.select__custom');\n      const customSelectList = transporterSelect.querySelector('.select__list');\n      const customSelectSelected = transporterSelect.querySelector(\n        '.select__custom-selected'\n      );\n\n      const transporterElement = Helper.getParents(\n        transporterSelect,\n        '.transporter'\n      )[0];\n\n      new CustomSelect({\n        selectElement,\n        customSelectList,\n        customSelectSelected,\n        customSelectListItemClassName: '',\n        customSelectListItemClassNameActive: 'active',\n        selectOpenCallback: event => {\n          const selectListHeight = customSelectList.offsetHeight;\n\n          selectCustom.classList.add('select__custom--open');\n          selectCustom.style.maxHeight = `${selectListHeight}px`;\n        },\n        selectCloseCallback: () => {\n          selectCustom.classList.remove('select__custom--open');\n          selectCustom.style.maxHeight = 0;\n        },\n        selectChangeCallback: ({ value }) => {\n          transporterElement.setAttribute(\n            'data-transporter-delivery-type-selected',\n            value\n          );\n        },\n      });\n    });\n  }\n\n  createCustomSelect() {\n    const filterSelect = document.querySelector(\n      '.header__actions .filter__select'\n    );\n\n    const customSelect = new CustomSelect({\n      selectElement: '.header__actions .filter__select .select__native',\n      customSelectList: '.header__actions .select__list',\n      customSelectSelected: '.header__actions .select__custom-selected',\n      customSelectListItemClassName: '',\n      customSelectListItemClassNameActive: 'active',\n      selectOpenCallback: event => {\n        filterSelect.classList.add('filter__select--open');\n      },\n      selectCloseCallback: () => {\n        filterSelect.classList.remove('filter__select--open');\n      },\n      selectChangeCallback: ({ value }) => {\n        this.orderTransportersBy(value);\n      },\n    });\n  }\n\n  orderTransportersBy(orderBy) {\n    if (this.orderBy === orderBy) return;\n\n    if (orderBy === 'less-price') {\n      this.transporters.sort((a, b) => {\n        return a.deliveryTypes[0].price - b.deliveryTypes[0].price;\n      });\n    } else if (orderBy === 'higher-price') {\n      this.transporters.sort((a, b) => {\n        return b.deliveryTypes[0].price - a.deliveryTypes[0].price;\n      });\n    }\n\n    this.orderBy = orderBy;\n\n    const compareTransporterList = document.querySelector(\n      '.compare-transporter__list'\n    );\n\n    this.transporters.forEach((transporter, index) => {\n      const prevTransporterElement = compareTransporterList.children[index];\n\n      const nextTransporterElement = compareTransporterList.querySelector(\n        `[id=\"${transporter.id}\"]`\n      );\n\n      if (prevTransporterElement.id === nextTransporterElement.id) return;\n\n      compareTransporterList.insertBefore(\n        nextTransporterElement,\n        prevTransporterElement\n      );\n    });\n  }\n\n  createCompareTableColumn(transporterID) {\n    const transporter = this.transporters.filter(\n      ({ id }) => id === transporterID\n    )[0];\n\n    const {\n      id,\n      nome,\n      logoURL,\n      armazenagem,\n      tempoMercado,\n      certificacao,\n      deliveryTypes,\n      equipeFeminina,\n    } = transporter;\n\n    const deliveryShared = deliveryTypes.filter(\n      ({ type }) => type === 'Compartilhado'\n    )[0];\n\n    const deliveryExclusive = deliveryTypes.filter(\n      ({ type }) => type === 'Exclusivo'\n    )[0];\n\n    return `\n      <div class=\"table__column\">\n        <div\n          class=\"transporter\"\n          data-transporter-id=\"${id}\"\n          data-transporter-name=\"${nome}\"\n          data-transporter-delivery-type-selected=\"Exclusivo\"\n        >\n          <header class=\"transporter__header\">\n            <figure class=\"transporter__brand\">\n              <img\n                class=\"transporter__logo\"\n                src=\"${logoURL}\"\n              />\n            </figure>\n\n            <h3 class=\"transporter__name\">${nome}</h3>\n          </header>\n\n          <ul class=\"transporter__fields-list\">\n            <li class=\"list__item\">\n              ${deliveryShared\n        ? deliveryShared.priceFormatted\n        : 'Não disponivel'\n      }\n            </li>\n\n            <li class=\"list__item\">\n              ${deliveryExclusive\n        ? deliveryExclusive.priceFormatted\n        : 'Não disponivel'\n      }\n            </li>\n\n            <li class=\"list__item\">\n              ${certificacao ? 'Sim' : 'Não'}\n            </li>\n\n            <li class=\"list__item\">\n              ${equipeFeminina ? 'Sim' : 'Não'}\n            </li>\n\n            <li class=\"list__item\">\n              ${armazenagem ? 'Sim' : 'Não'}\n            </li>\n\n            <li class=\"list__item\">\n              <div class=\"transporter__select-custom\">\n                <select class=\"select__native\">\n                  ${deliveryTypes.map(({ type }) => {\n        return `<option value=\"${type}\">${type}</option>`;\n      })}\n                </select>\n\n                <span class=\"select__custom-selected\"></span>\n\n                <div class=\"select__custom\">\n                  <ul class=\"select__list\">\n                  </ul>\n                </div>\n\n                <i class=\"fas fa-caret-down select__icon\"></i>\n              </div>\n            </li>\n          </ul>\n\n          <button class=\"button button--primary js-button-schedule-change\">Agendar</button>\n        </div>\n      </div>\n    `;\n  }\n\n  createTransporterPriceElement(item) {\n    let priceFormatted = item.priceFormatted;\n    let StrongPrice = priceFormatted\n      .substring(0, priceFormatted.length - 3)\n      .replace('R$ ', '');\n    let decimals = priceFormatted.replace(`R$ ${StrongPrice}`, '');\n    return `\n      <div class=\"price\" data-transporter-delivery-type=\"${item.type}\">\n        <div class=\"price__row\">\n          <div class=\"price__container price__container--flex\">\n            <label for=\"${item.id}\">\n              <div class=\"checkbox\">\n                <input\n                  type=\"checkbox\"\n                  id=\"${item.id}\"\n                />\n              </div>\n            </label>\n          </div>\n\n          <div class=\"price__container price__container--right\">\n            <span class=\"price__total\">R$ <span>${StrongPrice}</span>${decimals}</span>\n          </div>\n        </div>\n\n        ${item.type === 'Compartilhado'\n        ? `\n          <p class=\"price__paragraph price__paragraph--text-orange\">\n            * Prazo de entrega: em até 45 dias da data da embalagem.\n          </p>\n        `\n        : ''\n      }\n      </div>\n    `;\n  }\n\n  createTransporterElement(transporterData) {\n    const {\n      id,\n      nome,\n      logoURL,\n      features,\n      featuresX,\n      featuresText,\n      descricao,\n      deliveryTypes,\n    } = transporterData;\n    if (!deliveryTypes) {\n      return '';\n    }\n\n    const showSeeMoreButton = descricao.length > 130;\n\n    const prices = deliveryTypes\n      .map(item => {\n        return this.createTransporterPriceElement(item);\n      })\n      .join('');\n\n    return `\n      <li\n        class=\"transporter\"\n        id=\"${id}\"\n        data-transporter-id=\"${id}\"\n        data-transporter-name=\"${transporterData.deliveryTypes[0].slaName}\"\n        data-transporter-delivery-type-selected=\"Exclusivo\"\n      >\n        <div class=\"transporter__details\" transporter-name=\"${nome}\">\n          <div class=\"transporter__row\">\n            <h3 class=\"transporter__name\">${nome}</h3>\n          </div>\n\n          <div class=\"transporter__description\">\n            <p class=\"description__paragraph\">\n              ${descricao}\n            </p>\n            <p class=\"description__price\">\n              ${prices}\n            </p>\n\n            ${false\n        ? '<button class=\"description__see-more\">Ver tudo</button>'\n        : ''\n      }\n          </div>\n\n          <div class=\"transporter__row\">\n            <strong>Serviços inclusos</strong>\n            <strong class=\"bad\">Serviços não inclusos</strong>\n            <ul class=\"transporter__benefits\">\n              ${featuresText\n        .split(';')\n        .map(\n          feature => `\n                    <li class=\"benefit\">\n                      <i class=\"far fa-check benefit__icon\"></i>\n\n                      <p class=\"benefit__text\">\n                        ${feature}\n                      </p>\n                    </li>\n                  `\n        )\n        .join('')}\n            </ul> \n            <ul class=\"transporter__benefits bad\">\n              ${featuresX\n        .split(';')\n        .map(\n          feature => `\n                    <li class=\"benefit\">\n                      <i class=\"far fa-times benefit__icon bad\"></i>\n      \n                      <p class=\"benefit__text\">\n                        ${feature}\n                      </p>\n                    </li>\n                  `\n        )\n        .join('')}\n            </ul>\n          </div>\n        </div>\n\n        <div class=\"transporter__prices\">\n          <hr/>\n          <button class=\"button button--primary js-button-schedule-change\">\n            AGENDAR\n          </button>\n        </div>\n      </li>  \n    `;\n  }\n\n  benefitTabs() {\n\n    const tabs = [\n      document.querySelectorAll('.transporter__row strong')\n    ];\n\n    tabs[0].forEach(tab => {\n      tab.addEventListener('click', event => {\n        let row = tab.parentNode;\n        if (event.target.classList.contains('bad')) {\n          row.classList.add('bad');\n        }\n        else {\n          row.classList.remove('bad');\n        }\n      });\n    });\n\n  }\n\n  // Fetch Functions\n  async fetchTransporters() {\n    const fields =\n      'armazenagem,certificacao,courierIds,descricao,equipeFeminina,features,featuresX,featuresText,frota,logo,nome,status,tempoMercado,id,tipoEmbalabem';\n\n    try {\n      if (this.hubID) {\n        return await this.transporterService.getTransportersByHUB(\n          this.hubID,\n          fields\n        );\n      }\n\n      throw new Error('The hubID is undefined');\n    } catch (error) {\n      window.bugsnagClient.notify(new Error(error));\n    }\n  }\n\n  async fetchTransporterLogoURL(id, filename) {\n    return await this.masterdataRepository.getAttachmentUrl(\n      id,\n      'logo',\n      filename\n    );\n  }\n\n  // Other Functions\n  updateTransporterFooter() {\n    const compareFooter = document.querySelector(\n      '.compare-transporter__footer'\n    );\n\n    const compareFooterParagraph = compareFooter.querySelector(\n      '.footer__paragraph'\n    );\n\n    const compareFooterButton = compareFooter.querySelector('.button');\n\n    if (this.compareTransportersList.size > 0) {\n      compareFooter.classList.add('compare-transporter__footer--show');\n    } else {\n      compareFooter.classList.remove('compare-transporter__footer--show');\n    }\n\n    if (this.compareTransportersList.size < 2) {\n      compareFooterParagraph.innerHTML = `\n        Selecione <span class=\"footer__paragraph--orange\">2 ou mais empresas de mudança </span>para comparar\n      `;\n\n      compareFooterButton.classList.add('button--disabled');\n    } else {\n      compareFooterParagraph.innerHTML = `\n        Você selecionou <span class=\"footer__paragraph--orange\">${this.compareTransportersList.size} empresas de mudança</span>\n      `;\n\n      compareFooterButton.classList.remove('button--disabled');\n    }\n  }\n\n  setTransporterSelected(transporterElement) {\n    const {\n      transporterId,\n      transporterDeliveryTypeSelected,\n    } = transporterElement.dataset;\n\n    const test = transporterElement.dataset;\n\n    const index = this.transporters.findIndex(({ id }) => id === transporterId);\n\n    this.transporterSelected = this.transporters[index];\n\n    this.transporterSelected.deliveryTypeSelected = this.transporters[\n      index\n    ].deliveryTypes[0];\n  }\n\n  updateSelectedSLA() {\n    const { slaName } = 'Exclusivo';\n\n    this.logisticsInfo = this.logisticsInfo.map(item => ({\n      ...item,\n      selectedSla: slaName,\n    }));\n  }\n\n  async saveData() {\n    try {\n      this.updateSelectedSLA();\n\n      await Promise.all([\n        this.cartService.updateCheckoutTransporterSLA(this.logisticsInfo),\n        this.cartService.setSingleCustomDataField(\n          'selectedcourier',\n          'courier_data',\n          JSON.stringify(this.transporterSelected)\n        ),\n        this.cartService.setSingleCustomDataField(\n          'orderinfo',\n          'current_step',\n          'transporter'\n        ),\n      ]);\n    } catch (error) {\n      console.log('saveData', error);\n    }\n  }\n\n  async setLogoUrlInTransportes() {\n    this.transporters = await Promise.all(\n      this.transporters.map(async transporter => {\n        const { id, logo } = transporter;\n\n        const logoURL = await this.fetchTransporterLogoURL(id, logo);\n\n        transporter.logoURL = logoURL;\n\n        return transporter;\n      })\n    );\n  }\n\n  getTransporterVariations(logisticsInfo) {\n    const transporterVariations = {};\n\n    logisticsInfo.forEach(({ slas }) => {\n      slas.forEach(({ id, price, name }) => {\n        const key = id.toLowerCase().replace(/\\s/g, '');\n\n        if (transporterVariations[key]) {\n          transporterVariations[key].price += price;\n        } else {\n          transporterVariations[key] = {\n            price,\n            name,\n          };\n        }\n      });\n    });\n\n    return transporterVariations;\n  }\n\n  async setAddressCep() {\n    const { customData } = await this.cartService.getCurrent();\n\n    if (!customData) return;\n\n    customData.customApps\n      .filter(customApp => customApp.id === 'orderinfo')\n      .forEach(customApp => {\n        const { to_address_zipcode } = customApp.fields;\n\n        this.addressCep = to_address_zipcode;\n      });\n  }\n\n  setHubID() {\n    const orderInfoApp = this.orderForm.customData?.customApps.find(\n      customApp => customApp.id === 'orderinfo'\n    );\n\n    if (!orderInfoApp) return;\n\n    const { hubID } = orderInfoApp.fields;\n\n    this.hubID = hubID;\n  }\n\n  setTotalizers(totalizers) {\n    this.totalizers = totalizers;\n  }\n\n  async getLogisticsInfo() {\n    const {\n      shippingData,\n      totalizers,\n    } = await this.cartService.simulateOrderForm(this.addressCep);\n\n    this.setTotalizers(totalizers);\n\n    this.logisticsInfo = shippingData.logisticsInfo;\n  }\n\n  async getDeliveryTypes() {\n    await this.getLogisticsInfo();\n\n    const insuranceSKU = this.orderForm.items.filter(\n      ({ id }) => parseInt(id) === 35\n    )[0];\n\n    const transporterVariations = this.getTransporterVariations(\n      this.logisticsInfo\n    );\n\n    const totalItemsWithDiscounts = this.totalizers\n      .filter(total => total.id !== 'Shipping')\n      .reduce((total, totalizer) => total + totalizer.value, 0);\n\n    this.logisticsInfo[0].slas\n      .map(courier => {\n        const { courierId } = courier.deliveryIds[0];\n\n        const index = this.transporters.findIndex(({ courierIds }) => {\n          const ids = courierIds.split(';');\n\n          return ids.includes(courierId);\n        });\n\n        courier.transporterIndex = index;\n\n        return courier;\n      })\n      .filter(({ transporterIndex }) => transporterIndex !== -1)\n      .forEach(({ id, name, deliveryIds, transporterIndex }) => {\n        const key = id.toLowerCase().replace(/\\s/g, '');\n        const [courierName, courierType] = id.split(' - ');\n        const courierTypeLowerCase = courierType.toLowerCase();\n\n        const { courierId } = deliveryIds[0];\n\n        let { price } = transporterVariations[key];\n\n        price += insuranceSKU\n          ? totalItemsWithDiscounts + -insuranceSKU.manualPrice\n          : totalItemsWithDiscounts;\n\n        const priceFormatted = this.helper.formatPrice(price);\n\n        const currentTransporter = this.transporters[transporterIndex];\n\n        const courier = [\n          {\n            price,\n            priceFormatted,\n            id: courierId,\n            type: courierType,\n            slaName: name,\n          },\n        ];\n\n        if (currentTransporter.deliveryTypes) {\n          currentTransporter.deliveryTypes = [\n            ...courier,\n            ...currentTransporter.deliveryTypes,\n          ];\n        } else {\n          currentTransporter.deliveryTypes = courier;\n        }\n\n        currentTransporter[courierTypeLowerCase] = true;\n      });\n\n    this.removeTransportersWithoutDeliveryType();\n    this.orderDeliveryTypesByLessPrice();\n  }\n\n  removeTransportersWithoutDeliveryType() {\n    this.transporters = this.transporters.filter(transporter => {\n      return transporter.hasOwnProperty('deliveryTypes');\n    });\n  }\n\n  orderDeliveryTypesByLessPrice() {\n    this.transporters = this.transporters.map(transporter => {\n      transporter.deliveryTypes.sort((a, b) => a.price - b.price);\n\n      return transporter;\n    });\n  }\n\n  orderTransportersByLessPrice() {\n    this.transporters.sort((a, b) => {\n      return a.deliveryTypes[0].price - b.deliveryTypes[0].price;\n    });\n  }\n\n  addTransportersToDOM() {\n    const compareTransporterList = document.querySelector(\n      '.compare-transporter__list'\n    );\n\n    const transporters = this.transporters.map(transporter =>\n      this.createTransporterElement(transporter)\n    );\n    if (transporters.length > 0) {\n      compareTransporterList.classList.remove('empty-list');\n      compareTransporterList.innerHTML = transporters.join('');\n    } else {\n      compareTransporterList.classList.add('empty-list');\n      compareTransporterList.innerHTML = `<li class=\"empty-text\">Não encontramos nenhum resultado para os filtros selecionados.</li>`;\n    }\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  new TransporterPage();\n});\n","export default class AccordionComponent {\n  constructor({\n    accordion,\n    accordionHeader,\n    openAccordionCallback,\n    closeAccordionCallback,\n  }) {\n    this.isOpen = false;\n    this.openCallback = openAccordionCallback || new Function();\n    this.closeCallback = closeAccordionCallback || new Function();\n\n    this.accordion =\n      accordion instanceof Element\n        ? accordion\n        : document.querySelector(accordion);\n\n    this.accordionHeader =\n      accordionHeader instanceof Element\n        ? accordionHeader\n        : document.querySelector(accordionHeader);\n\n    this.setHandleClick();\n  }\n\n  setHandleClick() {\n    this.accordionHeader.addEventListener('click', () => {\n      this.isOpen ? this.closeCallback(this) : this.openCallback(this);\n\n      this.isOpen = !this.isOpen;\n    });\n  }\n}\n","/**\n * Ensure Abstraction class\n */\nclass Ensure {\n  /**\n   * Ensure value is Undefined\n   * @param {*} value Value to be validated\n   * @return {boolean}\n   */\n  static isUndefined(value = undefined) {\n    return typeof value === 'undefined' ||\n      value === null ||\n      value === '' ||\n      value === {} ||\n      value === [];\n    // || JSON.stringify(value) === JSON.stringify({});\n  }\n\n  /**\n   * Ensure Input validity\n   * @param {*} input to validate\n   * @return {boolean} true if is valid\n   */\n  static isInputValid(input) {\n    return !this.isUndefined(input) && input.checkValidity();\n  }\n\n  /**\n   * Verify if object has properties\n   * @param {Object} object - Object to be verified\n   * @param {Array} props - properties to search on object\n   * @return {Boolean} True if object has all properties\n   */\n  static hasProps(object, props) {\n    const missingPropsResult = this.getMissingProps(object, props);\n    return missingPropsResult.length <= 0;\n  }\n\n  /**\n   * Get Object missing properties\n   * @param {Object} object - Object to be verified\n   * @param {Array} props - properties to search on object\n   * @return {Array} missing properties\n   */\n  static getMissingProps(object, props) {\n    let missingProps = [];\n    [...props].forEach((prop) => {\n      const result = prop in object;\n      if (!result) {\n        missingProps.push(prop);\n      }\n    });\n\n    return missingProps;\n  }\n}\n\nexport default Ensure;\n","export default class CustomSelect {\n  constructor({\n    selectElement,\n    customSelectList,\n    customSelectSelected,\n    customSelectListItemClassName,\n    customSelectListItemClassNameActive,\n    selectChangeCallback,\n    selectOpenCallback,\n    selectCloseCallback,\n  }) {\n    this.isOpen = false;\n\n    this.selectElement =\n      selectElement instanceof Element\n        ? selectElement\n        : document.querySelector(selectElement);\n\n    this.customSelectList =\n      customSelectList instanceof Element\n        ? customSelectList\n        : document.querySelector(customSelectList);\n\n    this.customSelectSelected =\n      customSelectSelected instanceof Element\n        ? customSelectSelected\n        : document.querySelector(customSelectSelected);\n\n    this.selectChangeCallback = selectChangeCallback || new Function();\n    this.selectOpenCallback = selectOpenCallback || new Function();\n    this.selectCloseCallback = selectCloseCallback || new Function();\n    this.customSelectListItemClassName = customSelectListItemClassName || '';\n    this.customSelectListItemClassNameActive =\n      customSelectListItemClassNameActive || '';\n\n    this.setCurrentSelectedItem();\n    this.createSelectList();\n    this.setListenerForCurrentSelected();\n  }\n\n  setCurrentSelectedItem() {\n    let { options, selectedIndex } = this.selectElement;\n\n    this.customSelectSelected.textContent = options[selectedIndex].textContent;\n  }\n\n  handleSelectChange(target) {\n    let { value } = this.selectElement;\n    let { value: newValue } = target.dataset;\n\n    const prevListItemActive = this.customSelectList.querySelector(\n      `.${this.customSelectListItemClassNameActive}`\n    );\n\n    if (prevListItemActive) {\n      prevListItemActive.classList.remove(\n        this.customSelectListItemClassNameActive\n      );\n    }\n\n    target.classList.add(this.customSelectListItemClassNameActive);\n\n    this.close();\n\n    if (value !== newValue) {\n      this.changeOption(newValue);\n    }\n  }\n\n  createSelectList() {\n    [...this.selectElement].forEach(option => {\n      const listItem = document.createElement('li');\n      listItem.setAttribute('class', this.customSelectListItemClassName);\n      listItem.dataset['value'] = option.value;\n\n      listItem.textContent = option.textContent.trim();\n\n      listItem.addEventListener('click', ({ target }) =>\n        this.handleSelectChange(target)\n      );\n\n      this.customSelectList.append(listItem);\n    });\n  }\n\n  setListenerForCurrentSelected() {\n    this.customSelectSelected.addEventListener('click', () => {\n      this.open();\n\n      document.body.addEventListener('click', ({ target }) => {\n        let close = !target.className.includes('custom-select');\n\n        if (close) this.close();\n      });\n    });\n  }\n\n  open(event = null) {\n    this.isOpen = true;\n    this.selectOpenCallback(event);\n    this.customSelectList.classList.add('open');\n  }\n\n  close() {\n    this.isOpen = false;\n    this.selectCloseCallback();\n    this.customSelectList.classList.remove('open');\n  }\n\n  changeOption(value) {\n    this.selectElement.value = value;\n\n    const eventChange = new Event('change', { bubbles: true });\n\n    this.selectElement.dispatchEvent(eventChange);\n\n    this.setCurrentSelectedItem();\n    this.selectChangeCallback({\n      value,\n    });\n  }\n}\n","/* eslint-disable max-len */\nimport { Logger } from './';\n\n/**\n * Helper Abstraction class\n */\nclass Helper {\n  /**\n   * Helper constructor\n   * @param {*} props\n   */\n  constructor(props) {\n    this._logger = new Logger('Ensure');\n    this.props = props || {\n      language: navigator.language || navigator.userLanguage,\n      currency: 'BRL',\n      currencyLocale: 'pt-br',\n      minimumFractionDigits: 2,\n    };\n  }\n\n  /**\n   * format currency\n   * @param {*} value\n   * @param {*} minimumFractionDigits\n   * @return {*}\n   */\n  formatPrice(value) {\n    value = value / 100;\n    value = (value * 1).toFixed(\n      Math.max(0, ~~this.props.minimumFractionDigits)\n    );\n\n    return new Intl.NumberFormat(this.props.currencyLocale, {\n      style: 'currency',\n      currency: this.props.currency,\n      minimumFractionDigits: this.props.minimumFractionDigits,\n    }).format(value);\n  }\n\n  static getParents(elem, selector) {\n    // Element.matches() polyfill\n    if (!Element.prototype.matches) {\n      Element.prototype.matches =\n        Element.prototype.matchesSelector ||\n        Element.prototype.mozMatchesSelector ||\n        Element.prototype.msMatchesSelector ||\n        Element.prototype.oMatchesSelector ||\n        Element.prototype.webkitMatchesSelector ||\n        function(s) {\n          let matches = (this.document || this.ownerDocument).querySelectorAll(\n              s\n            ),\n            i = matches.length;\n\n          while (--i >= 0 && matches.item(i) !== this) {}\n\n          return i > -1;\n        };\n    }\n\n    // Set up a parent array\n    let parents = [];\n\n    // Push each parent element to the array\n    for (; elem && elem !== document; elem = elem.parentNode) {\n      if (selector) {\n        if (elem.matches(selector)) {\n          parents.push(elem);\n        }\n\n        continue;\n      }\n\n      parents.push(elem);\n    }\n\n    // Return our parent array\n    return parents;\n  }\n\n  static serializeForm(form) {\n    // Setup our serialized data\n    let serialized = [];\n\n    // Loop through each field in the form\n    for (let i = 0; i < form.elements.length; i++) {\n      let field = form.elements[i];\n\n      // Don't serialize fields without a name, submits, buttons, file and reset inputs, and disabled fields\n      if (\n        !field.name ||\n        field.disabled ||\n        field.type === 'file' ||\n        field.type === 'reset' ||\n        field.type === 'submit' ||\n        field.type === 'button'\n      )\n        continue;\n\n      // If a multi-select, get all selections\n      if (field.type === 'select-multiple') {\n        for (let n = 0; n < field.options.length; n++) {\n          if (!field.options[n].selected) continue;\n\n          serialized.push(\n            encodeURIComponent(field.name) +\n              '=' +\n              encodeURIComponent(field.options[n].value)\n          );\n        }\n      }\n\n      // Convert field data to a query string\n      else if (\n        (field.type !== 'checkbox' && field.type !== 'radio') ||\n        field.checked\n      ) {\n        serialized.push(\n          encodeURIComponent(field.name) + '=' + encodeURIComponent(field.value)\n        );\n      }\n    }\n\n    return serialized.join('&');\n  }\n\n  static getFormData(form) {\n    // Setup our serialized data\n    let data = {};\n\n    // Loop through each field in the form\n    for (let i = 0; i < form.elements.length; i++) {\n      let field = form.elements[i];\n\n      // Don't serialize fields without a name, submits, buttons, file and reset inputs, and disabled fields\n      if (\n        !field.name ||\n        field.disabled ||\n        field.type === 'file' ||\n        field.type === 'reset' ||\n        field.type === 'submit' ||\n        field.type === 'button'\n      )\n        continue;\n\n      // If a multi-select, get all selections\n      if (field.type === 'select-multiple') {\n        for (let n = 0; n < field.options.length; n++) {\n          if (!field.options[n].selected) continue;\n\n          data[field.name] = field.options[n].value;\n        }\n      }\n\n      // Convert field data to a query string\n      else if (\n        (field.type !== 'checkbox' && field.type !== 'radio') ||\n        field.checked\n      ) {\n        data[field.name] = field.value;\n      }\n    }\n\n    return data;\n  }\n\n  static getRandomID() {\n    // Generate unique IDs for use as pseudo-private/protected names.\n    // Similar in concept to\n    // <http://wiki.ecmascript.org/doku.php?id=strawman:names>.\n    //\n    // The goals of this function are twofold:\n    //\n    // * Provide a way to generate a string guaranteed to be unique when compared\n    //   to other strings generated by this function.\n    // * Make the string complex enough that it is highly unlikely to be\n    //   accidentally duplicated by hand (this is key if you're using `ID`\n    //   as a private/protected name on an object).\n    //\n    // Use:\n    //\n    //     var privateName = ID();\n    //     var o = { 'public': 'foo' };\n    //     o[privateName] = 'bar';\n\n    // Math.random should be unique because of its seeding algorithm.\n    // Convert it to base 36 (numbers + letters), and grab the first 9 characters\n    // after the decimal.\n\n    return (\n      '_' +\n      Math.random()\n        .toString(36)\n        .substr(2, 9)\n    );\n  }\n\n  static setCookie(cname, cvalue, exdays) {\n    const date = new Date();\n\n    date.setTime(date.getTime() + exdays * 24 * 60 * 60 * 1000);\n\n    const expires = 'expires=' + date.toUTCString();\n\n    document.cookie = `${cname}=${cvalue};${expires};path=/`;\n  }\n\n  static getCookie(cname) {\n    const decodedCookie = decodeURIComponent(document.cookie);\n\n    const cookie = decodedCookie\n      .split(';')\n      .filter(cookie => cookie.includes(cname))[0];\n\n    return cookie || '';\n  }\n\n  static isInViewport(element) {\n    const heightViewport =\n      window.innerHeight || document.documentElement.clientHeight;\n\n    const widthViewport =\n      window.innerWidth || document.documentElement.clientWidth;\n\n    const { top, right, bottom, left } = element.getBoundingClientRect();\n\n    return (\n      top >= 0 &&\n      left >= 0 &&\n      bottom <= heightViewport &&\n      right <= widthViewport\n    );\n  }\n\n  static removeAccents(str) {\n    const mapAccents = {\n      a: 'á|à|ã|â|À|Á|Ã|Â',\n      e: 'é|è|ê|É|È|Ê',\n      i: 'í|ì|î|Í|Ì|Î',\n      o: 'ó|ò|ô|õ|Ó|Ò|Ô|Õ',\n      u: 'ú|ù|û|ü|Ú|Ù|Û|Ü',\n      c: 'ç|Ç',\n      n: 'ñ|Ñ',\n    };\n\n    for (let pattern in mapAccents) {\n      str = str.replace(new RegExp(mapAccents[pattern], 'g'), pattern);\n    }\n\n    return str;\n  }\n}\n\nexport default Helper;\n","/* eslint no-console: 0 */\n\n/**\n * Logger Abstraction class\n */\nclass Logger {\n  /**\n   * Logger constructor\n   * @param {string} logName Application name to log\n   */\n  constructor(logName = 'B8ONE Logger Component') {\n    this.logName = logName;\n  }\n\n  /**\n   * Log error message\n   * @param {*} message - Message text\n   * @param {*} errorObj - Message object\n   */\n  error(message = '', errorObj = {}) {\n    console.error(message, errorObj);\n  }\n\n  /**\n   * Log information message\n   * @param {*} message - Message text\n   */\n  info(message = '') {\n    console.info(message);\n  }\n\n  /**\n   * Log warning message\n   * @param {*} message - Message text\n   */\n  warning(message = '') {\n    console.warn(this.logName, message);\n  }\n\n  /**\n   * Generic log\n   * @param {String} message - log's message\n   */\n  log(message = '') {\n    console.log(message);\n  }\n\n  /**\n   * Generic log\n   * @param {String} message - log's message\n   * @param {*} object - object to be logged\n   */\n  log(message = '', object = {}) {\n    console.log(message, object);\n  }\n}\n\nexport default Logger;\n","/* eslint-disable max-len */\n\nimport { Ensure, Logger } from '../common';\nimport HttpClient from './b8one.httpClient';\n\n/**\n * Cart Abstraction class\n */\nclass CartService {\n  /**\n   * Cart constructor\n   */\n  constructor() {\n    this._VTEX_API_ENDPOINT = '/api/checkout/pub/orderForm';\n\n    this._logger = new Logger('Cart service');\n    this._httpClient = new HttpClient();\n  }\n\n  /**\n   * Get current cart\n   * @return {*} Cart object\n   */\n  async getCurrent() {\n    return await this._httpClient.get(this._VTEX_API_ENDPOINT);\n  }\n\n  /**\n   * Add item to cart\n   * @param {*} skuId - Product sku Id (SKU)\n   * @param {*} productQuantity - Product Quantity\n   * @param {*} sellerId - Seller id\n   */\n  async add(skuId, productQuantity, sellerId = 1) {\n    // const payload = this._payloadFactory(skuId, productQuantity, sellerId);\n\n    if (!Ensure.isUndefined(skuId)) {\n      const current = await this.getCurrent();\n      const indexFound = current.items.findIndex(x => x.id === skuId);\n\n      if (indexFound > -1) {\n        productQuantity =\n          parseInt(productQuantity) +\n          parseInt(current.items[indexFound].quantity);\n      }\n\n      const endpointUrl = `${this._VTEX_API_ENDPOINT}/${current.orderFormId}/items`;\n\n      const payload = {\n        orderItems: [\n          {\n            seller: sellerId.toString(),\n            quantity: parseInt(productQuantity),\n            id: skuId.toString(),\n          },\n        ],\n      };\n\n      return this._httpClient.patch(endpointUrl, payload);\n    }\n  }\n\n  async checkoutCRUD(skus) {\n    let { items } = await window.vtexjs.checkout.getOrderForm();\n\n    const skusCustomProducts = this.getCustomProducts(skus);\n\n    skus = skus.filter(sku => !sku.isCustom);\n    skus = [...skus, ...skusCustomProducts];\n\n    const skuToIgnore = [19, 698, 25, 26];\n\n    const indexToRemove = items.reduce((indexList, item, index) => {\n      const customProductSKUs = [25, 26];\n\n      if (customProductSKUs.includes(parseInt(item.id))) {\n        return [...indexList, index];\n      }\n\n      return indexList;\n    }, []);\n\n    if (indexToRemove.length > 0) {\n      const response = await this.removeMoreProducts(indexToRemove);\n\n      response && (items = response.items);\n    }\n\n    const productsToAdd = skus\n      .filter(sku => sku.quantity > 0)\n      .filter(sku => {\n        let index = items.findIndex(\n          item => parseInt(item.productId) === parseInt(sku.productId)\n        );\n\n        return index === -1 && sku.quantity > 0;\n      })\n      .map(sku => ({\n        quantity: sku.quantity,\n        seller: 1,\n        id: sku.skuId || sku.id,\n      }));\n\n    console.log('productsToAdd', productsToAdd);\n\n    const productsToUpdate = skus\n      .filter(sku => sku.quantity > 0)\n      .filter(sku => {\n        const id = sku.skuId || sku.id;\n\n        let index = items.findIndex(item => parseInt(item.id) === parseInt(id));\n\n        if (index !== -1) {\n          const sameSku = parseInt(items[index].id) === parseInt(sku.id);\n          const diffQuantity =\n            parseInt(items[index].quantity) !== parseInt(sku.quantity);\n\n          return sameSku && diffQuantity && sku.quantity > 0;\n        }\n\n        return false;\n      })\n      .map(sku => {\n        const id = sku.skuId || sku.id;\n\n        let index = items.findIndex(item => parseInt(item.id) === parseInt(id));\n\n        return {\n          index,\n          quantity: sku.quantity,\n        };\n      });\n\n    console.log('productsToUpdate', productsToUpdate);\n\n    const productsToReplaceSKU = skus\n      .filter(\n        sku =>\n          sku.quantity > 0 &&\n          !skuToIgnore.includes(parseInt(sku.skuId || sku.id))\n      )\n      .filter(sku => {\n        const index = items.findIndex(\n          item => parseInt(item.productId) === parseInt(sku.productId)\n        );\n\n        if (index !== -1) {\n          const diffSku = parseInt(items[index].id) !== parseInt(sku.skuId);\n\n          return diffSku;\n        }\n\n        return false;\n      })\n      .map(sku => {\n        const index = items.findIndex(\n          item => parseInt(item.productId) === parseInt(sku.productId)\n        );\n\n        const oldSKU = {\n          index,\n          seller: 1,\n          quantity: 0,\n        };\n\n        const newSKU = {\n          seller: 1,\n          id: sku.skuId,\n          quantity: sku.quantity,\n        };\n\n        return [oldSKU, newSKU];\n      })\n      .reduce((itemsList, current) => {\n        const [oldSKU, newSKU] = current;\n\n        return [...itemsList, oldSKU, newSKU];\n      }, []);\n\n    console.log('productsToReplaceSKU', productsToReplaceSKU);\n\n    const productsToRemove = skus\n      .filter(sku => sku.quantity < 1)\n      .filter(sku => {\n        const id = sku.skuId || sku.id;\n\n        let index = items.findIndex(item => parseInt(item.id) === parseInt(id));\n\n        if (index !== -1) {\n          return sku.quantity == 0;\n        }\n\n        return false;\n      })\n      .map(sku => {\n        const id = sku.skuId || sku.id;\n\n        let index = items.findIndex(item => parseInt(item.id) === parseInt(id));\n\n        return {\n          index,\n          quantity: 0,\n        };\n      });\n\n    console.log('productsToRemove', productsToRemove);\n\n    if (productsToUpdate[0]) {\n      await window.vtexjs.checkout.updateItems(productsToUpdate, null, false);\n    }\n\n    if (productsToReplaceSKU[0]) {\n      await window.vtexjs.checkout.replaceSKU(productsToReplaceSKU);\n    }\n\n    if (productsToRemove[0]) {\n      await window.vtexjs.checkout.removeItems(productsToRemove);\n    }\n\n    if (productsToAdd[0]) {\n      await window.vtexjs.checkout.addToCart(productsToAdd, null);\n    }\n  }\n\n  getCustomProducts(skus) {\n    const customProducts = {};\n\n    skus\n      .filter(({ isCustom }) => isCustom === true)\n      .forEach(({ skuId, quantity, customProductItem }) => {\n        let currentCustomProduct = customProducts[skuId];\n\n        const customProductQuantity =\n          parseInt(customProductItem.quantity) * parseInt(quantity);\n\n        if (currentCustomProduct) {\n          const newQuantity =\n            parseInt(currentCustomProduct.quantity) + customProductQuantity;\n\n          currentCustomProduct = {\n            ...currentCustomProduct,\n            quantity: newQuantity,\n          };\n        } else {\n          currentCustomProduct = {\n            ...customProductItem,\n            quantity: customProductQuantity,\n            isCustom: true,\n          };\n        }\n\n        customProducts[skuId] = currentCustomProduct;\n      });\n\n    return Object.values(customProducts);\n  }\n\n  async getProductIndexInOrderForm(productId) {\n    const { items } = await this.getCurrent();\n\n    const index = items.findIndex(item => item.productId == productId);\n\n    if (index !== -1) return index;\n\n    return;\n  }\n\n  /**\n   * Remove item to cart\n   * @param {JSON} itemIndex - Product item index to be removed\n   */\n  async remove(itemIndex) {\n    const current = await this.getCurrent();\n    const endpointUrl = `${this._VTEX_API_ENDPOINT}/${current.orderFormId}/items`;\n    const payload = {\n      orderItems: [\n        {\n          index: itemIndex,\n          quantity: 0,\n        },\n      ],\n      expectedOrderFormSections: ['items'],\n      noSplitItem: true,\n    };\n\n    await this._httpClient.patch(endpointUrl, payload);\n  }\n\n  /**\n   * Remove items of cart\n   * @param {Array} itemsIndex - Products items index to be removed\n   */\n  async removeMoreProducts(itemsIndex) {\n    const current = await this.getCurrent();\n    const endpointUrl = `${this._VTEX_API_ENDPOINT}/${current.orderFormId}/items`;\n    const payload = {\n      orderItems: itemsIndex.map(index => ({\n        index,\n        quantity: 0,\n      })),\n      expectedOrderFormSections: ['items'],\n      noSplitItem: true,\n    };\n\n    return await this._httpClient.patch(endpointUrl, payload);\n  }\n\n  async updateProduct(skuId, quantity, seller = 1) {\n    const newSKU = {\n      seller,\n      quantity,\n      id: skuId,\n    };\n\n    return await this.updateProducts([newSKU]);\n  }\n\n  async updateProducts(skus) {\n    const { items, orderFormId } = await this.getCurrent();\n\n    skus = skus\n      .map(({ id, quantity, seller }) => {\n        const index = items.findIndex(\n          item => parseInt(item.id) === parseInt(id)\n        );\n\n        return {\n          id,\n          index,\n          quantity,\n          seller: seller || 1,\n        };\n      })\n      .filter(sku => sku.index !== -1);\n\n    if (skus.length > 0) {\n      const payload = {\n        orderItems: skus,\n      };\n\n      return await this._httpClient.patch(\n        `/api/checkout/pub/orderForm/${orderFormId}/items`,\n        payload\n      );\n    }\n  }\n\n  async simulateOrderForm(postalCode, country = 'BRA') {\n    try {\n      await vtexjs.checkout.getOrderForm();\n\n      const orderForm = await vtexjs.checkout.calculateShipping({\n        postalCode,\n        country,\n      });\n\n      return orderForm;\n    } catch (error) {\n      console.error('Error in simulateOrderForm', error);\n    }\n  }\n\n  async simulateShipping(items, postalCode, country = 'BRA') {\n    const orderFormSimulated = await vtexjs.checkout.simulateShipping(\n      items,\n      postalCode,\n      country\n    );\n\n    return orderFormSimulated;\n  }\n\n  async updateCheckoutTransporterSLA(logisticsInfo) {\n    await vtexjs.checkout.getOrderForm();\n\n    const { shippingData } = vtexjs.checkout.orderForm;\n\n    shippingData.logisticsInfo = logisticsInfo;\n\n    await vtexjs.checkout.sendAttachment('shippingData', shippingData);\n  }\n\n  async updateCheckoutAddress(address) {\n    console.log(address);\n    await vtexjs.checkout.getOrderForm();\n\n    const { shippingData } = vtexjs.checkout.orderForm;\n\n    shippingData.availableAddresses = [\n      {\n        ...shippingData.address,\n        ...address,\n      },\n    ];\n\n    shippingData.selectedAddresses = [\n      {\n        ...shippingData.address,\n        ...address,\n      },\n    ];\n\n    shippingData.address = {\n      ...shippingData.address,\n      ...address,\n    };\n\n    return await vtexjs.checkout.sendAttachment('shippingData', shippingData);\n  }\n\n  async setMultipleCustomDataFields(appName, fields) {\n    const { orderFormId } = await this.getCurrent();\n\n    const endpoint = `/api/checkout/pub/orderForm/${orderFormId}/customData/${appName}`;\n\n    try {\n      return await this._httpClient.put(endpoint, fields);\n    } catch (error) {\n      console.error('setMultipleCustomDataFields', error);\n    }\n\n    return;\n  }\n\n  async setSingleCustomDataField(appName, appFieldName, appFieldValue) {\n    const { orderFormId } = await this.getCurrent();\n\n    const endpoint = `/api/checkout/pub/orderForm/${orderFormId}/customData/${appName}/${appFieldName}`;\n\n    const payload = { value: appFieldValue };\n\n    try {\n      return await this._httpClient.put(endpoint, payload);\n    } catch (error) {\n      console.error('setSingleCustomDataField', error);\n    }\n\n    return;\n  }\n\n  async removeSingleCustomDataField(appName, appFieldName) {\n    const { orderFormId } = await this.getCurrent();\n\n    const endpoint = `/api/checkout/pub/orderForm/${orderFormId}/customData/${appName}/${appFieldName}`;\n\n    const payload = { value: null };\n\n    try {\n      return await this._httpClient.delete(endpoint, payload);\n    } catch (error) {\n      console.error('removeSingleCustomDataField', error);\n    }\n\n    return;\n  }\n\n  /**\n   * Cart's payload method factory\n   * @param {*} skuId - Product Id (SKU)\n   * @param {*} productQuantity - Product Quantity\n   * @param {*} sellerId - Seller id\n   * @return {JSON} cart paylod\n   */\n  _payloadFactory(skuId, productQuantity, sellerId = 1) {\n    return {\n      id: skuId,\n      quantity: productQuantity,\n      seller: sellerId,\n    };\n  }\n}\n\nexport default CartService;\n","import fetch from 'unfetch';\nimport { Ensure, Logger } from '../common';\n\n/**\n * HttpClient Abstraction class\n */\nclass HttpClient {\n  /**\n   * HttpClient constructor\n   */\n  constructor() {\n    this._logger = new Logger('httpClient');\n  }\n\n  /**\n   * Get\n   * @param {String} endpointUrl\n   * @return {Promise}\n   */\n  get(endpointUrl) {\n    if (!Ensure.isUndefined(endpointUrl)) {\n      return this._execute(endpointUrl, 'GET');\n    }\n  }\n\n  /**\n   * Delete\n   * @param {String} endpointUrl\n   * @return {Promise}\n   */\n  delete(endpointUrl) {\n    if (!Ensure.isUndefined(endpointUrl)) {\n      return this._execute(endpointUrl, 'DELETE');\n    }\n  }\n\n  /**\n   *\n   * @param {String} endpointUrl\n   * @param {JSON} payload\n   * @return {Promise}\n   */\n  post(endpointUrl, payload = {}) {\n    if (!Ensure.isUndefined(endpointUrl)) {\n      return this._execute(endpointUrl, 'POST', payload);\n    }\n  }\n\n  /**\n   *\n   * @param {String} endpointUrl\n   * @param {JSON} payload\n   * @return {Promise}\n   */\n  put(endpointUrl, payload) {\n    if (!Ensure.isUndefined(endpointUrl) && !Ensure.isUndefined(payload)) {\n      return this._execute(endpointUrl, 'PUT', payload);\n    }\n  }\n\n  /**\n   *\n   * @param {String} endpointUrl\n   * @param {JSON} payload\n   * @return {Promise}\n   */\n  patch(endpointUrl, payload) {\n    if (!Ensure.isUndefined(endpointUrl) && !Ensure.isUndefined(payload)) {\n      return this._execute(endpointUrl, 'PATCH', payload);\n    }\n  }\n\n  /**\n   * @param {String} endpointUrl\n   * @param {String} httpVerb\n   * @param {Object} payload\n   * @return {Promise}\n   */\n  _execute(endpointUrl, httpVerb, payload) {\n    let header = {\n      method: httpVerb,\n      headers: {\n        // 'Accept': 'application/vnd.vtex.ds.v10+json',\n        // 'Content-Type': 'application/json',\n        accept: 'application/vnd.vtex.masterdata.v10+json',\n        'content-type': 'application/json; charset=utf-8',\n      },\n    };\n\n    if (payload) {\n      header['body'] = JSON.stringify(payload);\n    }\n\n    return fetch(endpointUrl, header)\n      .then(this.validateResponse)\n      .then(this.parseResponseToJson)\n      .then(data => {\n        return data;\n      })\n      .catch(error => {\n        this._logger.log('Request succeeded with JSON response', error);\n        return error;\n      });\n  }\n\n  /**\n   * Parse response data to json object\n   * @param {*} response - Request response\n   * @return {JSON} json data\n   */\n  async parseResponseToJson(response) {\n    if (!response.ok) {\n      return response;\n    }\n\n    return await response.json();\n  }\n\n  /**\n   * Response validation\n   * @param {*} response\n   * @return {Promise} promise result\n   */\n  validateResponse(response) {\n    if (response.ok) {\n      return Promise.resolve(response);\n    } else {\n      return Promise.reject(new Error(response.statusText));\n    }\n  }\n}\n\nexport default HttpClient;\n"],"sourceRoot":""}