{"version":3,"sources":["webpack:///./src/js/general/services/b8one.vtexCatalogService.js","webpack:///./src/js/store/desktop/address/index.js","webpack:///./src/js/general/common/b8one.ensure.js","webpack:///./src/js/general/components/b8one.customSelect.js","webpack:///./src/js/general/common/b8one.helper.js","webpack:///./src/js/general/common/b8one.logger.js","webpack:///./src/js/general/services/b8one.cartService.js","webpack:///./src/js/general/services/b8one.httpClient.js"],"names":["VtexCatalogService","origin","this","api","axios","create","baseURL","categoryID","subcategoryID","_from","_to","orderBy","params","URLSearchParams","append","forEach","order","get","console","error","products","initial","end","getProductsByCategories","data","status","productId","Address","customData","orderForm","customApps","filter","customApp","id","courier_data","fields","transporter","JSON","parse","nome","slaName","basic","setHandledButtonSave","setHandledFormsChange","cartService","CartService","vtexCatalogService","customSelectInstances","isToAddressUnknown","init","getCurrent","eventHandlerBinds","createCustomSelect","setHandledButtonUnknownAddressClick","jumpToConclusions","getAddressData","buttonSave","document","querySelector","buttonNext","addEventListener","e","dispatchEvent","window","initSaveCustomDataEvent","saveData","endSaveCustomDataEvent","classList","toggle","validateForms","location","assign","fieldsWithDefaultData","to_address_name","to_address_number","to_address_county","forms","form","contains","reduce","obj1","addressFields","elements","type","value","obj2","checked","hasOwnProperty","key","orderInfoAddressFields","to_address","to_city","to_state","to_address_complement","to_address_zipcode","Object","keys","obj","addressKEY","addressValue","addressType","getAddressFieldsForOrderInfo","address","getAddressForOrderForm","needStorageInput","fromHomeTypeValue","toHomeTypeValue","orderInfoCommonFields","current_step","user_need_storage","home_type","from_home_type","to_home_type","orderInfoFields","orderInfoFieldsArray","entries","arr","includes","orderInfoFieldsForCustomData","Promise","all","updateCheckoutAddress","setMultipleCustomDataFields","log","querySelectorAll","cardSelect","index","selectElement","selectCustom","customSelectList","customSelectSelected","customSelectInstance","CustomSelect","customSelectListItemClassName","customSelectListItemClassNameActive","selectOpenCallback","customSelecItem","close","selectListHeight","offsetHeight","add","style","maxHeight","selectCloseCallback","remove","push","storeItemsChangeCheckbox","toLowerCase","getElementById","setCurrentSelectedItem","target","handledFormChange","map","input","required","noValidate","length","checkValidity","buttonUnknownAddress","addressStreetNameElement","addressZipcodeElement","addressCountyElement","addressNumberElement","parentElement","element","toggleAttribute","Ensure","undefined","isUndefined","object","props","getMissingProps","missingProps","prop","selectChangeCallback","isOpen","Element","Function","createSelectList","setListenerForCurrentSelected","options","selectedIndex","textContent","newValue","dataset","prevListItemActive","changeOption","option","listItem","createElement","setAttribute","trim","handleSelectChange","open","body","className","event","eventChange","Event","bubbles","Helper","_logger","Logger","language","navigator","userLanguage","currency","currencyLocale","minimumFractionDigits","elem","selector","prototype","matches","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","s","ownerDocument","i","item","parents","parentNode","serialized","field","name","disabled","n","selected","encodeURIComponent","join","Math","random","toString","substr","cname","cvalue","exdays","date","Date","setTime","getTime","expires","toUTCString","cookie","decodeURIComponent","split","heightViewport","innerHeight","documentElement","clientHeight","widthViewport","innerWidth","clientWidth","getBoundingClientRect","top","right","bottom","left","str","pattern","mapAccents","a","o","u","c","replace","RegExp","toFixed","max","Intl","NumberFormat","format","logName","message","errorObj","info","warn","_VTEX_API_ENDPOINT","_httpClient","HttpClient","skuId","productQuantity","sellerId","current","indexFound","items","findIndex","x","parseInt","quantity","endpointUrl","orderFormId","payload","orderItems","seller","patch","skus","vtexjs","checkout","getOrderForm","skusCustomProducts","getCustomProducts","sku","isCustom","skuToIgnore","indexToRemove","indexList","removeMoreProducts","response","productsToAdd","productsToUpdate","sameSku","diffQuantity","productsToReplaceSKU","itemsList","oldSKU","newSKU","productsToRemove","updateItems","replaceSKU","removeItems","addToCart","customProducts","customProductItem","currentCustomProduct","customProductQuantity","newQuantity","values","itemIndex","expectedOrderFormSections","noSplitItem","itemsIndex","updateProducts","postalCode","country","calculateShipping","simulateShipping","orderFormSimulated","logisticsInfo","shippingData","sendAttachment","availableAddresses","selectedAddresses","appName","endpoint","put","appFieldName","appFieldValue","delete","_execute","httpVerb","header","method","headers","accept","stringify","fetch","then","validateResponse","parseResponseToJson","catch","ok","json","resolve","reject","Error","statusText"],"mappings":"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","file":"js/b8one.desktop.address.js","sourcesContent":["import axios from 'axios';\n\nexport default class VtexCatalogService {\n  /**\n   * @param  {String} origin='' Origin example => https://www.example.com\n   */\n  constructor(origin = '') {\n    this.api = axios.create({\n      baseURL: `${origin}/api/catalog_system`,\n    });\n  }\n\n  /**\n   * This function is a abstraction of VTEX Search API for get and return products by categoryID (Parent) and subcategoryID (child)\n   * and return an array of products, also you can order the products with orderBy param, fetch max 50 products per request.\n   *\n   * For more information go to the follow link:\n   * https://documenter.getpostman.com/view/845/vtex-search-api/Hs43?version=latest#e0ec3923-faf7-5049-8634-f6d617ce5f67\n   *\n   * @param  {String|Number} categoryID\n   * @param  {String|Number} subcategoryID\n   * @param  {String|Number} _from=0\n   * @param  {String|Number} _to=49\n   * @param  {Array} orderBy=['OrderByNameASC']\n   * @return {Array} Array of products.\n   */\n  async getProductsByCategories(\n    categoryID,\n    subcategoryID,\n    _from = 0,\n    _to = 49,\n    orderBy = ['OrderByNameASC']\n  ) {\n    try {\n      const params = new URLSearchParams();\n\n      params.append('_to', _to);\n      params.append('_from', _from);\n      params.append('fq', `C:/${categoryID}/${subcategoryID}`);\n\n      orderBy.forEach(order => params.append('O', order));\n\n      return await this.api.get('/pub/products/search', { params });\n    } catch (error) {\n      console.error(\n        'Error in VtexCatalogService on method getProductsByCategories',\n        error\n      );\n    }\n\n    return;\n  }\n\n  /**\n   * This function get and return all products by categoryID (Parent) and subcategoryID (child)\n   * and return an array of products.\n   * @param  {String|Number} categoryID\n   * @param  {String|Number} subcategoryID\n   * @return {Array} Array of products.\n   */\n  async getAllProductsByCategories(categoryID, subcategoryID) {\n    try {\n      let products = [];\n      let initial = 0;\n      let end = 49;\n\n      while (true) {\n        const { data, status } = await this.getProductsByCategories(\n          categoryID,\n          subcategoryID,\n          initial,\n          end\n        );\n\n        initial = end + 1;\n        end = end * 2 + 1;\n\n        products = [...products, ...data];\n\n        if (status === 200) {\n          break;\n        }\n      }\n\n      return products;\n    } catch (error) {\n      console.error(\n        'Error in VtexCatalogService on method getAllProductsByCategories',\n        error\n      );\n    }\n\n    return;\n  }\n\n  /**\n   * This function get and return all categories of the category tree.\n   * @return {Array} Array of categories.\n   */\n  async getAllCategories() {\n    try {\n      return await this.api.get('/pub/category/tree/1');\n    } catch (error) {\n      console.error(\n        'Error in VtexCatalogService on method getAllCategories',\n        error\n      );\n    }\n\n    return;\n  }\n\n  /**\n   * @param  {String|Number} productId The id of the product\n   * @return {Object} Product Object with SKUS Variations.\n   */\n  async getProductVariations(productId) {\n    try {\n      return await this.api.get(`/pub/products/variations/${productId}`);\n    } catch (error) {\n      console.error(\n        'Error in VtexCatalogService on method getProductVariations',\n        error\n      );\n    }\n\n    return;\n  }\n}\n","// Components\nimport CustomSelect from 'Components/b8one.customSelect.js';\n\n// Services\nimport CartService from 'Services/b8one.cartService.js';\nimport VtexCatalogService from 'Services/b8one.vtexCatalogService.js';\n\nclass Address {\n  constructor() {\n    this.cartService = new CartService();\n    this.vtexCatalogService = new VtexCatalogService();\n    this.orderForm = {};\n    this.customSelectInstances = [];\n    this.isToAddressUnknown = false;\n    this.basic = false;\n\n    this.init();\n  }\n\n  async init() {\n    this.orderForm = await this.cartService.getCurrent();\n\n    this.eventHandlerBinds();\n    this.createCustomSelect();\n    this.setHandledButtonUnknownAddressClick();\n    this.jumpToConclusions();\n\n    await this.getAddressData();\n  }\n\n  jumpToConclusions = () => {\n    const { customData } = this.orderForm;\n\n    if (!customData) return;\n\n    customData.customApps\n      .filter(customApp => customApp.id === 'selectedcourier')\n      .forEach(customApp => {\n        const { courier_data } = customApp.fields;\n\n        const transporter = JSON.parse(courier_data);\n\n        const { slaName } = transporter.nome;\n\n        if (transporter.nome == 'Básico') {\n          this.basic = true;\n        }\n      });\n  };\n  eventHandlerBinds = () => {\n    this.setHandledButtonSave();\n    this.setHandledFormsChange();\n  };\n\n  setHandledButtonSave() {\n    const buttonSave = document.querySelector('.js-button-save');\n    const buttonNext = document.querySelector('.button--primary');\n\n    buttonSave.addEventListener('click', async e => {\n      document.dispatchEvent(window.initSaveCustomDataEvent);\n\n      await this.saveData();\n\n      document.dispatchEvent(window.endSaveCustomDataEvent);\n    });\n\n    buttonNext.addEventListener('click', async e => {\n      buttonNext.classList.toggle('js-loading');\n      await this.saveData();\n\n      if (this.validateForms()) {\n        buttonNext.classList.toggle('js-loading');\n        if (this.basic == true) {\n          window.location.assign('/resumo');\n        } else {\n          window.location.assign('/seguro-info');\n        }\n      }\n\n      buttonNext.classList.toggle('js-loading');\n    });\n  }\n\n  getAddressFieldsForOrderInfo() {\n    const fieldsWithDefaultData = {\n      to_address_name: 'Sem Endereço',\n      to_address_number: 'Sem Numero',\n      to_address_county: 'Sem Bairro',\n    };\n\n    const orderInfoAddressFields = [...document.forms]\n      .filter(form => form.classList.contains('address__form'))\n      .reduce((obj1, form) => {\n        const addressFields = [...form.elements]\n          .filter(({ type, classList, value, id }) => {\n            if (classList.contains('js-address-complement-to') && value === '')\n              return false;\n\n            if (!id) return false;\n\n            return type !== 'button';\n          })\n          .reduce((obj2, { id, value, checked }) => {\n            if (\n              this.isToAddressUnknown &&\n              fieldsWithDefaultData.hasOwnProperty(id)\n            ) {\n              value = fieldsWithDefaultData[id];\n            }\n\n            return {\n              ...obj2,\n              [id]: checked ? checked : value,\n            };\n          }, {});\n\n        const key = form.classList.contains('js-address-from')\n          ? 'from_address'\n          : 'to_address';\n\n        return {\n          ...obj1,\n          [key]: addressFields,\n        };\n      }, {});\n\n    return orderInfoAddressFields;\n  }\n\n  getAddressForOrderForm(orderInfoAddressFields) {\n    const { to_address } = orderInfoAddressFields;\n\n    const addressFields = {\n      to_city: 'city',\n      to_state: 'state',\n      to_address_name: 'street',\n      to_address_complement: 'complement',\n      to_address_county: 'neighborhood',\n      to_address_number: 'number',\n      to_address_zipcode: 'postalCode',\n    };\n\n    const address = Object.keys(to_address)\n      .filter(key => addressFields.hasOwnProperty(key))\n      .reduce(\n        (obj, key) => {\n          const addressKEY = addressFields[key];\n          const addressValue = to_address[key];\n\n          return { ...obj, [addressKEY]: addressValue };\n        },\n        {\n          addressType: 'residential',\n        }\n      );\n\n    return address;\n  }\n\n  async saveData() {\n    try {\n      const orderInfoAddressFields = this.getAddressFieldsForOrderInfo();\n      const address = this.getAddressForOrderForm(orderInfoAddressFields);\n\n      const needStorageInput = document.querySelector('#store-items-change');\n\n      const fromHomeTypeValue = document.querySelector(\n        '.js-address-from-home-type'\n      );\n      const toHomeTypeValue = document.querySelector(\n        '.js-address-to-home-type'\n      );\n\n      const orderInfoCommonFields = {\n        current_step: 'address',\n        user_need_storage: needStorageInput.checked,\n        home_type: fromHomeTypeValue.value,\n        from_home_type: fromHomeTypeValue.value,\n        to_home_type: toHomeTypeValue.value,\n      };\n\n      const orderInfoFields = {\n        ...orderInfoCommonFields,\n        ...orderInfoAddressFields,\n      };\n\n      const orderInfoFieldsArray = Object.entries(orderInfoFields)\n        .reduce((arr, [key, value]) => {\n          if (['from_address', 'to_address'].includes(key)) {\n            arr = [...arr, ...Object.entries(value)];\n          } else {\n            arr = [...arr, [key, value]];\n          }\n\n          return arr;\n        }, [])\n        .filter(([key, value]) => value !== '');\n\n      const orderInfoFieldsForCustomData = orderInfoFieldsArray.reduce(\n        (obj, [key, value]) => ({ ...obj, [key]: value }),\n        {}\n      );\n\n      await Promise.all([\n        this.cartService.updateCheckoutAddress(address),\n        this.cartService.setMultipleCustomDataFields(\n          'orderinfo',\n          orderInfoFieldsForCustomData\n        ),\n      ]);\n    } catch (err) {\n      console.log(err);\n      return;\n    }\n  }\n\n  createCustomSelect() {\n    const cardSelects = [\n      ...document.querySelectorAll('.address__select-custom'),\n    ];\n\n    cardSelects.forEach((cardSelect, index) => {\n      const selectElement = cardSelect.querySelector('.select__native');\n      const selectCustom = cardSelect.querySelector('.select__custom');\n      const customSelectList = cardSelect.querySelector('.select__list');\n      const customSelectSelected = cardSelect.querySelector(\n        '.select__custom-selected'\n      );\n\n      const customSelectInstance = new CustomSelect({\n        selectElement,\n        customSelectList,\n        customSelectSelected,\n        customSelectListItemClassName: '',\n        customSelectListItemClassNameActive: 'active',\n        selectOpenCallback: () => {\n          this.customSelectInstances.forEach(customSelecItem => {\n            customSelecItem.close();\n          });\n\n          const selectListHeight = customSelectList.offsetHeight;\n\n          selectCustom.classList.add('select__custom--open');\n          selectCustom.style.maxHeight = `${selectListHeight}px`;\n        },\n        selectCloseCallback: () => {\n          selectCustom.classList.remove('select__custom--open');\n          selectCustom.style.maxHeight = 0;\n        },\n      });\n\n      this.customSelectInstances.push(customSelectInstance);\n    });\n  }\n\n  async getAddressData() {\n    const { customData } = await this.cartService.getCurrent();\n\n    if (!customData) return;\n\n    const storeItemsChangeCheckbox = document.querySelector(\n      '#store-items-change'\n    );\n\n    customData.customApps\n      .filter(customApp => customApp.id === 'orderinfo')\n      .forEach(customApp => {\n        Object.entries(customApp.fields).forEach(([id, value]) => {\n          if (id === 'user_need_storage') {\n            if (value.toLowerCase() == 'true') {\n              storeItemsChangeCheckbox.checked = value;\n            }\n          } else if (id.includes('from_') || id.includes('to_')) {\n            const inputElement = document.getElementById(id);\n\n            inputElement.value = value;\n          }\n        });\n      });\n\n    this.customSelectInstances.forEach(customSelectInstance => {\n      customSelectInstance.setCurrentSelectedItem();\n    });\n  }\n\n  handledFormChange(form) {\n    form.addEventListener('change', ({ target }) => {\n      target.classList.remove('address__input--invalid');\n    });\n  }\n\n  setHandledFormsChange() {\n    [...document.forms].forEach(form => this.handledFormChange(form));\n  }\n\n  validateForms() {\n    const validity = ![...document.forms]\n      .map(form => {\n        const inputs = [...form.elements]\n          .filter(input => input.value === '' && input.required)\n          .map(input => {\n            input.classList.add('address__input--invalid');\n\n            form.noValidate = true;\n\n            return input;\n          });\n\n        if (inputs.length === 0) {\n          form.noValidate = false;\n        }\n\n        return form.checkValidity() && !form.noValidate;\n      })\n      .includes(false);\n\n    return validity;\n  }\n\n  setHandledButtonUnknownAddressClick() {\n    const buttonUnknownAddress = document.querySelector(\n      '.js-address-to .address__button'\n    );\n\n    buttonUnknownAddress.addEventListener('click', e => {\n      buttonUnknownAddress.classList.toggle('address__button--mini-active');\n\n      this.isToAddressUnknown = !this.isToAddressUnknown;\n\n      const addressStreetNameElement = document.getElementById(\n        'to_address_name'\n      );\n      const addressZipcodeElement = document.getElementById(\n        'to_address_zipcode'\n      );\n      const addressCountyElement = document.getElementById('to_address_county');\n      const addressNumberElement = document.getElementById('to_address_number');\n\n      [\n        addressStreetNameElement,\n        addressCountyElement,\n        addressNumberElement,\n        addressZipcodeElement,\n      ].forEach(({ parentElement }) => {\n        parentElement.classList.toggle('address__field--required');\n      });\n\n      [\n        addressStreetNameElement,\n        addressCountyElement,\n        addressNumberElement,\n        addressZipcodeElement,\n      ].forEach(element => {\n        element.toggleAttribute('required');\n        element.toggleAttribute('disabled');\n      });\n    });\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', e => {\n  new Address();\n});\n","/**\n * Ensure Abstraction class\n */\nclass Ensure {\n  /**\n   * Ensure value is Undefined\n   * @param {*} value Value to be validated\n   * @return {boolean}\n   */\n  static isUndefined(value = undefined) {\n    return typeof value === 'undefined' ||\n      value === null ||\n      value === '' ||\n      value === {} ||\n      value === [];\n    // || JSON.stringify(value) === JSON.stringify({});\n  }\n\n  /**\n   * Ensure Input validity\n   * @param {*} input to validate\n   * @return {boolean} true if is valid\n   */\n  static isInputValid(input) {\n    return !this.isUndefined(input) && input.checkValidity();\n  }\n\n  /**\n   * Verify if object has properties\n   * @param {Object} object - Object to be verified\n   * @param {Array} props - properties to search on object\n   * @return {Boolean} True if object has all properties\n   */\n  static hasProps(object, props) {\n    const missingPropsResult = this.getMissingProps(object, props);\n    return missingPropsResult.length <= 0;\n  }\n\n  /**\n   * Get Object missing properties\n   * @param {Object} object - Object to be verified\n   * @param {Array} props - properties to search on object\n   * @return {Array} missing properties\n   */\n  static getMissingProps(object, props) {\n    let missingProps = [];\n    [...props].forEach((prop) => {\n      const result = prop in object;\n      if (!result) {\n        missingProps.push(prop);\n      }\n    });\n\n    return missingProps;\n  }\n}\n\nexport default Ensure;\n","export default class CustomSelect {\n  constructor({\n    selectElement,\n    customSelectList,\n    customSelectSelected,\n    customSelectListItemClassName,\n    customSelectListItemClassNameActive,\n    selectChangeCallback,\n    selectOpenCallback,\n    selectCloseCallback,\n  }) {\n    this.isOpen = false;\n\n    this.selectElement =\n      selectElement instanceof Element\n        ? selectElement\n        : document.querySelector(selectElement);\n\n    this.customSelectList =\n      customSelectList instanceof Element\n        ? customSelectList\n        : document.querySelector(customSelectList);\n\n    this.customSelectSelected =\n      customSelectSelected instanceof Element\n        ? customSelectSelected\n        : document.querySelector(customSelectSelected);\n\n    this.selectChangeCallback = selectChangeCallback || new Function();\n    this.selectOpenCallback = selectOpenCallback || new Function();\n    this.selectCloseCallback = selectCloseCallback || new Function();\n    this.customSelectListItemClassName = customSelectListItemClassName || '';\n    this.customSelectListItemClassNameActive =\n      customSelectListItemClassNameActive || '';\n\n    this.setCurrentSelectedItem();\n    this.createSelectList();\n    this.setListenerForCurrentSelected();\n  }\n\n  setCurrentSelectedItem() {\n    let { options, selectedIndex } = this.selectElement;\n\n    this.customSelectSelected.textContent = options[selectedIndex].textContent;\n  }\n\n  handleSelectChange(target) {\n    let { value } = this.selectElement;\n    let { value: newValue } = target.dataset;\n\n    const prevListItemActive = this.customSelectList.querySelector(\n      `.${this.customSelectListItemClassNameActive}`\n    );\n\n    if (prevListItemActive) {\n      prevListItemActive.classList.remove(\n        this.customSelectListItemClassNameActive\n      );\n    }\n\n    target.classList.add(this.customSelectListItemClassNameActive);\n\n    this.close();\n\n    if (value !== newValue) {\n      this.changeOption(newValue);\n    }\n  }\n\n  createSelectList() {\n    [...this.selectElement].forEach(option => {\n      const listItem = document.createElement('li');\n      listItem.setAttribute('class', this.customSelectListItemClassName);\n      listItem.dataset['value'] = option.value;\n\n      listItem.textContent = option.textContent.trim();\n\n      listItem.addEventListener('click', ({ target }) =>\n        this.handleSelectChange(target)\n      );\n\n      this.customSelectList.append(listItem);\n    });\n  }\n\n  setListenerForCurrentSelected() {\n    this.customSelectSelected.addEventListener('click', () => {\n      this.open();\n\n      document.body.addEventListener('click', ({ target }) => {\n        let close = !target.className.includes('custom-select');\n\n        if (close) this.close();\n      });\n    });\n  }\n\n  open(event = null) {\n    this.isOpen = true;\n    this.selectOpenCallback(event);\n    this.customSelectList.classList.add('open');\n  }\n\n  close() {\n    this.isOpen = false;\n    this.selectCloseCallback();\n    this.customSelectList.classList.remove('open');\n  }\n\n  changeOption(value) {\n    this.selectElement.value = value;\n\n    const eventChange = new Event('change', { bubbles: true });\n\n    this.selectElement.dispatchEvent(eventChange);\n\n    this.setCurrentSelectedItem();\n    this.selectChangeCallback({\n      value,\n    });\n  }\n}\n","/* eslint-disable max-len */\nimport { Logger } from './';\n\n/**\n * Helper Abstraction class\n */\nclass Helper {\n  /**\n   * Helper constructor\n   * @param {*} props\n   */\n  constructor(props) {\n    this._logger = new Logger('Ensure');\n    this.props = props || {\n      language: navigator.language || navigator.userLanguage,\n      currency: 'BRL',\n      currencyLocale: 'pt-br',\n      minimumFractionDigits: 2,\n    };\n  }\n\n  /**\n   * format currency\n   * @param {*} value\n   * @param {*} minimumFractionDigits\n   * @return {*}\n   */\n  formatPrice(value) {\n    value = value / 100;\n    value = (value * 1).toFixed(\n      Math.max(0, ~~this.props.minimumFractionDigits)\n    );\n\n    return new Intl.NumberFormat(this.props.currencyLocale, {\n      style: 'currency',\n      currency: this.props.currency,\n      minimumFractionDigits: this.props.minimumFractionDigits,\n    }).format(value);\n  }\n\n  static getParents(elem, selector) {\n    // Element.matches() polyfill\n    if (!Element.prototype.matches) {\n      Element.prototype.matches =\n        Element.prototype.matchesSelector ||\n        Element.prototype.mozMatchesSelector ||\n        Element.prototype.msMatchesSelector ||\n        Element.prototype.oMatchesSelector ||\n        Element.prototype.webkitMatchesSelector ||\n        function(s) {\n          let matches = (this.document || this.ownerDocument).querySelectorAll(\n              s\n            ),\n            i = matches.length;\n\n          while (--i >= 0 && matches.item(i) !== this) {}\n\n          return i > -1;\n        };\n    }\n\n    // Set up a parent array\n    let parents = [];\n\n    // Push each parent element to the array\n    for (; elem && elem !== document; elem = elem.parentNode) {\n      if (selector) {\n        if (elem.matches(selector)) {\n          parents.push(elem);\n        }\n\n        continue;\n      }\n\n      parents.push(elem);\n    }\n\n    // Return our parent array\n    return parents;\n  }\n\n  static serializeForm(form) {\n    // Setup our serialized data\n    let serialized = [];\n\n    // Loop through each field in the form\n    for (let i = 0; i < form.elements.length; i++) {\n      let field = form.elements[i];\n\n      // Don't serialize fields without a name, submits, buttons, file and reset inputs, and disabled fields\n      if (\n        !field.name ||\n        field.disabled ||\n        field.type === 'file' ||\n        field.type === 'reset' ||\n        field.type === 'submit' ||\n        field.type === 'button'\n      )\n        continue;\n\n      // If a multi-select, get all selections\n      if (field.type === 'select-multiple') {\n        for (let n = 0; n < field.options.length; n++) {\n          if (!field.options[n].selected) continue;\n\n          serialized.push(\n            encodeURIComponent(field.name) +\n              '=' +\n              encodeURIComponent(field.options[n].value)\n          );\n        }\n      }\n\n      // Convert field data to a query string\n      else if (\n        (field.type !== 'checkbox' && field.type !== 'radio') ||\n        field.checked\n      ) {\n        serialized.push(\n          encodeURIComponent(field.name) + '=' + encodeURIComponent(field.value)\n        );\n      }\n    }\n\n    return serialized.join('&');\n  }\n\n  static getFormData(form) {\n    // Setup our serialized data\n    let data = {};\n\n    // Loop through each field in the form\n    for (let i = 0; i < form.elements.length; i++) {\n      let field = form.elements[i];\n\n      // Don't serialize fields without a name, submits, buttons, file and reset inputs, and disabled fields\n      if (\n        !field.name ||\n        field.disabled ||\n        field.type === 'file' ||\n        field.type === 'reset' ||\n        field.type === 'submit' ||\n        field.type === 'button'\n      )\n        continue;\n\n      // If a multi-select, get all selections\n      if (field.type === 'select-multiple') {\n        for (let n = 0; n < field.options.length; n++) {\n          if (!field.options[n].selected) continue;\n\n          data[field.name] = field.options[n].value;\n        }\n      }\n\n      // Convert field data to a query string\n      else if (\n        (field.type !== 'checkbox' && field.type !== 'radio') ||\n        field.checked\n      ) {\n        data[field.name] = field.value;\n      }\n    }\n\n    return data;\n  }\n\n  static getRandomID() {\n    // Generate unique IDs for use as pseudo-private/protected names.\n    // Similar in concept to\n    // <http://wiki.ecmascript.org/doku.php?id=strawman:names>.\n    //\n    // The goals of this function are twofold:\n    //\n    // * Provide a way to generate a string guaranteed to be unique when compared\n    //   to other strings generated by this function.\n    // * Make the string complex enough that it is highly unlikely to be\n    //   accidentally duplicated by hand (this is key if you're using `ID`\n    //   as a private/protected name on an object).\n    //\n    // Use:\n    //\n    //     var privateName = ID();\n    //     var o = { 'public': 'foo' };\n    //     o[privateName] = 'bar';\n\n    // Math.random should be unique because of its seeding algorithm.\n    // Convert it to base 36 (numbers + letters), and grab the first 9 characters\n    // after the decimal.\n\n    return (\n      '_' +\n      Math.random()\n        .toString(36)\n        .substr(2, 9)\n    );\n  }\n\n  static setCookie(cname, cvalue, exdays) {\n    const date = new Date();\n\n    date.setTime(date.getTime() + exdays * 24 * 60 * 60 * 1000);\n\n    const expires = 'expires=' + date.toUTCString();\n\n    document.cookie = `${cname}=${cvalue};${expires};path=/`;\n  }\n\n  static getCookie(cname) {\n    const decodedCookie = decodeURIComponent(document.cookie);\n\n    const cookie = decodedCookie\n      .split(';')\n      .filter(cookie => cookie.includes(cname))[0];\n\n    return cookie || '';\n  }\n\n  static isInViewport(element) {\n    const heightViewport =\n      window.innerHeight || document.documentElement.clientHeight;\n\n    const widthViewport =\n      window.innerWidth || document.documentElement.clientWidth;\n\n    const { top, right, bottom, left } = element.getBoundingClientRect();\n\n    return (\n      top >= 0 &&\n      left >= 0 &&\n      bottom <= heightViewport &&\n      right <= widthViewport\n    );\n  }\n\n  static removeAccents(str) {\n    const mapAccents = {\n      a: 'á|à|ã|â|À|Á|Ã|Â',\n      e: 'é|è|ê|É|È|Ê',\n      i: 'í|ì|î|Í|Ì|Î',\n      o: 'ó|ò|ô|õ|Ó|Ò|Ô|Õ',\n      u: 'ú|ù|û|ü|Ú|Ù|Û|Ü',\n      c: 'ç|Ç',\n      n: 'ñ|Ñ',\n    };\n\n    for (let pattern in mapAccents) {\n      str = str.replace(new RegExp(mapAccents[pattern], 'g'), pattern);\n    }\n\n    return str;\n  }\n}\n\nexport default Helper;\n","/* eslint no-console: 0 */\n\n/**\n * Logger Abstraction class\n */\nclass Logger {\n  /**\n   * Logger constructor\n   * @param {string} logName Application name to log\n   */\n  constructor(logName = 'B8ONE Logger Component') {\n    this.logName = logName;\n  }\n\n  /**\n   * Log error message\n   * @param {*} message - Message text\n   * @param {*} errorObj - Message object\n   */\n  error(message = '', errorObj = {}) {\n    console.error(message, errorObj);\n  }\n\n  /**\n   * Log information message\n   * @param {*} message - Message text\n   */\n  info(message = '') {\n    console.info(message);\n  }\n\n  /**\n   * Log warning message\n   * @param {*} message - Message text\n   */\n  warning(message = '') {\n    console.warn(this.logName, message);\n  }\n\n  /**\n   * Generic log\n   * @param {String} message - log's message\n   */\n  log(message = '') {\n    console.log(message);\n  }\n\n  /**\n   * Generic log\n   * @param {String} message - log's message\n   * @param {*} object - object to be logged\n   */\n  log(message = '', object = {}) {\n    console.log(message, object);\n  }\n}\n\nexport default Logger;\n","/* eslint-disable max-len */\n\nimport { Ensure, Logger } from '../common';\nimport HttpClient from './b8one.httpClient';\n\n/**\n * Cart Abstraction class\n */\nclass CartService {\n  /**\n   * Cart constructor\n   */\n  constructor() {\n    this._VTEX_API_ENDPOINT = '/api/checkout/pub/orderForm';\n\n    this._logger = new Logger('Cart service');\n    this._httpClient = new HttpClient();\n  }\n\n  /**\n   * Get current cart\n   * @return {*} Cart object\n   */\n  async getCurrent() {\n    return await this._httpClient.get(this._VTEX_API_ENDPOINT);\n  }\n\n  /**\n   * Add item to cart\n   * @param {*} skuId - Product sku Id (SKU)\n   * @param {*} productQuantity - Product Quantity\n   * @param {*} sellerId - Seller id\n   */\n  async add(skuId, productQuantity, sellerId = 1) {\n    // const payload = this._payloadFactory(skuId, productQuantity, sellerId);\n\n    if (!Ensure.isUndefined(skuId)) {\n      const current = await this.getCurrent();\n      const indexFound = current.items.findIndex(x => x.id === skuId);\n\n      if (indexFound > -1) {\n        productQuantity =\n          parseInt(productQuantity) +\n          parseInt(current.items[indexFound].quantity);\n      }\n\n      const endpointUrl = `${this._VTEX_API_ENDPOINT}/${current.orderFormId}/items`;\n\n      const payload = {\n        orderItems: [\n          {\n            seller: sellerId.toString(),\n            quantity: parseInt(productQuantity),\n            id: skuId.toString(),\n          },\n        ],\n      };\n\n      return this._httpClient.patch(endpointUrl, payload);\n    }\n  }\n\n  async checkoutCRUD(skus) {\n    let { items } = await window.vtexjs.checkout.getOrderForm();\n\n    const skusCustomProducts = this.getCustomProducts(skus);\n\n    skus = skus.filter(sku => !sku.isCustom);\n    skus = [...skus, ...skusCustomProducts];\n\n    const skuToIgnore = [19, 698, 25, 26];\n\n    const indexToRemove = items.reduce((indexList, item, index) => {\n      const customProductSKUs = [25, 26];\n\n      if (customProductSKUs.includes(parseInt(item.id))) {\n        return [...indexList, index];\n      }\n\n      return indexList;\n    }, []);\n\n    if (indexToRemove.length > 0) {\n      const response = await this.removeMoreProducts(indexToRemove);\n\n      response && (items = response.items);\n    }\n\n    const productsToAdd = skus\n      .filter(sku => sku.quantity > 0)\n      .filter(sku => {\n        let index = items.findIndex(\n          item => parseInt(item.productId) === parseInt(sku.productId)\n        );\n\n        return index === -1 && sku.quantity > 0;\n      })\n      .map(sku => ({\n        quantity: sku.quantity,\n        seller: 1,\n        id: sku.skuId || sku.id,\n      }));\n\n    console.log('productsToAdd', productsToAdd);\n\n    const productsToUpdate = skus\n      .filter(sku => sku.quantity > 0)\n      .filter(sku => {\n        const id = sku.skuId || sku.id;\n\n        let index = items.findIndex(item => parseInt(item.id) === parseInt(id));\n\n        if (index !== -1) {\n          const sameSku = parseInt(items[index].id) === parseInt(sku.id);\n          const diffQuantity =\n            parseInt(items[index].quantity) !== parseInt(sku.quantity);\n\n          return sameSku && diffQuantity && sku.quantity > 0;\n        }\n\n        return false;\n      })\n      .map(sku => {\n        const id = sku.skuId || sku.id;\n\n        let index = items.findIndex(item => parseInt(item.id) === parseInt(id));\n\n        return {\n          index,\n          quantity: sku.quantity,\n        };\n      });\n\n    console.log('productsToUpdate', productsToUpdate);\n\n    const productsToReplaceSKU = skus\n      .filter(\n        sku =>\n          sku.quantity > 0 &&\n          !skuToIgnore.includes(parseInt(sku.skuId || sku.id))\n      )\n      .filter(sku => {\n        const index = items.findIndex(\n          item => parseInt(item.productId) === parseInt(sku.productId)\n        );\n\n        if (index !== -1) {\n          const diffSku = parseInt(items[index].id) !== parseInt(sku.skuId);\n\n          return diffSku;\n        }\n\n        return false;\n      })\n      .map(sku => {\n        const index = items.findIndex(\n          item => parseInt(item.productId) === parseInt(sku.productId)\n        );\n\n        const oldSKU = {\n          index,\n          seller: 1,\n          quantity: 0,\n        };\n\n        const newSKU = {\n          seller: 1,\n          id: sku.skuId,\n          quantity: sku.quantity,\n        };\n\n        return [oldSKU, newSKU];\n      })\n      .reduce((itemsList, current) => {\n        const [oldSKU, newSKU] = current;\n\n        return [...itemsList, oldSKU, newSKU];\n      }, []);\n\n    console.log('productsToReplaceSKU', productsToReplaceSKU);\n\n    const productsToRemove = skus\n      .filter(sku => sku.quantity < 1)\n      .filter(sku => {\n        const id = sku.skuId || sku.id;\n\n        let index = items.findIndex(item => parseInt(item.id) === parseInt(id));\n\n        if (index !== -1) {\n          return sku.quantity == 0;\n        }\n\n        return false;\n      })\n      .map(sku => {\n        const id = sku.skuId || sku.id;\n\n        let index = items.findIndex(item => parseInt(item.id) === parseInt(id));\n\n        return {\n          index,\n          quantity: 0,\n        };\n      });\n\n    console.log('productsToRemove', productsToRemove);\n\n    if (productsToUpdate[0]) {\n      await window.vtexjs.checkout.updateItems(productsToUpdate, null, false);\n    }\n\n    if (productsToReplaceSKU[0]) {\n      await window.vtexjs.checkout.replaceSKU(productsToReplaceSKU);\n    }\n\n    if (productsToRemove[0]) {\n      await window.vtexjs.checkout.removeItems(productsToRemove);\n    }\n\n    if (productsToAdd[0]) {\n      await window.vtexjs.checkout.addToCart(productsToAdd, null);\n    }\n  }\n\n  getCustomProducts(skus) {\n    const customProducts = {};\n\n    skus\n      .filter(({ isCustom }) => isCustom === true)\n      .forEach(({ skuId, quantity, customProductItem }) => {\n        let currentCustomProduct = customProducts[skuId];\n\n        const customProductQuantity =\n          parseInt(customProductItem.quantity) * parseInt(quantity);\n\n        if (currentCustomProduct) {\n          const newQuantity =\n            parseInt(currentCustomProduct.quantity) + customProductQuantity;\n\n          currentCustomProduct = {\n            ...currentCustomProduct,\n            quantity: newQuantity,\n          };\n        } else {\n          currentCustomProduct = {\n            ...customProductItem,\n            quantity: customProductQuantity,\n            isCustom: true,\n          };\n        }\n\n        customProducts[skuId] = currentCustomProduct;\n      });\n\n    return Object.values(customProducts);\n  }\n\n  async getProductIndexInOrderForm(productId) {\n    const { items } = await this.getCurrent();\n\n    const index = items.findIndex(item => item.productId == productId);\n\n    if (index !== -1) return index;\n\n    return;\n  }\n\n  /**\n   * Remove item to cart\n   * @param {JSON} itemIndex - Product item index to be removed\n   */\n  async remove(itemIndex) {\n    const current = await this.getCurrent();\n    const endpointUrl = `${this._VTEX_API_ENDPOINT}/${current.orderFormId}/items`;\n    const payload = {\n      orderItems: [\n        {\n          index: itemIndex,\n          quantity: 0,\n        },\n      ],\n      expectedOrderFormSections: ['items'],\n      noSplitItem: true,\n    };\n\n    await this._httpClient.patch(endpointUrl, payload);\n  }\n\n  /**\n   * Remove items of cart\n   * @param {Array} itemsIndex - Products items index to be removed\n   */\n  async removeMoreProducts(itemsIndex) {\n    const current = await this.getCurrent();\n    const endpointUrl = `${this._VTEX_API_ENDPOINT}/${current.orderFormId}/items`;\n    const payload = {\n      orderItems: itemsIndex.map(index => ({\n        index,\n        quantity: 0,\n      })),\n      expectedOrderFormSections: ['items'],\n      noSplitItem: true,\n    };\n\n    return await this._httpClient.patch(endpointUrl, payload);\n  }\n\n  async updateProduct(skuId, quantity, seller = 1) {\n    const newSKU = {\n      seller,\n      quantity,\n      id: skuId,\n    };\n\n    return await this.updateProducts([newSKU]);\n  }\n\n  async updateProducts(skus) {\n    const { items, orderFormId } = await this.getCurrent();\n\n    skus = skus\n      .map(({ id, quantity, seller }) => {\n        const index = items.findIndex(\n          item => parseInt(item.id) === parseInt(id)\n        );\n\n        return {\n          id,\n          index,\n          quantity,\n          seller: seller || 1,\n        };\n      })\n      .filter(sku => sku.index !== -1);\n\n    if (skus.length > 0) {\n      const payload = {\n        orderItems: skus,\n      };\n\n      return await this._httpClient.patch(\n        `/api/checkout/pub/orderForm/${orderFormId}/items`,\n        payload\n      );\n    }\n  }\n\n  async simulateOrderForm(postalCode, country = 'BRA') {\n    try {\n      await vtexjs.checkout.getOrderForm();\n\n      const orderForm = await vtexjs.checkout.calculateShipping({\n        postalCode,\n        country,\n      });\n\n      return orderForm;\n    } catch (error) {\n      console.error('Error in simulateOrderForm', error);\n    }\n  }\n\n  async simulateShipping(items, postalCode, country = 'BRA') {\n    const orderFormSimulated = await vtexjs.checkout.simulateShipping(\n      items,\n      postalCode,\n      country\n    );\n\n    return orderFormSimulated;\n  }\n\n  async updateCheckoutTransporterSLA(logisticsInfo) {\n    await vtexjs.checkout.getOrderForm();\n\n    const { shippingData } = vtexjs.checkout.orderForm;\n\n    shippingData.logisticsInfo = logisticsInfo;\n\n    await vtexjs.checkout.sendAttachment('shippingData', shippingData);\n  }\n\n  async updateCheckoutAddress(address) {\n    console.log(address);\n    await vtexjs.checkout.getOrderForm();\n\n    const { shippingData } = vtexjs.checkout.orderForm;\n\n    shippingData.availableAddresses = [\n      {\n        ...shippingData.address,\n        ...address,\n      },\n    ];\n\n    shippingData.selectedAddresses = [\n      {\n        ...shippingData.address,\n        ...address,\n      },\n    ];\n\n    shippingData.address = {\n      ...shippingData.address,\n      ...address,\n    };\n\n    return await vtexjs.checkout.sendAttachment('shippingData', shippingData);\n  }\n\n  async setMultipleCustomDataFields(appName, fields) {\n    const { orderFormId } = await this.getCurrent();\n\n    const endpoint = `/api/checkout/pub/orderForm/${orderFormId}/customData/${appName}`;\n\n    try {\n      return await this._httpClient.put(endpoint, fields);\n    } catch (error) {\n      console.error('setMultipleCustomDataFields', error);\n    }\n\n    return;\n  }\n\n  async setSingleCustomDataField(appName, appFieldName, appFieldValue) {\n    const { orderFormId } = await this.getCurrent();\n\n    const endpoint = `/api/checkout/pub/orderForm/${orderFormId}/customData/${appName}/${appFieldName}`;\n\n    const payload = { value: appFieldValue };\n\n    try {\n      return await this._httpClient.put(endpoint, payload);\n    } catch (error) {\n      console.error('setSingleCustomDataField', error);\n    }\n\n    return;\n  }\n\n  async removeSingleCustomDataField(appName, appFieldName) {\n    const { orderFormId } = await this.getCurrent();\n\n    const endpoint = `/api/checkout/pub/orderForm/${orderFormId}/customData/${appName}/${appFieldName}`;\n\n    const payload = { value: null };\n\n    try {\n      return await this._httpClient.delete(endpoint, payload);\n    } catch (error) {\n      console.error('removeSingleCustomDataField', error);\n    }\n\n    return;\n  }\n\n  /**\n   * Cart's payload method factory\n   * @param {*} skuId - Product Id (SKU)\n   * @param {*} productQuantity - Product Quantity\n   * @param {*} sellerId - Seller id\n   * @return {JSON} cart paylod\n   */\n  _payloadFactory(skuId, productQuantity, sellerId = 1) {\n    return {\n      id: skuId,\n      quantity: productQuantity,\n      seller: sellerId,\n    };\n  }\n}\n\nexport default CartService;\n","import fetch from 'unfetch';\nimport { Ensure, Logger } from '../common';\n\n/**\n * HttpClient Abstraction class\n */\nclass HttpClient {\n  /**\n   * HttpClient constructor\n   */\n  constructor() {\n    this._logger = new Logger('httpClient');\n  }\n\n  /**\n   * Get\n   * @param {String} endpointUrl\n   * @return {Promise}\n   */\n  get(endpointUrl) {\n    if (!Ensure.isUndefined(endpointUrl)) {\n      return this._execute(endpointUrl, 'GET');\n    }\n  }\n\n  /**\n   * Delete\n   * @param {String} endpointUrl\n   * @return {Promise}\n   */\n  delete(endpointUrl) {\n    if (!Ensure.isUndefined(endpointUrl)) {\n      return this._execute(endpointUrl, 'DELETE');\n    }\n  }\n\n  /**\n   *\n   * @param {String} endpointUrl\n   * @param {JSON} payload\n   * @return {Promise}\n   */\n  post(endpointUrl, payload = {}) {\n    if (!Ensure.isUndefined(endpointUrl)) {\n      return this._execute(endpointUrl, 'POST', payload);\n    }\n  }\n\n  /**\n   *\n   * @param {String} endpointUrl\n   * @param {JSON} payload\n   * @return {Promise}\n   */\n  put(endpointUrl, payload) {\n    if (!Ensure.isUndefined(endpointUrl) && !Ensure.isUndefined(payload)) {\n      return this._execute(endpointUrl, 'PUT', payload);\n    }\n  }\n\n  /**\n   *\n   * @param {String} endpointUrl\n   * @param {JSON} payload\n   * @return {Promise}\n   */\n  patch(endpointUrl, payload) {\n    if (!Ensure.isUndefined(endpointUrl) && !Ensure.isUndefined(payload)) {\n      return this._execute(endpointUrl, 'PATCH', payload);\n    }\n  }\n\n  /**\n   * @param {String} endpointUrl\n   * @param {String} httpVerb\n   * @param {Object} payload\n   * @return {Promise}\n   */\n  _execute(endpointUrl, httpVerb, payload) {\n    let header = {\n      method: httpVerb,\n      headers: {\n        // 'Accept': 'application/vnd.vtex.ds.v10+json',\n        // 'Content-Type': 'application/json',\n        accept: 'application/vnd.vtex.masterdata.v10+json',\n        'content-type': 'application/json; charset=utf-8',\n      },\n    };\n\n    if (payload) {\n      header['body'] = JSON.stringify(payload);\n    }\n\n    return fetch(endpointUrl, header)\n      .then(this.validateResponse)\n      .then(this.parseResponseToJson)\n      .then(data => {\n        return data;\n      })\n      .catch(error => {\n        this._logger.log('Request succeeded with JSON response', error);\n        return error;\n      });\n  }\n\n  /**\n   * Parse response data to json object\n   * @param {*} response - Request response\n   * @return {JSON} json data\n   */\n  async parseResponseToJson(response) {\n    if (!response.ok) {\n      return response;\n    }\n\n    return await response.json();\n  }\n\n  /**\n   * Response validation\n   * @param {*} response\n   * @return {Promise} promise result\n   */\n  validateResponse(response) {\n    if (response.ok) {\n      return Promise.resolve(response);\n    } else {\n      return Promise.reject(new Error(response.statusText));\n    }\n  }\n}\n\nexport default HttpClient;\n"],"sourceRoot":""}