/* LAPTOP-T0P1H0OI - 25/11/2021 14:35:06 GMT */
$(function(){setTimeout(function(){$("body.body-order-form #ship-more-info").attr("maxlength","60")},3500);$(window).on("hashchange",function(e){if(window.location.hash=="#/shipping"){setTimeout(function(){$("body.body-order-form #ship-more-info").attr("maxlength","60")},3500)}})});var Checkout={buyerIdentity:false,init:function(){},ajaxStop:function(){},windowOnload:function(){Checkout.waitApi();Checkout.findPaymentForBuyer()},setCustomData:function(reseller,resellerEmail){vtexjs.checkout.getOrderForm().done(function(orderForm){$.ajax({type:"PUT",method:"PUT",url:"/api/checkout/pub/orderForm/"+orderForm.orderFormId+"/customData/sellerkind",dataType:"json",data:JSON.stringify({kind:reseller,email:resellerEmail}),headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"}}).done(function(data){Checkout.waitApi()})})},differentEmail:function(){if(window.location.href.indexOf("revendedor.provanza")==-1)return;vtexjs.checkout.getOrderForm().done(function(orderForm){var email=orderForm.clientProfileData.email;$.ajax({url:"/api/dataentities/CL/search?email="+email+"&_fields=id,pertenceRedeFranqueado,retiraNaLoja",type:"GET",dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json"},success:function(data){Checkout.setCustomData(data[0].pertenceRedeFranqueado,email)}})})},waitApi:function(){var interval=1e3;var setInt=setInterval(function(){if(window.location.href.indexOf("payment")==-1){return}if($(".resellerV2 , .franqueeV2").length>0){myStopFunction();return}if(vtexjs.checkout.orderForm.clientProfileData.email!==vtexjs.checkout.orderForm.customData.customApps[0].fields.email){Checkout.differentEmail()}if(vtexjs.checkout.orderForm.paymentData.payments[0]&&vtexjs.checkout.orderForm.paymentData.payments[0].paymentSystem&&vtexjs.checkout.orderForm.clientProfileData.email==vtexjs.checkout.orderForm.customData.customApps[0].fields.email){Checkout.findPaymentForBuyer()}},interval);function myStopFunction(){clearInterval(setInt)}setInt},findPaymentForBuyer:function(){var boleto='{"payments":[{"paymentSystem":6,"paymentSystemName":"Boleto Bancário","group":"bankInvoicePaymentGroup","installments":1,"installmentsInterestRate":0,"installmentsValue":70719,"value":70719,"referenceValue":70719}],"giftCards":[],"expectedOrderFormSections":["items","totalizers","clientProfileData","shippingData","paymentData","sellers","messages","marketingData","clientPreferencesData","storePreferencesData","giftRegistryData","ratesAndBenefitsData","openTextField","commercialConditionData","customData"]}';var notaPromissoria='{"payments":[{"paymentSystem":201,"paymentSystemName":"Promissória","group":"custom201PaymentGroupPaymentGroup","installments":1,"installmentsInterestRate":0,"installmentsValue":70719,"value":70719,"referenceValue":70719}],"giftCards":[],"expectedOrderFormSections":["items","totalizers","clientProfileData","shippingData","paymentData","sellers","messages","marketingData","clientPreferencesData","storePreferencesData","giftRegistryData","ratesAndBenefitsData","openTextField","commercialConditionData","customData"]}';if(vtexjs.checkout.orderForm.customData.customApps[0].fields.kind=="true"){$("#payment-group-custom201PaymentGroupPaymentGroup").click();Checkout.changePayment(notaPromissoria,false)}if(vtexjs.checkout.orderForm.customData.customApps[0].fields.kind=="false"){$("#payment-group-bankInvoicePaymentGroup").click();Checkout.changePayment(boleto,true)}},changePayment:function(payments,reseller){var orderFormId=vtexjs.checkout.orderForm.orderFormId;$.ajax({type:"POST",method:"POST",url:"/api/checkout/pub/orderForm/"+orderFormId+"/attachments/paymentData",data:payments,dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"}}).done(function(data){if(vtexjs.checkout.orderForm.paymentData.payments[0]==undefined)return;if(vtexjs.checkout.orderForm.paymentData.payments[0].paymentSystem=="6"&&reseller){$("body").addClass("resellerV2")}if(vtexjs.checkout.orderForm.paymentData.payments[0].paymentSystem=="201"&&!reseller){$("body").addClass("franqueeV2")}})}};Checkout.init();$(document).ajaxStop(function(){Checkout.ajaxStop()});window.addEventListener("load",function(event){Checkout.windowOnload()});