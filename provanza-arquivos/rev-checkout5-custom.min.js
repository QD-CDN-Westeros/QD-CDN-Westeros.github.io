/* LAPTOP-T0P1H0OI - 25/11/2021 14:35:07 GMT */
$(function(){var exec=function(){if(!API.orderForm||API.orderForm.salesChannel!=3||!API.orderForm.clientProfileData&&!$(document.body).is("[data-mz-reseller]"))return;$.ajax({url:"/api/dataentities/CL/search?email="+API.orderForm.clientProfileData.email+"&_fields=id,pertenceRedeFranqueado,retiraNaLoja",type:"GET",dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json"},success:function(data){if(!data.length){$(document.body).attr("data-mz-reseller","not-reseller");return}var isReseller="reseller";if(data[0].pertenceRedeFranqueado&&data[0].retiraNaLoja=="SIM"){isReseller="franquee";$(document.body).attr("data-mz-reseller",isReseller);window.onload=function(){document.getElementById("payment-group-custom201PaymentGroupPaymentGroup").click()}}else{$(document.body).attr("data-mz-reseller",isReseller);window.onload=function(){document.getElementById("payment-group-bankInvoicePaymentGroup").click()}}var wrapper=$(".address-banner-franquee");if(!wrapper.length)wrapper=$('<div class="address-banner-franquee"><h6>Endereço de Retirada</h6><img src="/arquivos/mz-banner-franquee-checkout.png"></div>').insertAfter(".shipping-summary-placeholder > .address");if(isReseller=="franquee"){var clientId=data[0].id;$.ajax({url:"/api/dataentities/AD/search?userId="+clientId+"&_fields=addressName,addressType,city,complement,country,countryfake,geoCoordinate,neighborhood,nomeLoja,number,postalCode,receiverName,reference,state,street,userId",type:"GET",dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json"},success:function(data){if(!data.length)return;var addressId=data[0].id;var wrapper=$(".address-banner-franquee");if(!wrapper.length)wrapper=$('<div class="address-banner-franquee"><h6>Endereço de Retirada</h6><img src="/arquivos/mz-banner-franquee-checkout.png"></div>').insertAfter(".shipping-summary-placeholder > .address");if(!!(API.orderForm.shippingData&&API.orderForm.shippingData.address)){var addressFormId=API.orderForm.shippingData.address.addressId;if($.cookie("MzFranqueeId")==clientId+"-"+addressId+"-"+addressFormId)return}data[0].country="BRA";vtexjs.checkout.calculateShipping(data[0]).done(function(orderForm){$.cookie("MzFranqueeId",clientId+"-"+addressId+"-"+orderForm.shippingData.address.addressId,{path:"/"})})}})}}})};exec();$(window).on("orderFormUpdated.vtex componentDone.vtex",exec)});