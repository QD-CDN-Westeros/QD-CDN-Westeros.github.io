/* DESKTOP-EDHHJGO - 23/08/2022 11:26:06 GMT */
"use strict";var theGoogleMapsPlaces;var theGoogleMapsLocationSorts;var theGoogleMapsCity;var theGoogleMapsNeighborhood;var theGoogleMapsState;var theGoogleMapsZipCode;var typingTimer;var doneTypingInterval=1e3;$(document).on("ready",function(){var cookie=document.cookie;if(cookie.indexOf("userCityUF")==-1){return}else{$(".geolocation-modal__wrapper").hide();$("body").css("overflow","scroll");$(".mz-user-location__description").html(getCookieJobspace("userCityUF")).addClass("on")}});$(document).on("click",".mz-user-location__description.on",function(){var modal=$(".geolocation-modal__wrapper");var bodyModal=$(".geolocation-modal__content");var inputElement=$(".geolocation-modal__wrapper input");var bodyOverflow=$("body");var modalClose=$(".geolocation-modal__close");$(".geolocation-modal__inner").each(function(e){var onElement=$(this).children(".on");modalClose.addClass("newOn");bodyOverflow.css("overflow","hidden");onElement.removeClass("on");bodyModal.show();inputElement.val("");modal.show()})});$(document).on("click",".geolocation-modal__content-get",function(){getLocation();$(".geolocation-modal__content-loading").show()});$(document).on("keyup",".geolocation-modal__content-input input",function(){var cepDigit=$(this).val();if(!cepDigit){return}else{theGoogleMapsPlaces=new google.maps.places.Autocomplete(document.getElementById("geolocation-modal__content-input"),{language:"pt-BR",componentRestrictions:{country:"br"},types:["(regions)"]});theGoogleMapsLocationSorts=new google.maps.event.addListener(theGoogleMapsPlaces,"place_changed",function(){if(!theGoogleMapsZipCode){return}else{theGoogleMapsZipCode=theGoogleMapsPlaces.getPlace().address_components.find(function(item){return item.types[0]=="postal_code"})}theGoogleMapsNeighborhood=theGoogleMapsPlaces.getPlace().address_components.find(function(item){return item.types[0]=="sublocality_level_1"});theGoogleMapsCity=theGoogleMapsPlaces.getPlace().address_components.find(function(item){return item.types[0]=="administrative_area_level_2"});theGoogleMapsState=theGoogleMapsPlaces.getPlace().address_components.find(function(item){return item.types[0]=="administrative_area_level_1"})})}});$("body").on("click",".geolocation-modal__content-input button",function(){var cepNumber=$(".geolocation-modal__content-input input").val().replace("-","");if(!parseFloat(cepNumber)){showPositionInput()}else{if(!cepNumber||!cepNumber.length){alert("Insira um Cep");return}else{var postalCode=cepNumber;wl_getCEP(postalCode);$(".geolocation-modal__content-input button").text("BUSCANDO");$(".geolocation-modal__content-loading").show();setTimeout(function(){$(".geolocation-modal__content-input button").text("BUSCAR");$(".geolocation-modal__content-loading").hide()},5e3)}}});function getCookieJobspace(cname){var name=cname+"=";var decodedCookie=decodeURIComponent(document.cookie);var ca=decodedCookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1)}if(c.indexOf(name)==0){return c.substring(name.length,c.length)}}return""}$(".geolocation-modal__close").on("click",function(){$(".geolocation-modal__wrapper").fadeOut("fast");$("body").css("overflow","scroll")});$(".user-location__city").on("click",function(){$(".geolocation-modal__wrapper").fadeIn("fast")});$(document).ready(function(){var currentPostalCode=getCookieJobspace("jb-zipCodeCurrent");var currentCity=getCookieJobspace("userCityName");var currentCep=getCookieJobspace("userCityCep");if(currentCity!=""||currentCep!=""){wl_getCEP(currentPostalCode);$(".user-location__city").html("<strong>"+getCookieJobspace("userCityName")+"</strong>");$(".geolocation-modal__wrapper").hide();$(".user-location").show()}else{$(".geolocation-modal__wrapper").show();$("body").css("overflow","hidden")}});function wl_submit(city,postalCode){if(postalCode.indexOf("-")!=-1){postalCode=postalCode.replace("-","")}changeWhitelabel(postalCode)}function changeWhitelabel(postalCode){var info={public:{country:{value:"BRA"},postalCode:{value:postalCode}}};var sellerId=checkSeller(postalCode);setCookieJobspace("jb-zipCodeCurrent",postalCode,3e5);setCookieJobspace("jb-zipLocationSellerId",sellerId,3e5);console.log("WhiteLabel - Seller atualizado para: ",sellerId);$.ajax({url:"/api/sessions/",type:"POST",contentType:"application/json",async:!1,data:JSON.stringify(info),success:function success(data){getSessionVtex();changeCEP(postalCode)},error:function error(data){console.log("Erro: ",data)}})}function checkSeller(postalcode){var seller=1;$.ajax({url:"/api/checkout/pub/regions?country=BRA&postalCode="+postalcode,type:"GET",contentType:"application/json; charset=utf-8",success:function success(res){console.log("checkSeller():",res[0]);if(res[0].sellers.length>0){seller=res[0].sellers[0].id}else{seller=1}}});return seller}function getSessionVtex(){vtexjs.session.setSessionParams().done(function(data){var vtexSegmentToken=data.segmentToken;var vtexSessionToken=data.sessionToken;$.ajax({url:"/api/sessions/"+vtexSessionToken+"?items=*",type:"GET",success:function success(data){console.log(data)},error:function error(data){console.log("Erro: ",data)}});$.ajax({url:"/api/segments/"+vtexSegmentToken,type:"GET",async:true,success:function success(data){console.log(data)},error:function error(data){console.log("Erro: ",data)}})})}function changeCEP(cep){var currentPostalCode=cep;vtexjs.checkout.getOrderForm().then(function(){var postalCode=currentPostalCode;var country="BRA";var address={postalCode:postalCode,country:country};return vtexjs.checkout.calculateShipping(address)}).done(function(){document.location.reload()}).fail(function(data){console.log("changeCEP() Erro: ",data)})}function wl_getCEP(postalCode){var cityFound=false;$.ajax({url:"https://viacep.com.br/ws/".concat(postalCode,"/json"),type:"GET",cache:false,async:false,contentType:"application/json",dataType:"json"}).done(function(dados){var citySelected=dados.localidade;var cityFound="".concat(citySelected," - ").concat(dados.uf);var uf=dados.uf;if(uf==="PR"||uf==="SC"){setCookieJobspace("userCityUF",cityFound,3e5);$("body").css("overflow","scroll");$(".mz-user-location__description").html(getCookieJobspace("userCityUF")).addClass("on");$(".geolocation-modal-shop, .geolocation-modal__close").addClass("on");$(".geolocation-modal__content").hide();$(".geolocation-modal-shop__body--button").on("click",function(){$(".geolocation-modal__wrapper").hide("on")})}else{$(".geolocation-modal__content").hide();$(".geolocation-modal-sorry").addClass("on");$(".geolocation-modal-sorry__body--button").on("click",function(){$(".geolocation-modal-sorry").removeClass("on");$(".geolocation-modal__content").show()});return}})}function setCookieJobspace(cname,cvalue,exdays){var d=new Date;d.setTime(d.getTime()+exdays*24*60*60*1e3);var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/"}function getLocation(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(showPosition);setTimeout(function(){$(".geolocation-modal__content-input button").text("BUSCAR");$(".geolocation-modal__content-loading").hide()},5e3)}else{console.log("Geolocation is not supported by this browser.")}}function showPosition(position){var crd=position.coords;var geo="https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(crd.latitude,"%2C").concat(crd.longitude,"&language=pt&key=AIzaSyDImD3ipqU3jS9v2gMvDhzfzSFN976i51I");$.getJSON(geo).then(function(location){var postalCode="";var result=location.results[0].address_components;for(var i=0;i<result.length;++i){if(result[i].types[0]=="postal_code"){var postalCode=result[i].long_name.replace("-","")}}wl_getCEP(postalCode)})}function showPositionInput(position){var location=$(".geolocation-modal__content-input input").val();if(location.includes("SC")||location.includes("PR")){setCookieJobspace("userCityUF",location,3e5);$("body").css("overflow","scroll");$(".geolocation-modal-shop, .geolocation-modal__close").addClass("on");$(".geolocation-modal__content").hide();$(".geolocation-modal-shop__body--button").on("click",function(){$(".geolocation-modal__wrapper").hide("on")});$(".mz-user-location__description").html(location).addClass("on")}else{$(".geolocation-modal__content").hide();$(".geolocation-modal-sorry").addClass("on");$(".geolocation-modal-sorry__body--button").on("click",function(){$(".geolocation-modal-sorry").removeClass("on");$(".geolocation-modal__content").show()});return}}