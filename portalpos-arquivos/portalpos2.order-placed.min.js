!function(e){var t={};function a(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(r,o,function(t){return e[t]}.bind(null,o));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=482)}({482:function(e,t,a){e.exports=a(483)},483:function(e,t,a){"use strict";a(484),$(function(){$("body.body-checkout-confirmation #app-top, body.body-checkout-confirmation #app-container").hide(),window.storeConfig={accountName:"portalpos2",kosmos:{url:"//rest.ksms.com.br/api"},middleware:{url:"//middleware.portalpos.com.br/api/v1"}};var e={getDatalayer:function(){var e=[];return dataLayer.forEach(function(t){"orderPlaced"==t.event&&(e=t)}),e},getTransactionId:function(){var e=this.getDatalayer().transactionId.trim();return~e.indexOf("-")||(e+="-01"),e},getDateString:function(){var e=this.getDatalayer().transactionDate.split("T")[0];return(e=e.split("-"))[2]+"/"+e[1]+"/"+e[0]},getPriceString:function(){var e=this.getDatalayer();if(e.transactionPaymentType.length)var t=e.transactionPaymentType[0].value,a="R$ "+this.formatPrice(t/100,2,",",".");else a="R$ 0,00";return a},getPaymentMethod:function(){var e=this.getDatalayer();return e.transactionPaymentType.length?e.transactionPaymentType[0].paymentSystemName:"Voucher"},formatPrice:function(e,t,a,r){e=(e+"").replace(",","").replace(" ","");var o=isFinite(+e)?+e:0,n=isFinite(+t)?Math.abs(t):0,i=void 0===r?",":r,s=void 0===a?".":a,c="";return(c=(n?function(e,t){var a=Math.pow(10,t);return""+Math.round(e*a)/a}(o,n):""+Math.round(o)).split("."))[0].length>3&&(c[0]=c[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(c[1]||"").length<n&&(c[1]=c[1]||"",c[1]+=new Array(n-c[1].length+1).join("0")),c.join(s)}},t={getOrderData:function(){return localStorage.getItem("orderData")?JSON.parse(localStorage.getItem("orderData")):{}},setOrderData:function(e,t){var a=JSON.parse(localStorage.getItem("orderData"))||{};a[e]=t,localStorage.setItem("orderData",JSON.stringify(a))}},a=setInterval(function(){if(void 0!==dataLayer){var r=e.getDatalayer();r&&r.event&&(clearInterval(a),console.log("waiting dataLayer orderPLaced..."),function(){t.setOrderData("orderId",e.getTransactionId()),t.setOrderData("formadepagamento",e.getPaymentMethod()),t.setOrderData("dataPedido",e.getDateString()),t.setOrderData("totalPedido",e.getPriceString());var a=t.getOrderData(),r=a.orderId,o=a.consultor,n=a.voucher;if(a.isEbook)return void(window.location="/pedido-confirmado-ebook");var i={orderId:r,json:{orderId:r,consultorId:"-"===o?"":o,voucher:"-"===n.codigo?"":n.codigo},erroAjax:null,requestTime:0};console.log(i),dataLayer.push({integracaoEventAction:"iniciando-envio"}),dataLayer.push({event:"gaSendIntegracao"});var s=(new Date).getTime();function c(e,t){t&&(e.erroAjax=t),$.ajax({url:window.storeConfig.middleware.url+"/0_matricula",type:"POST",data:JSON.stringify(e)}).always(function(){!function(e){$.ajax({url:"/api/dataentities/EM/documents?an="+window.storeConfig.accountName,type:"POST",dataType:"json",headers:{accept:"application/json","content-type":"application/json"},data:JSON.stringify({orderId:r,json:JSON.stringify(e)}),error:function(e,t){console.log("Error envio EM")}}).always(function(){dataLayer.push({integracaoEventAction:"redirect-contrato"}),dataLayer.push({event:"gaSendIntegracao"}),window.location="/inscricao/contrato"})}(e)})}t.setOrderData("contratoConfirmado",!1),$.ajax({url:window.storeConfig.middleware.url+"/1_matricula",type:"POST",data:JSON.stringify(i.json),success:function(e){i.requestTime=(new Date).getTime()-s;var a="";null!=e.data?(e.data.message&&(t.setOrderData("errKosmos",!0),a=e.data.message,dataLayer.push({integracaoEventAction:"success-message"}),dataLayer.push({event:"gaSendIntegracao"})),e.data.errors&&(t.setOrderData("errKosmos",!0),a=e.data.errors,dataLayer.push({integracaoEventAction:"success-errors"}),dataLayer.push({event:"gaSendIntegracao"})),e.data.contrato&&(t.setOrderData("errKosmos",!1),t.setOrderData("linkContrato",e.data.contrato),t.setOrderData("linkBoleto",e.data.pagamento[0].boleto),dataLayer.push({integracaoEventAction:"success-contrato-boleto"}),dataLayer.push({event:"gaSendIntegracao"}))):(t.setOrderData("errKosmos",!0),dataLayer.push({integracaoEventAction:"success-null"}),dataLayer.push({event:"gaSendIntegracao"})),c(i,a)},error:function(e){if(t.setOrderData("errKosmos",!0),i.requestTime=(new Date).getTime()-s,console.log(e.responseText),function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(e.responseText)){var a=JSON.parse(e.responseText);a&&a.error&&(~a.error.indexOf("pedido jÃ¡ foi enviado")?(t.setOrderData("errKosmos","pedidoEnviado"),dataLayer.push({integracaoEventAction:"error-pedido-ja-enviado"}),dataLayer.push({event:"gaSendIntegracao"})):(dataLayer.push({integracaoEventAction:"error-erro-desconhecido"}),dataLayer.push({event:"gaSendIntegracao"})))}c(i,e.responseText)}})}())}else console.log("waiting datalayer...")},100)})},484:function(e,t,a){}});