/* davids - 08/04/2021 16:19:11 GMT-0300 */
var baseUrl="/";$(document).ready(function(){$("#anchoLlanta").select2({placeholder:"Seleccione un ancho"});$("#altoLlanta").select2({placeholder:"Seleccione un alto"});$("#rinLlanta").select2({placeholder:"Seleccione un rin"});var params=getParameters();if(params.hasOwnProperty("ancho"))fillAncho(function(){$("#anchoLlanta").val(params.ancho).trigger("change.select2");if(params.hasOwnProperty("alto")){fillAlto(params.ancho,function(){$("#altoLlanta").val(params.alto).trigger("change.select2");if(params.hasOwnProperty("rin")){fillRin(params.ancho,params.alto,function(){$("#rinLlanta").val(params.rin).trigger("change.select2")})}})}});else fillAncho(function(){})});function fillAncho(callback){$("#anchoLlanta").prop("disabled",true);$("#altoLlanta").prop("disabled",true);$("#rinLlanta").prop("disabled",true);var opsAncho=[];$.ajax({url:baseUrl+"llantas?lid=9d70a804-532b-446a-b5bb-a48cc9195efd&map=c",type:"GET",success:function(data){$(data).find("ul.Ancho li a").each(function(i,v){var ancho=$(v).attr("title");if(opsAncho.indexOf($.trim(ancho))==-1){opsAncho.push(ancho)}if(i==$(data).find("ul.Ancho li a").length-1){opsAncho.sort();$("#anchoLlanta").html(arrToOpt(opsAncho)).prop("disabled",false);$("#altoLlanta").prop("disabled",true);$("#rinLlanta").prop("disabled",true);$("#anchoLlanta").change(function(){fillAlto(this.value,function(){})});$("#altoLlanta").change(function(){fillRin($("#anchoLlanta").val(),$("#altoLlanta").val(),function(){})});callback();fillAlto($("#anchoLlanta").val(),function(){})}})}})}function fillAlto(ancho,callback){$("#altoLlanta").html("").prop("disabled",true);$("#rinLlanta").prop("disabled",true);var opsAlto=[];$.ajax({url:baseUrl+"llantas/"+ancho+"?lid=9d70a804-532b-446a-b5bb-a48cc9195efd&map=c,specificationFilter_307",type:"GET",success:function(data){$(data).find("ul.Alto li a").each(function(i,v){var alto=$(v).attr("title");if(opsAlto.indexOf($.trim(alto))==-1){opsAlto.push(alto)}if(i==$(data).find("ul.Alto li a").length-1){opsAlto.sort();$("#altoLlanta").html(arrToOpt(opsAlto)).prop("disabled",false);$("#rinLlanta").prop("disabled",true);fillRin($("#anchoLlanta").val(),$("#altoLlanta").val(),function(){})}})}})}function fillRin(ancho,alto,callback){$("#rinLlanta").html("").prop("disabled",true);var opsRin=[];$.ajax({url:baseUrl+"llantas/"+ancho+"/"+alto+"?lid=9d70a804-532b-446a-b5bb-a48cc9195efd&map=c,specificationFilter_307,specificationFilter_308",type:"GET",success:function(data){$(data).find("ul.Rin li a").each(function(i,v){var alto=$(v).attr("title");if(opsRin.indexOf($.trim(alto))==-1){opsRin.push(alto)}if(i==$(data).find("ul.Rin li a").length-1){opsRin.sort();$("#rinLlanta").html(arrToOpt(opsRin)).prop("disabled",false)}})}})}function searchLLantas(){var path=baseUrl+"llantas/?fq=C:10";var params=[];var ancho=$("#anchoLlanta").val();var alto=$("#altoLlanta").val();var rin=$("#rinLlanta").val();if(ancho!==null){params.push("fq=specificationFilter_307:"+ancho)}if(alto!==null){params.push("fq=specificationFilter_308:"+alto)}if(rin!==null){params.push("fq=specificationFilter_309:"+rin)}window.location.href=path+"&"+params.join("&")+"&PS=50"}function arrToOpt(arr){var ops="";for(var i=0;i<arr.length;i++){ops+='<option value="'+arr[i]+'">'+arr[i]+"</option>";if(i==arr.length-1){return ops}}}function getParameters(){var url=new URL(window.location.href);var params=url.search.replace(/fq=specificationFilter_307/gi,"ancho").replace(/fq=specificationFilter_308/gi,"alto").replace(/fq=specificationFilter_309/gi,"rin").replace(/\?fq=/gi,"").replace(/=/gi,":").replace(/:/gi,'":"').split("&");if(params.length>1){return JSON.parse('{"'+params.join('","')+'"}')}else return{}}