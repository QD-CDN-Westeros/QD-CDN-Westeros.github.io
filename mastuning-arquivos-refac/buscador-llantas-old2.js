/* Anonymouswill - 22/04/2021 18:57:50 GMT */
var apiUrl="https://items.gme.mx/pub/llantas?ctc_id=14";var baseUrl="https://www.masrefacciones.mx/";$(document).ready(function(){$("#anchoLlanta").select2({placeholder:"Seleccione un ancho"});$("#altoLlanta").select2({placeholder:"Seleccione un alto"});$("#rinLlanta").select2({placeholder:"Seleccione un rin"});var params=getParameters();if(params.hasOwnProperty("ancho"))fillAncho(function(){$("#anchoLlanta").val(params.ancho).trigger("change.select2");if(params.hasOwnProperty("alto")){fillAlto(params.ancho,function(){$("#altoLlanta").val(params.alto).trigger("change.select2");if(params.hasOwnProperty("rin")){fillRin(params.ancho,params.alto,function(){$("#rinLlanta").val(params.rin).trigger("change.select2")})}})}});else fillAncho(function(){})});function fillAncho(callback){$("#anchoLlanta").prop("disabled",true);$("#altoLlanta").prop("disabled",true);$("#rinLlanta").prop("disabled",true);var opsAncho=[];$.getJSON(apiUrl,function(response){for(var i=response.length-1;i>=0;i--){if(opsAncho.indexOf($.trim(response[i].ancho))==-1){opsAncho.push(response[i].ancho)}if(i==0){$("#altoLlanta").html("");$("#rinLlanta").html("");opsAncho.sort();$("#anchoLlanta").prop("disabled",false);$("#altoLlanta").prop("disabled",false);$("#anchoLlanta").html(arrToOpt(opsAncho));$("#anchoLlanta").change(function(){fillAlto(this.value,function(){})});$("#altoLlanta").change(function(){fillRin($("#anchoLlanta").val(),this.value,function(){})});callback()}}})}function fillAlto(ancho,callback){$("#altoLlanta").prop("disabled",true);$("#rinLlanta").prop("disabled",true);var opsAlto=[];$.getJSON(apiUrl+"&ancho="+ancho,function(response){for(var i=response.length-1;i>=0;i--){if(opsAlto.indexOf($.trim(response[i].alto))==-1){opsAlto.push(response[i].alto)}if(i==0){$("#rinLlanta").html("");opsAlto.sort();$("#altoLlanta").html(arrToOpt(opsAlto));$("#altoLlanta").prop("disabled",false);$("#rinLlanta").prop("disabled",false);$("#anchoLlanta").change(function(){fillAlto(this.value,function(){})});callback()}}})}function fillRin(ancho,alto,callback){$("#rinLlanta").html("");var opsRin=[];$("#rinLlanta").prop("disabled",true);$.getJSON(apiUrl+"&ancho="+ancho+"&alto="+alto,function(response){for(var i=response.length-1;i>=0;i--){if(opsRin.indexOf($.trim(response[i].rin))==-1)opsRin.push(response[i].rin);if(i==0){opsRin.sort();$("#rinLlanta").html(arrToOpt(opsRin));$("#rinLlanta").prop("disabled",false);callback()}}})}function searchLLantas(){var path=baseUrl+"llantas/?fq=C:10";var params=[];var ancho=$("#anchoLlanta").val();var alto=$("#altoLlanta").val();var rin=$("#rinLlanta").val();if(ancho!==null){params.push("fq=specificationFilter_307:"+ancho)}if(alto!==null){params.push("fq=specificationFilter_308:"+alto)}if(rin!==null){params.push("fq=specificationFilter_309:"+rin)}window.location.href=path+"&"+params.join("&")+"&PS=50"}function arrToOpt(arr){var ops="";for(var i=0;i<arr.length;i++){ops+='<option value="'+arr[i]+'">'+arr[i]+"</option>";if(i==arr.length-1){return ops}}}function getParameters(){var url=new URL(window.location.href);var params=url.search.replace(/fq=specificationFilter_307/gi,"ancho").replace(/fq=specificationFilter_308/gi,"alto").replace(/fq=specificationFilter_309/gi,"rin").replace(/\?fq=/gi,"").replace(/=/gi,":").replace(/:/gi,'":"').split("&");if(params.length>1){return JSON.parse('{"'+params.join('","')+'"}')}else return{}}