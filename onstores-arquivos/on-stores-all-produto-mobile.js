/* DESKTOP-GUOJE28 - 04/08/2020 12:14:23 GMT */
var OnStores_Produto={methods:{shareSocial:function(){$(".x-prod__info--social ul li .x-facebook").on("click",function(){var url="https://www.facebook.com/sharer/sharer.php?u="+window.location.href;return window.open(url,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600"),!1}),$(".x-prod__info--social ul li .x-twitter").on("click",function(){var url="https://twitter.com/share?url="+window.location.href;return window.open(url,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600"),!1}),$(".x-prod__info--social ul li .x-whatsapp").on("click",function(){var url="https://api.whatsapp.com/send?phone=whatsappphonenumber&text="+window.location.href;return window.open(url,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600"),!1})},buttonBuy:function(){$(".buy-button").text("Compre Já")},sliderVitrine:function(){$(".x-veja-tambem .x-vitrine__list .prateleira > ul").slick({slidesToShow:1,slidesToScroll:1,fade:!1,autoplay:!1,infinite:!0,arrows:!0,dots:!1})},vitrineNavigation:function(){var _navigation=$(".x-veja-tambem .x-vitrine__navigation-options li"),_container=$(".x-veja-tambem .x-vitrine__list");$(".x-veja-tambem .x-vitrine__list#mais-produtos-dessa-loja").addClass("is--active"),_navigation.click(function(){var _attr=$(this).attr("data-vitrine");$(this).hasClass("is--active")||(_navigation.removeClass("is--active"),_container.removeClass("is--active"),$(this).addClass("is--active"),$("#"+_attr).addClass("is--active"))})},disableSku:function(){var _sku=$(".x-prod__info--sku");$(".sku-selector-container label").length||_sku.hide()},addProductToMinicart:function(){var _button=$(".x-prod__info--buy .buy-button-ref"),_buttonLink=_button.attr("href");_button.click(function(e){if(-1!=!_buttonLink.indexOf("javascript:alert")){if($(".x-prod__info--sku .topic").length!=$(".x-prod__info--sku .topic label.sku-picked").length)return window.alert("Selecione uma opção"),!1;var _sku=$(".buy-button").attr("href").split("sku=")[1].split("&")[0],_seller=$(".buy-button").attr("href").split("seller=")[1].split("&")[0];e.preventDefault();var product={id:_sku,quantity:1,seller:_seller};return vtexjs.checkout.addToCart([product]).done(function(orderForm){jQuery.vtex_quick_cart(optionsMiniCart),setTimeout(function(){$(".x-general .x-minicart").addClass("is--active"),$(".x-overlay").fadeIn()},500),setTimeout(function(){$(".x-general .x-minicart").removeClass("is--active"),$(".x-overlay").fadeOut()},4e3)})}})},getProductSellers:function(){skuJson_0.skus[0].sku;var _product_id=skuJson_0.productId;$.ajax({type:"GET",url:"/api/catalog_system/pub/products/search/?fq=productId:"+_product_id,success:function(data){var _container=$(".x-prod__info__seller ul"),_count=0,_sku_item=data[0].items[0],_name=(_sku_item.sellers,_sku_item.sellers[0].sellerName),_price=_sku_item.sellers[0].commertialOffer.Price;if(_cart=_sku_item.sellers[0].addToCartLink,0!=_sku_item.sellers[0].commertialOffer.AvailableQuantity){_count+=1;_sku_item.sellers[0].commertialOffer.AvailableQuantity;_container.append('<li data-cart="'+_cart+'" data-price="'+_price+'"><p class="x-prod__info__seller--featured">Vendido e Entregue por</p><div class="x-prod__info__seller--info"><p class="x-prod__info__seller--name"><i class="x-icon-seller"></i>'+_name+"</p></div></li>")}if($(".x-prod__info__seller ul li").eq(0).addClass("is--active"),2==_count)$(".buy-button").attr("href",_cart),$(".x-prod__info--price .skuBestPrice").html(OnStores.data.floatToCurrency(_price));else if(2<_count){var _cart=$(".x-prod__info__seller ul li").eq(0).attr("data-cart");$(".buy-button").attr("href",_cart)}}}),$.ajax({type:"GET",url:"/api/catalog_system/pub/products/search/?fq=productId:"+_product_id,success:function(data){for(var _cart,_container=$(".x-info__sellers ul"),_sellers=data[0].items[0].sellers,j=_sellers.length-1;0<=j;j--){var _seller=_sellers[j],_name=_seller.sellerName,_price=_seller.commertialOffer.Price;if(_cart=_seller.addToCartLink,0!=_seller.commertialOffer.AvailableQuantity){1;_seller.commertialOffer.AvailableQuantity}}}})},activeProductSellers:function(){var seller=".x-info__sellers ul li";$("body").on("click",seller,function(){$(seller).removeClass("is--active"),$(this).addClass("is--active");var href=$(this).attr("data-cart"),price=$(this).attr("data-price"),name=$(this).find(".x-info__sellers--name").text(),totalInstallments=price/$(".skuBestInstallmentNumber").text().split("x")[0];$(".x-prod__info__seller ul li").attr("data-cart",href),$(".x-prod__info--buy .buy-button").attr("href",href),$(".x-prod__info__seller ul li .x-prod__info__seller--name").html('<i class="x-icon-seller"></i>'+name),$(".x-prod__info--price .skuBestPrice").html(OnStores.data.floatToCurrency(price)),$(".skuBestInstallmentValue").html(OnStores.data.floatToCurrency(totalInstallments))})},scrollShipping:function(){$(".x-prod__info__actionRetirada a").click(function(event){event.preventDefault(),$("html, body").animate({scrollTop:$($(this).attr("href")).offset().top-130},500)})},addDiscountTag:function(){var discount=computeDiscount(window.skuJson);showDiscount(discount);return;function computeDiscount(skuJson){if(!skuJson||!Array.isArray(skuJson.skus)){return 0}var availableSkus=skuJson.skus.filter(function(sku){return sku&&sku.available});var discounts=availableSkus.map(function(sku){return(sku.listPrice-sku.bestPrice)/sku.listPrice*100||0});var validDiscounts=discounts.filter(function(discount){return discount>0&&discount<=100});function smallest(arr){return arr.reduce(function(x,y){return Math.min(x,y)})}return validDiscounts.length===0?0:smallest(validDiscounts)}function showDiscount(discount){var productImage=$("#include");productImage.append('<span class="x-product__highlight--percent">'+discount+"</span>")}},previewCarousel:function previewCarousel(){var container=$(".x-general .x-content .x-prod .x-prod__images .thumbs");if(!container||!container.length)return;container.slick({infinite:true,swipeToSlide:true,variableWidth:true})},init:function(){this.shareSocial(),this.buttonBuy(),this.vitrineNavigation(),this.sliderVitrine(),this.disableSku(),this.addProductToMinicart(),this.getProductSellers(),this.activeProductSellers(),this.scrollShipping(),this.addDiscountTag(),this.previewCarousel()},init_ajax:function(){}},ajax:function(){return this.methods.init_ajax()},mounted:function(){return this.methods.init()}};$(document).ready(function(){OnStores_Produto.mounted()}),$(document).ajaxStop(function(){OnStores_Produto.ajax()});