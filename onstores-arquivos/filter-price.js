/* dan - 23/06/2020 14:38:02 GMT-0300 */
function xCreatePriceSlider(id,min,max){function filterIsActive(){return-1!=window.location.href.indexOf("priceFrom")}function getCurrentValues(val){var range=window.location.href.match(/de-\d+-a-\d+/)[0];if(!range)return!1;var rangeObj=range.split("-"),rangeMin=rangeObj[1],rangeMax=rangeObj[3];return"min"==val?rangeMin:"max"==val?rangeMax:void 0}var slider=$("#"+id);slider.addClass("x-slider x-slider--price"),slider.append('<div id="x-slider__bar"></div><div class="x-slider__qty-group"><span class="x-slider__qty x-slider__qty--start">R$ <span class="x-slider__qty-value x-slider__qty-value--start"></span></span><span class="x-slider__qty x-slider__qty--end">R$ <span class="x-slider__qty-value x-slider__qty-value--end"></span></span></div><button class="x-slider__btn">Filtrar</button>');var qtyStart=$("#"+id+" .x-slider__qty-value--start"),qtyEnd=$("#"+id+" .x-slider__qty-value--end"),sliderBar=document.getElementById("x-slider__bar"),btnFilter=slider.find(".x-slider__btn");sliderBar&&(noUiSlider.create(sliderBar,{start:[min,max],connect:!0,range:{min:min,max:max},format:{to:function(value){return parseInt(value,10)},from:function(value){return parseInt(value,10)}}}),!0===filterIsActive()&&sliderBar.noUiSlider.set([getCurrentValues("min"),getCurrentValues("max")]),function(){if(!0===filterIsActive()){var range="De R$ "+getCurrentValues("min")+" até R$ "+getCurrentValues("max");$(".bread-crumb li.last a").text(range)}}(),function(){if(!0===filterIsActive()){var range="De R$ "+getCurrentValues("min")+" até R$ "+getCurrentValues("max");$('.x-filters-selected li[data-filter-name=" -- "] a').text(range)}}(),btnFilter.on("click",function(){!function(){var url=window.location,param="de-"+sliderBar.noUiSlider.get()[0]+"-a-"+sliderBar.noUiSlider.get()[1];if(0<url.href.indexOf("priceFrom"))urlDestiny=url.href.replace(/de-\d+-a-\d+/,param),window.location.href=urlDestiny;else if(url.href.indexOf("priceFrom")<0&&0<url.href.indexOf("map=c"))urlDestiny=url.protocol+"//"+url.hostname+url.pathname+"/"+param+url.search+",priceFrom",window.location.href=urlDestiny;else{var querySymbol="?";if(0<url.href.indexOf("?")&&(querySymbol="&"),url.pathname.endsWith("/"))urlDestiny=url.protocol+"//"+url.hostname+url.pathname+param+url.search+querySymbol+"map=c,c,c,priceFrom";else var urlDestiny=url.protocol+"//"+url.hostname+url.pathname+"/"+param+url.search+querySymbol+"map=c,c,c,priceFrom";window.location.href=urlDestiny}}()}),sliderBar.noUiSlider.on("update",function(values,handle){qtyStart.text(values[0]).attr("data-value",values[0]),qtyEnd.text(values[1]).attr("data-value",values[1])}))}function getPriceFilterValues(val){var filterValue=$('ul[class*="preço"] .last a').attr("title");if(filterValue){var filterValueObj=filterValue.split(/\s/),filters=(filterMin=parseInt(filterValueObj[0].replace("R$",""),10))+","+(filterMax=parseInt(filterValueObj[2].replace("R$",""),10));$.cookie("xFiltersValue",filters,{expires:7})}else if($.cookie("xFiltersValue")){filterValueObj=$.cookie("xFiltersValue").split(",");var filterMin=parseInt(filterValueObj[0]),filterMax=parseInt(filterValueObj[1])}return"min"==val?filterMin:filterMax}$(".search-multiple-navigator .bt-refinar").after('<fieldset class="refino filtro_range_preco"><h5>Preço</h5><div class="x-price-group"><div id="x-priceslider"></div></div></fieldset>');var _price=0;var url=window.location.href.split("?")[0];var check=url.split("/");if(check[check.length-1].match(/de-[0-9]+-a-[0-9]+/)){check.pop();url=check.join("/")}$.ajax({url:url+"?PS=1&O=OrderByPriceDESC",method:"GET"}).done(function(resp){_price=$(resp).find(".x-bestPrice")[0].innerHTML.replace("R$ ","").replace(".","").replace(",",".");_price=parseFloat(_price);window.maxPrice=_price;if(_price&&_price!=0){xCreatePriceSlider("x-priceslider",0,_price)}});