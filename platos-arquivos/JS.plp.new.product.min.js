/* MEWTWO - 19/10/2020 18:14:54 GMT */
"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function mz_number_format(n,t,e,i){n=(n+"").replace(/[^0-9+\-Ee.]/g,""),n=isFinite(+n)?+n:0,i=void 0===i?",":i,e=void 0===e?".":e;var r="";r=function r(n,t){var e=Math.pow(10,t);return""+(Math.round(n*e)/e).toFixed(t)};return 3<(r=((t=isFinite(+t)?Math.abs(t):0)?r(n,t):""+Math.round(n)).split("."))[0].length&&(r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(r[1]||"").length<t&&(r[1]=r[1]||"",r[1]+=Array(t-r[1].length+1).join("0")),r.join(e)}(function(){try{var Product={init:function init(){Product.allGlobalVariables();Product.applyShareActions();Product.setBrandImage();Product.bringAllData();Product.applyInstallments();Product.chooseFirstTimeLocationUnit();Product.changeLocationUnit();Product.applyLinkToGoogleMaps();Product.applyUnitTour();Product.getCourseDetail();Product.callDataUnit();Product.addProductInCheckout()},bgOverlay:"mz-mdlocation-on",allGlobalVariables:function allGlobalVariables(){window.dataProduct="";window.dataUf="";window.dataCity="";window.idModalidade="";window.dataUnitName="";window.dataUnitID="";window.dataBrandID="";window.dataOfferID="";window.dataOfferPlanPoloID="";window.dataDetailsDuration="";window.dataDetailsMeetings="";window.dataConsultorID="";window.dataUnitAddress="";window.dataRegionID="";window.dataCourseID="";window.dataAffiliationID="";window.dataInstallmentID="";window.dataSkuNameInst="";window.dataMestreIndica="";window.selectedPaymentValue="";window.orderData=""},applyShareActions:function applyShareActions(){$("#mz-share-button").on("click",function(){$(".mz-product__banner.to-share").slideToggle()})},setBrandImage:function setBrandImage(){var brandCookie=$.cookie("marcaOrigem");if(brandCookie==undefined){console.log("Marca: Platos.");$(".mz-product__brand").hide()}else{var nameImage="portalpos-logo-".concat(brandCookie,"-dark");var urlImage="https://portalpos2.vteximg.com.br/arquivos/".concat(nameImage,".png");$(".mz-product__brand img").attr("src",urlImage)}},bringAllData:function bringAllData(){var productUrl=window.location.pathname;$.ajax({type:"GET",method:"GET",url:"/api/catalog_system/pub/products/search".concat(productUrl),dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"}}).done(function(dataSku){window.dataProduct=dataSku[0];var headingOne=dataSku[0]["Nome Curso"][0];var fullBanner=dataSku[0].items[0].images[1].imageUrl;var modality=dataSku[0]["Modalidade"][0];var duration=dataSku[0]["Duração"][0];var initCourse=dataSku[0]["Previsão de início"][0];var area=dataSku[0]["Área de Estudo"][0];$(".mz-product__infos h1").text(headingOne);$(".mz-product__banner > img").attr("src",fullBanner);$(".infos.modality").text(modality);$(".infos.duration").text(duration);$(".infos.course").text(initCourse);$(".infos.area").text(area);Product.buildTextContent(dataSku);Product.getLocationByLocalStorage(dataSku[0]);Product.getEbookAndPodcast(dataSku[0]["Código Curso"][0])})},buildTextContent:function buildTextContent(dataContent){if(dataContent[0]["Público Alvo"][0].length){$(".publico-alvo").next().text(dataContent[0]["Público Alvo"][0])}else{$(".publico-alvo").hide();$(".publico-alvo").next().hide()}if(dataContent[0].description.length){var descriptionFormated=dataContent[0].description.split(/\·\s|\•\s|\n/g);descriptionFormated.map(function(desc){var formatedText=_?_.capitalize(desc.trim()):desc.trim();if(!formatedText||!formatedText.length){$(".objetivos-gerais, .objetivos-especificos").hide();$(".objetivos-gerais, .objetivos-especificos").next().hide();return}if(formatedText.match(/Objetivos Gerais/g)){formatedText=formatedText.split(/Objetivos Gerais/g);formatedText.shift();formatedText[0]=formatedText[0].replace(/Objetivos Específicos/g,"");$(".objetivos-gerais").next().text(formatedText[0]);return}if(formatedText.match(/Objetivos Gerais/g)==null){var liText="<li>".concat(formatedText,"</li>");$(".objetivos-especificos").append(liText);return}})}else{$(".objetivos-gerais, .objetivos-especificos").hide();$(".objetivos-gerais, .objetivos-especificos").next().hide();console.log("Sobre o Curso - Objetivos - [Vazio]")}if(dataContent[0]["Disciplina"]==null||dataContent[0]["Disciplina"][0]==null){console.log("Disciplina - [Vazio]");$("#mz-subjects, .texts.subjects").hide()}else{$(".subjects.descriptions").html(dataContent[0]["Disciplina"][0]);console.log("Disciplinas - [Vazio]")}if(dataContent[0]["Certificação"][0].length){$(".certification.descriptions").html("<p>".concat(dataContent[0]["Certificação"][0],"</p>"))}else{$(".texts.certification").hide();$("#mz-certification").parent().hide();console.log("Certificação - [Vazio]")}if(dataContent[0]["Modalidade"][0].length){if(dataContent[0]["Modalidade"][0]==="EAD - 10 meses"||dataContent[0]["Modalidade"][0]==="EAD - 6 meses"){var text='<h3>Conheça seu Curso: </h3><div class="text-ead"><b>Cursos a distância (online):</b> <span>Os cursos a distância são ideais para você que valoriza a mobilidade e a flexibilidade quanto aos seus horários de estudo, no seu ritmo de aprendizagem.</span></div><div class="text-ead">Você estuda 100% online e a carga horária do curso é de 360h em 9 disciplinas específicas (40h cada disciplina).</div><div class="text-ead">A cada disciplina, você contará com leituras digitais, slides, videoaulas e podcasts preparados por professores de destaque na área, que aliam conhecimentos teóricos e discussões sobre a prática profissional, como aprendizagem em foco. Além disso, você também terá o Desafio Profissional e atividades avaliativas que o ajudarão ainda mais a colocar em prática todo o aprendizado.</div><div class="text-ead">Você contará também com o acompanhamento de um tutor para auxiliá-lo nas dúvidas que surgirem durante seu curso.</div><div class="text-ead">A certificação de um curso EAD é igual ao do curso presencial.</div>';$(".modality.descriptions").append(text)}if(dataContent[0]["Modalidade"][0]==="Semi-presencial"){var _text="<h3>Conheça seu Curso: </h3><p><b>Cursos Semipresenciais:</b> reúne o melhor das duas modalidades, com a flexibilidade do ensino à distância e do presencial. Do ensino a distância, você tem a possibilidade de estudar, no seu próprio ritmo de aprendizagem onde, quando e como quiser, com conteúdo e atividades preparados por professores de destaque na área e acompanhado por um tutor. Do ensino presencial, você ampliará sua rede de relacionamento com colegas e professores e discutirá estudos de caso ou simulados, orientados por um professor.</p>";$(".modality.descriptions").append(_text)}if(dataContent[0]["Modalidade"][0]==="Presencial"){var _text2="<h3>Conheça seu Curso: </h3><p><b>Curso presencial:</b> é o modelo ideal para você que valoriza o networking e a interação face a face com professores e colegas, bem como a rotina e as vivências da sala de aula. Os conteúdos dos cursos são cuidadosamente planejados para tratar dos temas mais relevantes da área, aliando conhecimentos teóricos e discussões sobre a prática e o cotidiano profissional.</p><p>O aluno também cumpre uma parte de sua grade disciplinar por meio de carga horária online, respeitando normas regulatórias do MEC. Essas disciplinas irão prepará-lo ainda mais para a realidade do mercado de trabalho. Além disso, você terá mais flexibilidade para conciliar os estudos a sua rotina, além de ter esse conteúdo disponível a qualquer momento*.</p>";$(".modality.descriptions").append(_text2)}}else{$("#mz-modality, .texts.modality").hide();console.log("Modalidade - [Vazio]")}},getLocationByLocalStorage:function getLocationByLocalStorage(dataProduct){if(localStorage&&localStorage.mzGeoInfo&&localStorage.mzGeoInfo.length){var locationSeted=JSON.parse(localStorage.mzGeoInfo);var estado=locationSeted.uf;var _nomeCurso=dataProduct["Nome Curso"][0];var marca=dataProduct.brandId;var modalidade=Product.getModality(dataProduct["Modalidade"][0]);window.dataBrandID=dataProduct.brandId;var whereClause="?whereClause=(nomeCurso='".concat(_nomeCurso,"' AND codUF='").concat(estado,"' AND idModalidade='").concat(modalidade,"' AND idMarca='").concat(marca,"')");if(Cookies.get("marcaOrigem")==="uniderp"){whereClause="?whereClause=(nomeCurso='".concat(_nomeCurso,"' AND codUF='").concat(estado,"' AND idModalidade='").concat(modalidade,"' AND idMarca='").concat(marca,"' AND idUnidade='789')")}var selectCity=$("#mz-modal-select-city");var selectUnit=$("#mz-modal-select-unit");var options;var regexState=/-SP/g;$(".mz-product__modal.location button").attr("disabled","disabled");try{$.ajax({url:"https://middleware.portalpos.com.br/api/v1/ofertas/localidades/".concat(whereClause),type:"GET",dataType:"json",success:function success(cityResposne){for(var city in cityResposne[2].facets){city=city.replace(regexState,"");options='<option value="'.concat(city,'">').concat(city,"</option>");selectCity.append(options)}}}).done(function(){selectCity.on("change",function(){var $t=$(this);var thisCity=$t.val();var params="?nomeCurso=".concat(_nomeCurso,"&codUF=").concat(estado,"&idModalidade=").concat(modalidade,"&idMarca=").concat(marca,"&cidade=").concat(thisCity,"-").concat(estado);if(Cookies.get("marcaOrigem")==="uniderp"){params="?nomeCurso=".concat(_nomeCurso,"&codUF=").concat(estado,"&idModalidade=").concat(modalidade,"&idMarca=").concat(marca,"&cidade=").concat(thisCity,"-").concat(estado,"&idUnidade=789")}if(~window.location.search.indexOf("superbusca")){params="?nomeCurso=".concat(_nomeCurso,"&codUF=").concat(estado,"&idModalidade=").concat(modalidade,"&idMarca=").concat(marca,"&cidade=").concat(thisCity,"|").concat(estado);if(Cookies.get("marcaOrigem")==="uniderp"){params="?nomeCurso=".concat(_nomeCurso,"&codUF=").concat(estado,"&idModalidade=").concat(modalidade,"&idMarca=").concat(marca,"&cidade=").concat(thisCity,"|").concat(estado,"&idUnidade=789")}}$.ajax({url:"https://middleware.portalpos.com.br/api/v1/ofertas/unidades".concat(params),type:"GET",dataType:"json",success:function success(unitsResponse){selectUnit.html("");if(unitsResponse.length>1){unitsResponse.forEach(function(unit){options='<option data-id-course="'.concat(unit.idCurso,'" data-id-affiliation="').concat(unit.afiliacao,'" data-id-offer=').concat(unit.idOfertaPolo,' data-id-unit="').concat(unit.idUnidade,'" data-id-polo="').concat(unit.idOferta,'" value="').concat(unit.nomeUnidade,'">').concat(unit.nomeUnidade,"</option>");selectUnit.append(options)})}else if(unitsResponse.length==1){unitsResponse.forEach(function(unit){options='<option data-id-course="'.concat(unit.idCurso,'" data-id-affiliation="').concat(unit.afiliacao,'" data-id-offer=').concat(unit.idOfertaPolo,' data-id-unit="').concat(unit.idUnidade,'" data-id-polo="').concat(unit.idOferta,'" value="').concat(unit.nomeUnidade,'">').concat(unit.nomeUnidade,"</option>");selectUnit.append(options)});selectUnit.val(unitsResponse[0].nomeUnidade);$(".mz-product__modal.location button").removeAttr("disabled")}console.log(unitsResponse)}});window.idModalidade=Product.getModality(dataProduct["Modalidade"][0]);window.dataUf=estado;window.dataCity=thisCity});selectUnit.on("change",function(){$(".mz-product__modal.location button").removeAttr("disabled")});Product.applySelect2InSelects(selectCity,selectUnit);Product.applyAsideBox();Product.applyConsultors()})}catch(e){console.log("Erro: ",e.message)}}else{console.log("Não achei!")}},applyAsideBox:function applyAsideBox(){$("#mz-location-unity-confirm").on("click",function(e){e.preventDefault();var unitSelected=$("#mz-modal-select-unit").find(":selected").attr("data-id-unit");var unitSelectedOfferPlanID=$("#mz-modal-select-unit").find(":selected").attr("data-id-offer");var unitSelectedCourseID=$("#mz-modal-select-unit").find(":selected").attr("data-id-course");var unitSelectedAffiliatonID=$("#mz-modal-select-unit").find(":selected").attr("data-id-affiliation");var unitSelectedOfferID=$("#mz-modal-select-unit").find(":selected").attr("data-id-polo");window.dataUnitID=unitSelected;window.dataOfferID=unitSelectedOfferID;window.dataOfferPlanPoloID=unitSelectedOfferPlanID;window.dataOfferPlanPoloID=parseInt(window.dataOfferPlanPoloID);window.dataCourseID=unitSelectedCourseID;window.dataAffiliationID=unitSelectedAffiliatonID;$(".payment.chose-unit").hide("fast");$(".mz-loader").show();try{$.ajax({url:"https://middleware.portalpos.com.br/api/v1/unidades/?id=".concat(unitSelected),type:"GET"}).done(function(response){if(!response.length){console.log("Nenhum dado retornado.");return}$(window).trigger("mzSetUnitConfirmed",response[0]);window.dataUnitName=response[0].nome;var adress="".concat(response[0].endereco,", ").concat(response[0].numero," - ").concat(response[0].cidade,"/").concat(response[0].uf);var phone="Telefone: ".concat(response[0].tel);$(".location.name-univercity").text(response[0].nome);$(".location.address-univercity").text(adress);$(".location.phone").text(phone);$(".mz-product__aside .mz-loader").hide("fast");$(".payment.location").show("fast");$(".payment.price").show("fast");$(".payment.ebook").show("fast");$(".payment.attendance").show("fast")})}catch(e){console.log("Erro na busca das informações unidade: ",e.message)}$(document.body).removeClass(Product.bgOverlay)})},getModality:function getModality(modalidade){switch(modalidade){case"EAD - 10 meses":return"EAD";case"Educação a distância":return"EAD";case"Semi-presencial":return"SEMI_PRESENCIAL";case"Presencial":return"PRESENCIAL";case"EAD - 6 meses":return"INTENSIVO"}},applySelect2InSelects:function applySelect2InSelects(selectCity,selectUnit){selectCity.select2({placeholder:"Selecione uma Cidade...",language:{noResults:function noResults(){return"Nenhuma cidade encontrada!"}},dropdownParent:selectCity.parent()});selectUnit.select2({placeholder:"Selecione uma Unidade...",language:{noResults:function noResults(){return"Nenhuma unidade encontrada!"}},dropdownParent:selectCity.parent()})},applyConsultors:function applyConsultors(){var selectConsultors=$("#mz-attendance-consultor");var options;$("#mz-not-consultor").on("change",function(){$("#mz-attendance-consultor").parent().hide()});var countChange=0;$("#mz-yes-consultor").on("change",function(){if(countChange>=1){$("#mz-attendance-consultor").parent().show();return}$.ajax({url:"https://middleware.portalpos.com.br/api/v1/consultores",type:"POST",dataType:"json",data:'{"idUnidade":"12415"}',cache:true}).done(function(responseConsultor){responseConsultor.consultores.forEach(function(item){options='<option value="'.concat(item.id,'">').concat(item.nome,"</option>");selectConsultors.append(options)});selectConsultors.select2({placeholder:"Selecione o consultor",language:{noResults:function noResults(){return"Nenhum consultor encontrado."}},dropdownParent:selectConsultors.parent()});$("#mz-attendance-consultor").parent().show();countChange++})})},applyInstallments:function applyInstallments(){window.countChanged=0;var regexDot=/\./g;$("#mz-price-installements").on("click",function(){if(window.countChanged>=1){$(document.body).addClass("mz-mdpayment-on");return}$(document.body).addClass("mz-mdpayment-on");var idPolo=$("#mz-modal-select-unit").find(":selected").attr("data-id-offer");var cookie=$.cookie("TKOSMOS");var urlFormated=encodeURI("".concat(window.storeConfig.kosmos.url,"/vtex/pos/inscricao/planos/ofertaPolo/").concat(idPolo,"?access_token=").concat(cookie));var listUl=$(".list-installments.installments");var agroupHtml="";var itemLi;$.ajax({type:"GET",method:"GET",url:urlFormated,dataType:"json"}).done(function(response){response.forEach(function(parc){console.log(parc);var totalPrice=parc.parcelas*parc.valorParcela;totalPrice=mz_number_format(totalPrice,2,",",".");itemLi='\n                                <li>\n                                    <label for="inp_'.concat(parc.id,'" data-names-sku="').concat(parc.parcelas,"x de R$ ").concat(parc.valorParcela.replace(regexDot,","),'">\n                                        <input type="radio" id="inp_').concat(parc.id,'" data-parc-id="').concat(parc.id,'" data-parc="').concat(parc.parcelas,'" data-value="').concat(parc.valorParcela,'" data-sku="').concat(parc.valorPrimeiraParcela,'" name="inp_parc" />\n                                        ').concat(parc.parcelas,"x R$ ").concat(parc.valorParcela.replace(regexDot,","),'\n                                    </label>\n                                    <label id="valueTotal">R$ ').concat(totalPrice,"</label>\n                                </li>\n                            ");agroupHtml=agroupHtml+itemLi});listUl.html(agroupHtml);window.countChanged++})});$(document).on("click",".list-installments.installments label[for]",function(){$(".list-installments.installments label[for]").removeClass("ativo");$(this).addClass("ativo")});var buttonsClose=$(".mz-product__modal.payment .mz-modal__close button, .mz-bgoverlay");buttonsClose.on("click",function(){$(document.body).removeClass("mz-mdpayment-on")})},chooseFirstTimeLocationUnit:function chooseFirstTimeLocationUnit(){var buttonUnit=$("#mz-chose-unit");buttonUnit.on("click",function(){$(document.body).addClass("mz-mdlocation-on")})},changeLocationUnit:function changeLocationUnit(){var buttonChangeUnit=$("#mz-location-change");buttonChangeUnit.on("click",function(){window.countChanged=0;$(document.body).addClass("mz-mdlocation-on")});var buttonsClose=$(".mz-product__modal.location .mz-modal__close button, .mz-bgoverlay");buttonsClose.on("click",function(){$(document.body).removeClass("mz-mdlocation-on")})},getEbookAndPodcast:function getEbookAndPodcast(dataIdCourse){$.ajax({type:"GET",method:"GET",url:"https://www.portalpos.com.br/api/dataentities/adminprodinfo/search?idproduto=".concat(dataIdCourse,"&_schema=mz-body&an=portalpos2"),dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"}}).done(function(response){if(!response||!response.length){console.log("Nenhum ebook/podcast cadastrado a esse produto.");return}})},applyLinkToGoogleMaps:function applyLinkToGoogleMaps(){var linkMaps=$("#mz-location-maps");var link;$(window).on("mzSetUnitConfirmed",function(evt,data){link="http://maps.google.com/?q=".concat(data.endereco,",").concat(data.numero," - ").concat(data.cidade,"/").concat(data.uf);linkMaps.attr("href",link);linkMaps.attr("target","_blank")})},applyUnitTour:function applyUnitTour(){$(window).on("mzSetUnitConfirmed",function(){var unitSelected=$("#mz-modal-select-unit").find(":selected").attr("data-id-unit");$.ajax({url:"//api.vtex.com.br/portalpos2/dataentities/TT/search?unidadeid=".concat(unitSelected,"&_fields=unidadevideo"),type:"GET"}).done(function(response){if(!response.length){console.log("Nenhuma Unidade de Tour recebida.");return}$(".location.tour").attr("href",response[0].unidadevideo)})})},callDataUnit:function callDataUnit(){$(window).on("mzSetUnitConfirmed",function(){var unitSelected=$("#mz-modal-select-unit").find(":selected").attr("data-id-unit");try{$.ajax({url:"https://middleware.portalpos.com.br/api/v1/unidades/?id=".concat(unitSelected),type:"GET"}).done(function(response){if(!response.length){console.log("Nenhum dado retornado.");return}console.log(response)})}catch(e){console.log("Erro na busca das informações unidade: ",e.message)}})},getCourseDetail:function getCourseDetail(){$(window).on("mzSetUnitConfirmed",function(){var params="?nomeCurso=".concat(window.dataProduct["Nome Curso"][0],"&codUF=").concat(window.dataUf,"&idModalidade=").concat(window.idModalidade,"&idMarca=").concat(window.dataBrandID,"&cidade=").concat(window.dataCity,"-").concat(window.dataUf,"&idUnidade=").concat(window.dataUnitID);if(~window.location.search.indexOf("superbusca")){params="?nomeCurso=".concat(nomeCurso,"&codUF=").concat(window.dataUf,"&idModalidade=").concat(window.idModalidade,"&idMarca=").concat(window.dataBrandID,"&cidade=").concat(window.dataCity,"|").concat(window.dataUf,"&idUnidade=").concat(window.dataUnitID)}$.ajax({url:"https://middleware.portalpos.com.br/api/v1/ofertas/cursos/detalhes".concat(params),type:"GET"}).done(function(response){if(!response||!response.length){console.log("Nenhum dado retornado de: Detalhes de Curso.");return}window.dataDetailsMeetings=response[0].encontros;window.dataDetailsDuration=response[0].duracao})})},addProductInCheckout:function addProductInCheckout(){var buyButton=$("#mz-buy-button");var regexList=Product.regexList();buyButton.one("click",function(){var unitSelected=$("#mz-modal-select-unit").find(":selected").attr("data-id-unit");$.ajax({url:"https://middleware.portalpos.com.br/api/v1/unidades/?id=".concat(unitSelected),type:"GET"}).done(function(response){if(!response.length){console.log("Nenhum dado retornado.");return}var dataUnidade=response[0];var unidadeEndereco=dataUnidade.endereco;if(dataUnidade.numero){unidadeEndereco+=", "+dataUnidade.numero}if(dataUnidade.complemento){unidadeEndereco+=" - "+dataUnidade.complemento}unidadeEndereco+=" - "+dataUnidade.cidade+"/"+dataUnidade.uf;window.dataUnitAddress=unidadeEndereco;window.dataRegionID=dataUnidade.id_municipio;var consultorSelected=$("#mz-attendance-consultor").find(":selected").attr("value");window.dataConsultorID=consultorSelected?consultorSelected||"-":"-";if(window.dataConsultorID!="-"){window.dataConsultorID=parseInt(window.dataConsultorID)}var valorParcela=$('input[name="inp_parc"]:checked').attr("data-value");var qtdParcelas=$('input[name="inp_parc"]:checked').attr("data-parc");var valorMatriculaPresencial=$('input[name="inp_parc"]:checked').attr("data-sku");var nameSku=$('input[name="inp_parc"]:checked').parent().attr("data-names-sku");window.selectedPaymentValue=valorMatriculaPresencial.replace(regexList.dot,"");console.log(window.selectedPaymentValue);window.dataInstallmentID=$('input[name="inp_parc"]:checked').attr("data-parc-id");window.dataSkuNameInst=nameSku;valorParcela=valorParcela.replace(regexList.dot,"");valorParcela=valorParcela/100;valorMatriculaPresencial=valorMatriculaPresencial.replace(regexList.dot,"");valorMatriculaPresencial=valorMatriculaPresencial/100;var parcelas=[];var valorTotal=0;for(var i=1;i<=qtdParcelas;i++){parcelas.push({parcela:i,desconto:0,percentaul:0,valor:valorParcela,valorOriginal:valorParcela});valorTotal+=valorParcela}valorTotal=valorTotal.toFixed(2);valorTotal=parseFloat(valorTotal);switch(window.idModalidade.toLowerCase()){case"ead":case"intensivo":valorMatriculaPresencial:0;break}window.orderData=_objectSpread(_objectSpread({},window.storeHelpers.generic.getResetedOrderData()),{},{payment:{valorMatricula:valorMatriculaPresencial,valorTotal:valorTotal,valorMatriculaPresencial:valorMatriculaPresencial,parcelas:parcelas},idOfertaPlano:window.dataOfferPlanPoloID,idModalidade:idModalidade,modalityVtexName:window.dataProduct["Modalidade"][0],nomesku:window.dataSkuNameInst,courseName:window.dataProduct["Nome Curso"][0],productId:window.dataProduct.productId,productArea:window.dataProduct["Área de Estudo"][0],brand:window.dataProduct.brand,brandId:window.dataProduct.brandId,regiao:window.dataRegionID,unidadeEndereco:window.dataUnitAddress,unidadeID:unitSelected,unidadeNome:window.dataUnitName.toLowerCase(),encontros:window.dataDetailsMeetings,duracao:window.dataDetailsDuration,consultor:window.dataConsultorID,courseUrl:"/".concat(window.dataProduct.linkText,"/p"),category:window.dataProduct.categories[0].replace(/^\/|\/$/g,""),categories:window.dataProduct.categories[0].replace(/^\/|\/$/g,"").split("/"),categoriesIds:window.dataProduct.categoriesIds[0].replace(/^\/|\/$/g,"").split("/"),vtexSkuId:window.dataProduct.items[0].itemId,vtexSkuName:window.dataProduct.items[0].nameComplete,vtexSkuPrice:window.dataProduct.items[0].sellers[0].commertialOffer.Price,vtexSkuVariant:window.dataProduct.items[0].name,vtexSellerId:window.dataProduct.items[0].sellers[0].sellerId});window.orderData.mestreIndica={codigo:null,professor:null};localStorage.setItem("orderData",JSON.stringify(window.orderData));var clearCart=window.storeHelpers.generic.clearCart();var addUtms=window.storeHelpers.generic.addUtms();clearCart.then(function(){addUtms.then(Product.addToCart())})})})},addToCart:function addToCart(){var item={id:window.dataProduct.items[0].itemId,quantity:1,seller:window.dataProduct.items[0].sellers[0].sellerId};console.log("Item");console.log(item);vtexjs.checkout.addToCart([item],null,jssalesChannel).done(Product.changePrice())},changePrice:function changePrice(){console.log("Entrando em ChangePrice");$.ajax({url:"/api/checkout/pub/orderForm/"+vtexjs.checkout.orderForm.orderFormId+"/items/0/price",type:"PUT",headers:window.header,data:'{"price":'+window.selectedPaymentValue+"}",success:function success(data){},error:function error(data,statusText){console.warn("Erro na Mudança do Orderform")}}).done(function(data){console.log("Return Change Price");console.log(data);Product.sendAttachment()});$(window).trigger("MZ.productAddedToCart",[])},sendAttachment:function sendAttachment(){var itemIndex=0;var attachment="Dados da compra";var attachmentContent={"Codigo da Afiliacao Cielo":window.dataAffiliationID,codigoMestreIndica:window.orderData.mestreIndica.codigo!==null?window.orderData.mestreIndica.codigo:"-",Consultor:window.dataConsultorID,"Endereço Unidade":window.dataUnitAddress,Ibge:"-","Id da Oferta":window.dataOfferID,"Id da OfertaPolo":window.dataOfferPlanPoloID.toString(),IsentaPrimeiroPagamento:false,Unidade:"Regiao: "+window.dataRegionID+" - Nome: "+window.dataUnitName,"Id Unidade":window.dataUnitID,"Valor Inscrição":"ID: "+window.dataInstallmentID+" - "+window.dataSkuNameInst,Voucher:"-",idCurso:window.dataCourseID};console.log("Attachment Content");console.log(attachmentContent);$.removeCookie("Voucher");$.removeCookie("ValorVoucher");vtexjs.checkout.addItemAttachment(itemIndex,attachment,attachmentContent).then(function(){return vtexjs.checkout.sendAttachment("openTextField",{value:""})}).done(function(){window.location.href="/checkout/#/email"})},regexList:function regexList(){var rl={dot:/\./g};return rl},printAllVariables:function printAllVariables(){console.log("GLOBALS");console.log(window.idModalidade);console.log(window.dataUnitName);console.log(window.dataUnitID);console.log(window.dataBrandID);console.log(window.dataOfferPlanPoloID);console.log(window.dataDetailsDuration);console.log(window.dataDetailsMeetings);console.log(window.dataConsultorID);console.log(window.dataUnitAddress);console.log(window.dataRegionID)}};Product.init()}catch(e){console.log("Erro na instancia [Product]: ",e)}})();