/* MEWTWO - 05/10/2020 17:31:35 GMT */
"use strict";(function(){try{var Product={init:function init(){Product.applyShareActions();Product.setBrandImage();Product.bringAllData();Product.applyInstallments()},bgOverlay:"mz-mdlocation-on",applyShareActions:function applyShareActions(){$("#mz-share-button").on("click",function(){$(".mz-product__banner.to-share").slideToggle()})},setBrandImage:function setBrandImage(){var brandCookie=$.cookie("marcaOrigem");if(brandCookie==undefined){console.log("Marca: Platos.");$(".mz-product__brand").hide()}else{var nameImage="portalpos-logo-".concat(brandCookie,"-dark");var urlImage="https://portalpos2.vteximg.com.br/arquivos/".concat(nameImage,".png");$(".mz-product__brand img").attr("src",urlImage)}},bringAllData:function bringAllData(){$(document.body).addClass("mz-mdlocation-on");var productUrl=window.location.pathname;$.ajax({type:"GET",method:"GET",url:"/api/catalog_system/pub/products/search".concat(productUrl),dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"}}).done(function(dataSku){var headingOne=dataSku[0]["Nome Curso"][0];var fullBanner=dataSku[0].items[0].images[1].imageUrl;var modality=dataSku[0]["Modalidade"][0];var duration=dataSku[0]["Duração"][0];var initCourse=dataSku[0]["Previsão de início"][0];var area=dataSku[0]["Área de Estudo"][0];$(".mz-product__infos h1").text(headingOne);$(".mz-product__banner > img").attr("src",fullBanner);$(".infos.modality").text(modality);$(".infos.duration").text(duration);$(".infos.course").text(initCourse);$(".infos.area").text(area);Product.buildTextContent(dataSku);Product.getLocationByLocalStorage(dataSku[0])})},buildTextContent:function buildTextContent(dataContent){if(dataContent[0].description==null){console.log("Sobre o Curso - [Vazio]");$("#mz-about-course, .texts.about-course").hide()}else{var descriptionFormated=dataContent[0].description.split(/\·\s|\•\s|\n/g);descriptionFormated.map(function(desc){var formatedText=_?_.capitalize(desc.trim()):desc.trim();if(!formatedText||!formatedText.length){return}if(formatedText.match(/Objetivos Gerais/g)){formatedText=formatedText.split(/Objetivos Gerais/g);formatedText.shift();formatedText[0]=formatedText[0].replace(/Objetivos Específicos/g,"");$(".objetivos-gerais").next().text(formatedText[0]);return}if(formatedText.match(/Objetivos Gerais/g)==null){var liText="<li>".concat(formatedText,"</li>");$(".objetivos-especificos").append(liText);return}})}if(dataContent[0]["Disciplina"]==null||dataContent[0]["Disciplina"][0]==null){console.log("Disciplina - [Vazio]");$("#mz-subjects, .texts.subjects").hide()}else{$(".subjects.descriptions").html(dataContent[0]["Disciplina"][0])}if(dataContent[0]["Certificação"]==null||dataContent[0]["Certificação"][0]==null){console.log("Disciplina - [Vazio]");$("#mz-certification, .certification.descriptions").hide()}if(dataContent[0]["Modalidade"]==null||dataContent[0]["Modalidade"][0]==null){console.log("Modalidade - [Vazio]");$("#mz-modality, .texts.modality").hide()}else{if(dataContent[0]["Modalidade"][0]==="EAD - 10 meses"||dataContent[0]["Modalidade"][0]==="EAD - 6 meses"){var text='<h3>Conheça seu Curso: </h3><div class="text-ead"><b>Cursos a distância (online):</b> <span>Os cursos a distância são ideais para você que valoriza a mobilidade e a flexibilidade quanto aos seus horários de estudo, no seu ritmo de aprendizagem.</span></div><div class="text-ead">Você estuda 100% online e a carga horária do curso é de 360h em 9 disciplinas específicas (40h cada disciplina).</div><div class="text-ead">A cada disciplina, você contará com leituras digitais, slides, videoaulas e podcasts preparados por professores de destaque na área, que aliam conhecimentos teóricos e discussões sobre a prática profissional, como aprendizagem em foco. Além disso, você também terá o Desafio Profissional e atividades avaliativas que o ajudarão ainda mais a colocar em prática todo o aprendizado.</div><div class="text-ead">Você contará também com o acompanhamento de um tutor para auxiliá-lo nas dúvidas que surgirem durante seu curso.</div><div class="text-ead">A certificação de um curso EAD é igual ao do curso presencial.</div>';$(".modality.descriptions").append(text)}if(dataContent[0]["Modalidade"][0]==="Semi-presencial"){var _text="<h3>Conheça seu Curso: </h3><p><b>Cursos Semipresenciais:</b> reúne o melhor das duas modalidades, com a flexibilidade do ensino à distância e do presencial. Do ensino a distância, você tem a possibilidade de estudar, no seu próprio ritmo de aprendizagem onde, quando e como quiser, com conteúdo e atividades preparados por professores de destaque na área e acompanhado por um tutor. Do ensino presencial, você ampliará sua rede de relacionamento com colegas e professores e discutirá estudos de caso ou simulados, orientados por um professor.</p>";$(".modality.descriptions").append(_text)}if(dataContent[0]["Modalidade"][0]==="Presencial"){var _text2="<h3>Conheça seu Curso: </h3><p><b>Curso presencial:</b> é o modelo ideal para você que valoriza o networking e a interação face a face com professores e colegas, bem como a rotina e as vivências da sala de aula. Os conteúdos dos cursos são cuidadosamente planejados para tratar dos temas mais relevantes da área, aliando conhecimentos teóricos e discussões sobre a prática e o cotidiano profissional.</p><p>O aluno também cumpre uma parte de sua grade disciplinar por meio de carga horária online, respeitando normas regulatórias do MEC. Essas disciplinas irão prepará-lo ainda mais para a realidade do mercado de trabalho. Além disso, você terá mais flexibilidade para conciliar os estudos a sua rotina, além de ter esse conteúdo disponível a qualquer momento*.</p>";$(".modality.descriptions").append(_text2)}}},getLocationByLocalStorage:function getLocationByLocalStorage(dataProduct){if(localStorage&&localStorage.mzGeoInfo&&localStorage.mzGeoInfo.length){var locationSeted=JSON.parse(localStorage.mzGeoInfo);var estado=locationSeted.uf;var nomeCurso=dataProduct["Nome Curso"][0];var marca=dataProduct.brandId;var modalidade=Product.getModality(dataProduct["Modalidade"][0]);var whereClause="?whereClause=(nomeCurso='".concat(nomeCurso,"' AND codUF='").concat(estado,"' AND idModalidade='").concat(modalidade,"' AND idMarca='").concat(marca,"')");if(Cookies.get("marcaOrigem")==="uniderp"){whereClause="?whereClause=(nomeCurso='".concat(nomeCurso,"' AND codUF='").concat(estado,"' AND idModalidade='").concat(modalidade,"' AND idMarca='").concat(marca,"' AND idUnidade='789')")}var selectCity=$("#mz-modal-select-city");var selectUnit=$("#mz-modal-select-unit");var options;var regexState=/-SP/g;$(".mz-product__modal.location button").attr("disabled","disabled");try{$.ajax({url:"https://middleware.portalpos.com.br/api/v1/ofertas/localidades/".concat(whereClause),type:"GET",dataType:"json",success:function success(cityResposne){for(var city in cityResposne[2].facets){city=city.replace(regexState,"");options='<option value="'.concat(city,'">').concat(city,"</option>");selectCity.append(options)}}}).done(function(){selectCity.on("change",function(){var $t=$(this);var thisCity=$t.val();var params="?nomeCurso=".concat(nomeCurso,"&codUF=").concat(estado,"&idModalidade=").concat(modalidade,"&idMarca=").concat(marca,"&cidade=").concat(thisCity,"-").concat(estado);if(Cookies.get("marcaOrigem")==="uniderp"){params="?nomeCurso=".concat(nomeCurso,"&codUF=").concat(estado,"&idModalidade=").concat(modalidade,"&idMarca=").concat(marca,"&cidade=").concat(thisCity,"-").concat(estado,"&idUnidade=789")}if(~window.location.search.indexOf("superbusca")){params="?nomeCurso=".concat(nomeCurso,"&codUF=").concat(estado,"&idModalidade=").concat(modalidade,"&idMarca=").concat(marca,"&cidade=").concat(thisCity,"|").concat(estado);if(Cookies.get("marcaOrigem")==="uniderp"){params="?nomeCurso=".concat(nomeCurso,"&codUF=").concat(estado,"&idModalidade=").concat(modalidade,"&idMarca=").concat(marca,"&cidade=").concat(thisCity,"|").concat(estado,"&idUnidade=789")}}$.ajax({url:"https://middleware.portalpos.com.br/api/v1/ofertas/unidades".concat(params),type:"GET",dataType:"json",success:function success(unitsResponse){selectUnit.html("");if(unitsResponse.length>1){unitsResponse.forEach(function(unit){options='<option data-id-unit="'.concat(unit.idUnidade,'" data-id-polo="').concat(unit.idOfertaPolo,'" value="').concat(unit.nomeUnidade,'">').concat(unit.nomeUnidade,"</option>");selectUnit.append(options)})}else if(unitsResponse.length==1){unitsResponse.forEach(function(unit){options='<option data-id-unit="'.concat(unit.idUnidade,'" data-id-polo="').concat(unit.idOfertaPolo,'" value="').concat(unit.nomeUnidade,'">').concat(unit.nomeUnidade,"</option>");selectUnit.append(options)});selectUnit.val(unitsResponse[0].nomeUnidade);$(".mz-product__modal.location button").removeAttr("disabled")}}})});selectUnit.on("change",function(){$(".mz-product__modal.location button").removeAttr("disabled")});Product.applySelect2InSelects(selectCity,selectUnit);Product.applyAsideBox();Product.applyConsultors()})}catch(e){console.log("Erro: ",e.message)}}else{console.log("Não achei!")}},applyAsideBox:function applyAsideBox(){$("#mz-location-unity-confirm").on("click",function(e){e.preventDefault();var unitSelected=$("#mz-modal-select-unit").find(":selected").attr("data-id-unit");try{$.ajax({url:"https://middleware.portalpos.com.br/api/v1/unidades/?id=".concat(unitSelected),type:"GET"}).done(function(response){if(!response.length){console.log("Nenhum dado retornado.");return}var adress="".concat(response[0].endereco,", ").concat(response[0].numero," - ").concat(response[0].cidade,"/").concat(response[0].uf);var phone="Telefone: ".concat(response[0].tel);$(".location.name-univercity").text(response[0].nome);$(".location.address-univercity").text(adress);$(".location.phone").text(phone)})}catch(e){console.log("Erro na busca das informações unidade: ",e.message)}$(document.body).removeClass(Product.bgOverlay)})},getModality:function getModality(modalidade){switch(modalidade){case"EAD - 10 meses":return"EAD";case"Educação a distância":return"EAD";case"Semi-presencial":return"SEMI_PRESENCIAL";case"Presencial":return"PRESENCIAL";case"EAD - 6 meses":return"INTENSIVO"}},applySelect2InSelects:function applySelect2InSelects(selectCity,selectUnit){selectCity.select2({placeholder:"Selecione uma Cidade...",language:{noResults:function noResults(){return"Nenhuma cidade encontrada!"}},dropdownParent:selectCity.parent()});selectUnit.select2({placeholder:"Selecione uma Unidade...",language:{noResults:function noResults(){return"Nenhuma unidade encontrada!"}},dropdownParent:selectCity.parent()})},applyConsultors:function applyConsultors(){var selectConsultors=$("#mz-attendance-consultor");var options;$("#mz-not-consultor").on("change",function(){$("#mz-attendance-consultor").parent().hide()});var countChange=0;$("#mz-yes-consultor").on("change",function(){if(countChange>=1){$("#mz-attendance-consultor").parent().show();return}$.ajax({url:"https://middleware.portalpos.com.br/api/v1/consultores",type:"POST",dataType:"json",data:'{"idUnidade":"12415"}',cache:true}).done(function(responseConsultor){responseConsultor.consultores.forEach(function(item){options='<option value="'.concat(item.id,'">').concat(item.nome,"</option>");selectConsultors.append(options)});selectConsultors.select2({placeholder:"Selecione o consultor",language:{noResults:function noResults(){return"Nenhum consultor encontrado."}},dropdownParent:selectConsultors.parent()});$("#mz-attendance-consultor").parent().show();countChange++})});selectConsultors.on("change",function(){console.log("Consultor!")})},applyInstallments:function applyInstallments(){$("#mz-price-installements").on("click",function(){var idPolo=$("#mz-modal-select-unit").find(":selected").attr("data-id-polo");var token="eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJrb3Ntb3MuaW50ZWdyYWNhbyIsInJvbGVzIjpbXSwiaXNzIjoiU3ByaW5nIFNlY3VyaXR5IFJFU1QgR3JhaWxzIFBsdWdpbiIsImV4cCI6MTYwMjE4MjA3OSwiaWF0IjoxNjAxOTIyODc5fQ.hkDY_l0MxKWyzUrjcbGQDA6-Ja7GvSS_ruH81RwX1FY";var urlTarget="https://rest.ksms.com.br/api/vtex/pos/inscricao/planos/ofertaPolo/".concat(idPolo,"?access_token=").concat(token);$.ajax({type:"GET",method:"GET",url:urlTarget,dataType:"json"}).done(function(response){console.log(response)})})}};Product.init()}catch(e){console.log("Erro na instancia [Product]: ",e)}})();