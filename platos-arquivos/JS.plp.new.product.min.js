/* MEWTWO - 22/10/2020 16:14:25 GMT */
"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function mz_number_format(n,t,e,i){n=(n+"").replace(/[^0-9+\-Ee.]/g,""),n=isFinite(+n)?+n:0,i=void 0===i?",":i,e=void 0===e?".":e;var r="";r=function r(n,t){var e=Math.pow(10,t);return""+(Math.round(n*e)/e).toFixed(t)};return 3<(r=((t=isFinite(+t)?Math.abs(t):0)?r(n,t):""+Math.round(n)).split("."))[0].length&&(r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(r[1]||"").length<t&&(r[1]=r[1]||"",r[1]+=Array(t-r[1].length+1).join("0")),r.join(e)}(function(){try{var Product={init:function init(){Product.bringAllData();Product.applyShareActions();Product.applyAccordions();Product.applyEbookModal();Product.setBrandImage();Product.applyInstallments();Product.chooseFirstTimeLocationUnit();Product.changeLocationUnit();Product.applyLinkToGoogleMaps();Product.applyUnitTour();Product.getCourseDetail();Product.callDataUnit();Product.addProductInCheckout();Product.addEbookInCheckout()},bgOverlay:"mz-mdlocation-on",dataAll:{dataProduct:"",dataEbook:"",dataUf:"",dataCity:"",idModalidade:"",dataUnitID:"",dataBrandID:"",dataOfferID:"",dataOfferPlanPoloID:"",dataDetailsDuration:"",dataDetailsMeetings:"",dataConsultorID:"",dataUnitAddress:"",dataRegionID:"",dataCourseID:"",dataAffiliationID:"",dataInstallmentID:"",dataSkuNameInst:"",dataMestreIndica:"",selectedPaymentValue:"",dataAdress:{address:"",city:"",complement:"",idCounty:"",name:"",number:"",tel:"",uf:""},orderData:""},applyShareActions:function applyShareActions(){$("#mz-share-button").on("click",function(){$(".mz-product__banner.to-share").slideToggle()})},applyAccordions:function applyAccordions(){$("#mz-about-course").on("click",function(){$("html, body").animate({scrollTop:$(".texts.about-course").offset().top-150},1e3)});$("#mz-subjects").on("click",function(){$("html, body").animate({scrollTop:$(".texts.subjects").offset().top-150},1e3)});$("#mz-certification").on("click",function(){$("html, body").animate({scrollTop:$(".texts.certification").offset().top-150},1e3)});$("#mz-modality").on("click",function(){$("html, body").animate({scrollTop:$(".texts.modality").offset().top-150},1e3)});$("#mz-mec").on("click",function(){$("html, body").animate({scrollTop:$(".texts.mec").offset().top-150},1e3)})},setBrandImage:function setBrandImage(){var brandCookie=$.cookie("marcaOrigem");if(brandCookie==undefined){$(".mz-product__brand").addClass("brand-platos")}else{var nameImage="portalpos-logo-".concat(brandCookie,"-dark");var urlImage="https://portalpos2.vteximg.com.br/arquivos/".concat(nameImage,".png");$(".mz-product__brand img").attr("src",urlImage)}},bringAllData:function bringAllData(){var productUrl=window.location.pathname;$.ajax({type:"GET",method:"GET",url:"/api/catalog_system/pub/products/search".concat(productUrl),dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"}}).done(function(dataSku){Product.dataAll.dataProduct=dataSku[0];var headingOne=dataSku[0]["Nome Curso"][0];var fullBanner=dataSku[0].items[0].images[1].imageUrl;var modality=dataSku[0]["Modalidade"][0];var duration=dataSku[0]["Duração"][0];var initCourse=dataSku[0]["Previsão de início"][0];var area=dataSku[0]["Área de Estudo"][0];$(".mz-product__infos h1").text(headingOne);$("#mz-main-banner").attr("src",fullBanner);$("#mz-main-banner").show("fast");$(".infos.modality").text(modality);$(".infos.duration").text(duration);$(".infos.course").text(initCourse);$(".infos.area").text(area);Product.buildTextContent(dataSku);Product.getLocationByLocalStorage();Product.applyEbookInfos()})},buildTextContent:function buildTextContent(dataContent){if(dataContent[0]["Público Alvo"][0].length){$(".publico-alvo").next().text(dataContent[0]["Público Alvo"][0])}else{$(".publico-alvo").hide();$(".publico-alvo").next().hide()}if(dataContent[0].description.length){var descriptionFormated=dataContent[0].description.split(/\·\s|\•\s|\n/g);descriptionFormated.map(function(desc){var formatedText=_?_.capitalize(desc.trim()):desc.trim();if(!formatedText||!formatedText.length){$(".objetivos-gerais, .objetivos-especificos").hide();$(".objetivos-gerais, .objetivos-especificos").next().hide();return}if(formatedText.match(/Objetivos Gerais/g)){formatedText=formatedText.split(/Objetivos Gerais/g);formatedText.shift();formatedText[0]=formatedText[0].replace(/Objetivos Específicos/g,"");$(".objetivos-gerais").next().text(formatedText[0]);return}if(formatedText.match(/Objetivos Gerais/g)==null){var liText="<li>".concat(formatedText,"</li>");$(".objetivos-especificos").next().append(liText);return}})}else{$(".objetivos-gerais, .objetivos-especificos").hide();$(".objetivos-gerais, .objetivos-especificos").next().hide();console.log("Sobre o Curso - Objetivos - [Vazio]")}if(dataContent[0]["Disciplina"]==null||dataContent[0]["Disciplina"][0]==null){console.log("Disciplina - [Vazio]");$("#mz-subjects, .texts.subjects").hide()}else{$(".subjects.descriptions").html(dataContent[0]["Disciplina"][0]);console.log("Disciplinas - [Vazio]")}if(dataContent[0]["Certificação"][0].length){$(".certification.descriptions").html("<p>".concat(dataContent[0]["Certificação"][0],"</p>"))}else{$(".texts.certification").hide();$("#mz-certification").parent().hide();console.log("Certificação - [Vazio]")}if(dataContent[0]["Modalidade"][0].length){if(dataContent[0]["Modalidade"][0]==="EAD - 10 meses"||dataContent[0]["Modalidade"][0]==="EAD - 6 meses"){var text='<h3>Conheça seu Curso: </h3><div class="text-ead"><b>Cursos a distância (online):</b> <span>Os cursos a distância são ideais para você que valoriza a mobilidade e a flexibilidade quanto aos seus horários de estudo, no seu ritmo de aprendizagem.</span></div><div class="text-ead">Você estuda 100% online e a carga horária do curso é de 360h em 9 disciplinas específicas (40h cada disciplina).</div><div class="text-ead">A cada disciplina, você contará com leituras digitais, slides, videoaulas e podcasts preparados por professores de destaque na área, que aliam conhecimentos teóricos e discussões sobre a prática profissional, como aprendizagem em foco. Além disso, você também terá o Desafio Profissional e atividades avaliativas que o ajudarão ainda mais a colocar em prática todo o aprendizado.</div><div class="text-ead">Você contará também com o acompanhamento de um tutor para auxiliá-lo nas dúvidas que surgirem durante seu curso.</div><div class="text-ead">A certificação de um curso EAD é igual ao do curso presencial.</div>';$(".modality.descriptions").append(text)}if(dataContent[0]["Modalidade"][0]==="Semi-presencial"){var _text="<h3>Conheça seu Curso: </h3><p><b>Cursos Semipresenciais:</b> reúne o melhor das duas modalidades, com a flexibilidade do ensino à distância e do presencial. Do ensino a distância, você tem a possibilidade de estudar, no seu próprio ritmo de aprendizagem onde, quando e como quiser, com conteúdo e atividades preparados por professores de destaque na área e acompanhado por um tutor. Do ensino presencial, você ampliará sua rede de relacionamento com colegas e professores e discutirá estudos de caso ou simulados, orientados por um professor.</p>";$(".modality.descriptions").append(_text)}if(dataContent[0]["Modalidade"][0]==="Presencial"){var _text2="<h3>Conheça seu Curso: </h3><p><b>Curso presencial:</b> é o modelo ideal para você que valoriza o networking e a interação face a face com professores e colegas, bem como a rotina e as vivências da sala de aula. Os conteúdos dos cursos são cuidadosamente planejados para tratar dos temas mais relevantes da área, aliando conhecimentos teóricos e discussões sobre a prática e o cotidiano profissional.</p><p>O aluno também cumpre uma parte de sua grade disciplinar por meio de carga horária online, respeitando normas regulatórias do MEC. Essas disciplinas irão prepará-lo ainda mais para a realidade do mercado de trabalho. Além disso, você terá mais flexibilidade para conciliar os estudos a sua rotina, além de ter esse conteúdo disponível a qualquer momento*.</p>";$(".modality.descriptions").append(_text2)}}else{$("#mz-modality, .texts.modality").hide();console.log("Modalidade - [Vazio]")}},getLocationByLocalStorage:function getLocationByLocalStorage(){if(localStorage&&localStorage.mzGeoInfo&&localStorage.mzGeoInfo.length){var locationSeted=JSON.parse(localStorage.mzGeoInfo);var estado=locationSeted.uf;var _nomeCurso=Product.dataAll.dataProduct["Nome Curso"][0];var marca=Product.dataAll.dataProduct.brandId;var modalidade=Product.getModality(Product.dataAll.dataProduct["Modalidade"][0]);Product.dataAll.dataBrandID=Product.dataAll.dataProduct.brandId;var whereClause="?whereClause=(nomeCurso='".concat(_nomeCurso,"' AND codUF='").concat(estado,"' AND idModalidade='").concat(modalidade,"' AND idMarca='").concat(marca,"')");if(Cookies.get("marcaOrigem")==="uniderp"){whereClause="?whereClause=(nomeCurso='".concat(_nomeCurso,"' AND codUF='").concat(estado,"' AND idModalidade='").concat(modalidade,"' AND idMarca='").concat(marca,"' AND idUnidade='789')")}var selectCity=$("#mz-modal-select-city");var selectUnit=$("#mz-modal-select-unit");var options;var regexState=/-SP/g;try{$.ajax({url:"https://middleware.portalpos.com.br/api/v1/ofertas/localidades/".concat(whereClause),type:"GET",dataType:"json",success:function success(cityResposne){for(var city in cityResposne[2].facets){city=city.replace(regexState,"");options='<option value="'.concat(city,'">').concat(city,"</option>");selectCity.append(options)}}}).done(function(){selectCity.on("change",function(){var $t=$(this);var thisCity=$t.val();var params="?nomeCurso=".concat(_nomeCurso,"&codUF=").concat(estado,"&idModalidade=").concat(modalidade,"&idMarca=").concat(marca,"&cidade=").concat(thisCity,"-").concat(estado);if(Cookies.get("marcaOrigem")==="uniderp"){params="?nomeCurso=".concat(_nomeCurso,"&codUF=").concat(estado,"&idModalidade=").concat(modalidade,"&idMarca=").concat(marca,"&cidade=").concat(thisCity,"-").concat(estado,"&idUnidade=789")}if(~window.location.search.indexOf("superbusca")){params="?nomeCurso=".concat(_nomeCurso,"&codUF=").concat(estado,"&idModalidade=").concat(modalidade,"&idMarca=").concat(marca,"&cidade=").concat(thisCity,"|").concat(estado);if(Cookies.get("marcaOrigem")==="uniderp"){params="?nomeCurso=".concat(_nomeCurso,"&codUF=").concat(estado,"&idModalidade=").concat(modalidade,"&idMarca=").concat(marca,"&cidade=").concat(thisCity,"|").concat(estado,"&idUnidade=789")}}$.ajax({url:"https://middleware.portalpos.com.br/api/v1/ofertas/unidades".concat(params),type:"GET",dataType:"json",success:function success(unitsResponse){selectUnit.html("");if(unitsResponse.length>1){unitsResponse.forEach(function(unit){options='<option data-id-course="'.concat(unit.idCurso,'" data-id-affiliation="').concat(unit.afiliacao,'" data-id-offer=').concat(unit.idOfertaPolo,' data-id-unit="').concat(unit.idUnidade,'" data-id-polo="').concat(unit.idOferta,'" value="').concat(unit.nomeUnidade,'">').concat(unit.nomeUnidade,"</option>");selectUnit.append(options)})}else if(unitsResponse.length==1){unitsResponse.forEach(function(unit){options='<option data-id-course="'.concat(unit.idCurso,'" data-id-affiliation="').concat(unit.afiliacao,'" data-id-offer=').concat(unit.idOfertaPolo,' data-id-unit="').concat(unit.idUnidade,'" data-id-polo="').concat(unit.idOferta,'" value="').concat(unit.nomeUnidade,'">').concat(unit.nomeUnidade,"</option>");selectUnit.append(options)});selectUnit.val(unitsResponse[0].nomeUnidade);$(".mz-product__modal.location button").removeAttr("disabled")}}});Product.dataAll.idModalidade=Product.getModality(Product.dataAll.dataProduct["Modalidade"][0]);Product.dataAll.dataUf=estado;Product.dataAll.dataCity=thisCity});selectUnit.on("change",function(){$(".mz-product__modal.location button").removeAttr("disabled")});Product.applySelect2InSelects(selectCity,selectUnit);Product.applyAsideBox();Product.applyConsultors()})}catch(e){console.log("Erro: ",e.message)}}else{console.log("Não achei!")}},applyAsideBox:function applyAsideBox(){$("#mz-location-unity-confirm").on("click",function(e){e.preventDefault();var unitSelected=$("#mz-modal-select-unit").find(":selected").attr("data-id-unit");var unitSelectedOfferPlanID=$("#mz-modal-select-unit").find(":selected").attr("data-id-offer");var unitSelectedCourseID=$("#mz-modal-select-unit").find(":selected").attr("data-id-course");var unitSelectedAffiliatonID=$("#mz-modal-select-unit").find(":selected").attr("data-id-affiliation");var unitSelectedOfferID=$("#mz-modal-select-unit").find(":selected").attr("data-id-polo");Product.dataAll.dataUnitID=unitSelected;Product.dataAll.dataOfferID=unitSelectedOfferID;Product.dataAll.dataOfferPlanPoloID=unitSelectedOfferPlanID;Product.dataAll.dataOfferPlanPoloID=parseInt(Product.dataAll.dataOfferPlanPoloID);Product.dataAll.dataCourseID=unitSelectedCourseID;Product.dataAll.dataAffiliationID=unitSelectedAffiliatonID;$(".payment.chose-unit").hide("fast");$(".payment.chose-unit .mz-loader").show();try{$.ajax({url:"https://middleware.portalpos.com.br/api/v1/unidades/?id=".concat(unitSelected),type:"GET"}).done(function(response){if(!response.length){console.log("Nenhum dado retornado.");return}$(window).trigger("mzSetUnitConfirmed",response[0]);Product.dataAll.dataAdress.address=response[0].endereco;Product.dataAll.dataAdress.city=response[0].cidade;Product.dataAll.dataAdress.complement=response[0].complemento;Product.dataAll.dataAdress.idCounty=response[0].id_municipio;Product.dataAll.dataAdress.name=response[0].nome;Product.dataAll.dataAdress.number=response[0].numero;Product.dataAll.dataAdress.tel=response[0].tel;Product.dataAll.dataAdress.uf=response[0].uf;var adress="".concat(Product.dataAll.dataAdress.address,", ").concat(Product.dataAll.dataAdress.number," - ").concat(Product.dataAll.dataAdress.city,"/").concat(Product.dataAll.dataAdress.uf);var phone="Telefone: ".concat(Product.dataAll.dataAdress.tel);$(".location.name-univercity").text(Product.dataAll.dataAdress.name);$(".location.address-univercity").text(adress);$(".location.phone").text(phone);$(".mz-product__aside .mz-loader").hide("fast");$(".payment.location").show("fast");$(".payment.price").show("fast");$(".payment.ebook").show("fast");$(".payment.attendance").show("fast")})}catch(e){console.log("Erro na busca das informações unidade: ",e.message)}$(document.body).removeClass(Product.bgOverlay)})},getModality:function getModality(modalidade){switch(modalidade){case"EAD - 10 meses":return"EAD";case"Educação a distância":return"EAD";case"Semi-presencial":return"SEMI_PRESENCIAL";case"Presencial":return"PRESENCIAL";case"EAD - 6 meses":return"INTENSIVO"}},applySelect2InSelects:function applySelect2InSelects(selectCity,selectUnit){selectCity.select2({placeholder:"Selecione uma Cidade...",language:{noResults:function noResults(){return"Nenhuma cidade encontrada!"}},dropdownParent:selectCity.parent()});selectUnit.select2({placeholder:"Selecione uma Unidade...",language:{noResults:function noResults(){return"Nenhuma unidade encontrada!"}},dropdownParent:selectCity.parent()})},applyConsultors:function applyConsultors(){var selectConsultors=$("#mz-attendance-consultor");var options;$("#mz-not-consultor").on("change",function(){$("#mz-attendance-consultor").parent().hide()});var countChange=0;$("#mz-yes-consultor").on("change",function(){if(countChange>=1){$("#mz-attendance-consultor").parent().show();return}$.ajax({url:"https://middleware.portalpos.com.br/api/v1/consultores",type:"POST",dataType:"json",data:'{"idUnidade":"12415"}',cache:true}).done(function(responseConsultor){responseConsultor.consultores.forEach(function(item){options='<option value="'.concat(item.id,'">').concat(item.nome,"</option>");selectConsultors.append(options)});selectConsultors.select2({placeholder:"Selecione o consultor que te atendeu",language:{noResults:function noResults(){return"Nenhum consultor encontrado."}},dropdownParent:selectConsultors.parent()});$("#mz-attendance-consultor").parent().show();countChange++})})},applyInstallments:function applyInstallments(){window.countChanged=0;var regexList=Product.regexList();$("#mz-price-installements").on("click",function(){if(window.countChanged>=1){$(document.body).addClass("mz-mdpayment-on");return}$(document.body).addClass("mz-mdpayment-on");$(".mz-product__modal.payment .mz-loader").show("fast");var idPolo=$("#mz-modal-select-unit").find(":selected").attr("data-id-offer");var cookie=$.cookie("TKOSMOS");var urlFormated=encodeURI("".concat(window.storeConfig.kosmos.url,"/vtex/pos/inscricao/planos/ofertaPolo/").concat(idPolo,"?access_token=").concat(cookie));var listUl=$(".list-installments.installments");var agroupHtml="";var itemLi,onePayment;$.ajax({type:"GET",method:"GET",url:urlFormated,dataType:"json"}).done(function(response){var list=response;list=list.sort(function(a,b){return a.parcelas-b.parcelas});list.forEach(function(parc){var totalPrice=parc.parcelas*parc.valorParcela;totalPrice=mz_number_format(totalPrice,2,",",".");if(parc.parcelas>1){itemLi=' \n                                <li>\n                                    <label for="inp_'.concat(parc.id,'" data-names-sku="').concat(parc.parcelas,"x de R$ ").concat(parc.valorParcela.replace(regexList.dot,","),'">\n                                        <input type="radio" id="inp_').concat(parc.id,'" data-parc-id="').concat(parc.id,'" data-parc="').concat(parc.parcelas,'" data-value="').concat(parc.valorParcela,'" data-sku="').concat(parc.valorPrimeiraParcela,'" name="inp_parc" />\n                                        ').concat(parc.parcelas,"x R$ ").concat(parc.valorParcela.replace(regexList.dot,","),'\n                                    </label>\n                                    <label id="valueTotal">R$ ').concat(totalPrice,"</label>\n                                </li>\n                                ");agroupHtml=agroupHtml+itemLi}else if(parc.parcelas==1){var largestInstallment=list[list.length-1];var valueLargestInstallment=largestInstallment.valorParcela*largestInstallment.parcelas;var valueSaved=valueLargestInstallment-parc.valorParcela;if(parc.parcelas==1&&Product.dataAll.dataProduct.brand!=="LFG"){valueSaved="(economize até R$ ".concat(mz_number_format(valueSaved,2,",","."),")")}else if(parc.parcelas==1&&Product.dataAll.dataProduct.brand==="LFG"){valueSaved="(10% de desconto)"}onePayment=' \n                                <li>\n                                    <label for="inp_'.concat(parc.id,'" data-names-sku="').concat(parc.parcelas,"x de R$ ").concat(parc.valorParcela.replace(regexList.dot,","),'">\n                                        <input type="radio" id="inp_').concat(parc.id,'" data-parc-id="').concat(parc.id,'" data-parc="').concat(parc.parcelas,'" data-value="').concat(parc.valorParcela,'" data-sku="').concat(parc.valorPrimeiraParcela,'" name="inp_parc" />\n                                        À vista - R$ ').concat(parc.valorParcela.replace(regexList.dot,","),'\n                                    </label>\n                                    <label id="valueTotal" class="one-payment">\n                                        R$ ').concat(totalPrice,'\n                                        <span class="value-economic">').concat(valueSaved,"</span>\n                                    </label>\n                                </li>\n                                ")}});agroupHtml=agroupHtml+onePayment;listUl.html(agroupHtml);$(".mz-product__modal.payment .mz-loader").hide("fast");window.countChanged++})});$(document).on("click",".list-installments.installments label[for]",function(){$(".list-installments.installments label[for]").removeClass("ativo");$(this).addClass("ativo");setTimeout(function(){$(document.body).removeClass("mz-mdpayment-on")},1e3)});var buttonsClose=$(".mz-product__modal.payment .mz-modal__close button, .mz-bgoverlay");buttonsClose.on("click",function(){$(document.body).removeClass("mz-mdpayment-on")})},applyEbookInfos:function applyEbookInfos(){var codCurso=Product.dataAll.dataProduct["Código Curso"];var modalidade=Product.dataAll.dataProduct["Modalidade"];var ebookSpecificationFilterId=window.storeConfig.ebookSpecificationFilterId;var ebookSalesChannel=window.storeConfig.ebookSalesChannel;var urlTarget="/api/catalog_system/pub/products/search/"+codCurso+"/?map=specificationFilter_"+ebookSpecificationFilterId+"&sc="+ebookSalesChannel;if(modalidade=="EAD - 10 meses"||modalidade=="EAD - 6 meses"){$.ajax({type:"GET",method:"GET",url:urlTarget,dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"}}).done(function(response){if(!response||!response.length){$(".payment.ebook").addClass("hide-book");return}Product.dataAll.dataEbook=response[0];var price=mz_number_format(response[0].items[0].sellers[0].commertialOffer.Price,2,",",".");$(".mz-modal.mz-product__modal.ebook .price").text(price);var name=Product.dataAll.dataProduct["Nome Curso"][0];name=name.split("|")[0];$(".mz-modal.mz-product__modal.ebook .name-course").text(name)})}},applyEbookModal:function applyEbookModal(){$("#mz-ebook-link").on("click",function(){$(document.body).addClass("mz-mdebook-on")});$(".mz-modal.mz-product__modal.ebook .mz-modal__close button, .mz-bgoverlay").on("click",function(){$(document.body).removeClass("mz-mdebook-on")})},chooseFirstTimeLocationUnit:function chooseFirstTimeLocationUnit(){var buttonUnit=$("#mz-chose-unit");buttonUnit.on("click",function(){$(document.body).addClass("mz-mdlocation-on")})},changeLocationUnit:function changeLocationUnit(){var buttonChangeUnit=$("#mz-location-change");buttonChangeUnit.on("click",function(){window.countChanged=0;$(document.body).addClass("mz-mdlocation-on")});var buttonsClose=$(".mz-product__modal.location .mz-modal__close button, .mz-bgoverlay");buttonsClose.on("click",function(){$(document.body).removeClass("mz-mdlocation-on")})},getEbookAndPodcast:function getEbookAndPodcast(dataIdCourse){$.ajax({type:"GET",method:"GET",url:"https://www.portalpos.com.br/api/dataentities/adminprodinfo/search?idproduto=".concat(dataIdCourse,"&_schema=mz-body&an=portalpos2"),dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"}}).done(function(response){if(!response||!response.length){console.log("Nenhum Podcast cadastrado a esse produto.");return}})},applyLinkToGoogleMaps:function applyLinkToGoogleMaps(){var linkMaps=$("#mz-location-maps");var link;$(window).on("mzSetUnitConfirmed",function(evt,data){link="http://maps.google.com/?q=".concat(data.endereco,",").concat(data.numero," - ").concat(data.cidade,"/").concat(data.uf);linkMaps.attr("href",link);linkMaps.attr("target","_blank")})},applyUnitTour:function applyUnitTour(){$(window).on("mzSetUnitConfirmed",function(){var unitSelected=$("#mz-modal-select-unit").find(":selected").attr("data-id-unit");$.ajax({url:"//api.vtex.com.br/portalpos2/dataentities/TT/search?unidadeid=".concat(unitSelected,"&_fields=unidadevideo"),type:"GET"}).done(function(response){if(!response.length){console.log("Nenhuma Unidade de Tour recebida.");$(".location.tour").hide();return}$(".location.tour").attr("href",response[0].unidadevideo)})})},callDataUnit:function callDataUnit(){$(window).on("mzSetUnitConfirmed",function(){var unitSelected=$("#mz-modal-select-unit").find(":selected").attr("data-id-unit");try{$.ajax({url:"https://middleware.portalpos.com.br/api/v1/unidades/?id=".concat(unitSelected),type:"GET"}).done(function(response){if(!response.length){console.log("Nenhum dado retornado.");return}Product.dataAll.dataUnitID=unitSelected;Product.dataAll.dataAdress.address=response[0].endereco;Product.dataAll.dataAdress.city=response[0].cidade;Product.dataAll.dataAdress.complement=response[0].complemento;Product.dataAll.dataAdress.idCounty=response[0].id_municipio;Product.dataAll.dataAdress.name=response[0].nome;Product.dataAll.dataAdress.number=response[0].numero;Product.dataAll.dataAdress.tel=response[0].tel;Product.dataAll.dataAdress.uf=response[0].uf})}catch(e){console.log("Erro na busca das informações unidade: ",e.message)}})},getCourseDetail:function getCourseDetail(){$(window).on("mzSetUnitConfirmed",function(){var params="?nomeCurso=".concat(Product.dataAll.dataProduct["Nome Curso"][0],"&codUF=").concat(Product.dataAll.dataUf,"&idModalidade=").concat(Product.dataAll.idModalidade,"&idMarca=").concat(Product.dataAll.dataBrandID,"&cidade=").concat(Product.dataAll.dataCity,"-").concat(Product.dataAll.dataUf,"&idUnidade=").concat(Product.dataAll.dataUnitID);if(~window.location.search.indexOf("superbusca")){params="?nomeCurso=".concat(nomeCurso,"&codUF=").concat(Product.dataAll.dataUf,"&idModalidade=").concat(Product.dataAll.idModalidade,"&idMarca=").concat(Product.dataAll.dataBrandID,"&cidade=").concat(Product.dataAll.dataCity,"|").concat(Product.dataAll.dataUf,"&idUnidade=").concat(Product.dataAll.dataUnitID)}$.ajax({url:"https://middleware.portalpos.com.br/api/v1/ofertas/cursos/detalhes".concat(params),type:"GET"}).done(function(response){if(!response||!response.length){console.log("Nenhum dado retornado de: Detalhes de Curso.");return}Product.dataAll.dataDetailsMeetings=response[0].encontros;Product.dataAll.dataDetailsDuration=response[0].duracao})})},addProductInCheckout:function addProductInCheckout(){var buyButton=$("#mz-buy-button");var regexList=Product.regexList();buyButton.one("click",function(){$(".payment.chose-unit, .payment.location, .payment.voucher, .payment.price, .payment.ebook, .payment.attendance").slideUp("fast");$(".mz-loader").show("fast");$(".mz-loader span").show("fast");$(".mz-loader span").css({display:"block"});var idPolo=$("#mz-modal-select-unit").find(":selected").attr("data-id-offer");var cookie=$.cookie("TKOSMOS");var urlFormated=encodeURI("".concat(window.storeConfig.kosmos.url,"/vtex/pos/inscricao/planos/ofertaPolo/").concat(idPolo,"?access_token=").concat(cookie));$.ajax({type:"GET",method:"GET",url:urlFormated,dataType:"json"}).done(function(response){var firstInstallment=[];response.forEach(function(parc){firstInstallment.push(parc.parcelas)});firstInstallment=response.sort();firstInstallment=firstInstallment[0];var unidadeEndereco=Product.dataAll.dataAdress.address;if(Product.dataAll.dataAdress.number){unidadeEndereco+=", "+Product.dataAll.dataAdress.number}if(Product.dataAll.dataAdress.complement){unidadeEndereco+=" - "+Product.dataAll.dataAdress.complement}unidadeEndereco+=" - "+Product.dataAll.dataAdress.city+"/"+Product.dataAll.dataAdress.uf;Product.dataAll.dataUnitAddress=unidadeEndereco;Product.dataAll.dataRegionID=Product.dataAll.dataAdress.idCounty;var consultorSelected=$("#mz-attendance-consultor").find(":selected").attr("value");Product.dataAll.dataConsultorID=consultorSelected?consultorSelected||"-":"-";if(Product.dataAll.dataConsultorID!="-"){Product.dataAll.dataConsultorID=parseInt(Product.dataAll.dataConsultorID)}var valorParcela,valorParcelaOriginal,qtdParcelas,valorMatriculaPresencial,nameSku;var valorTotal=0;var parcelas=[];if(!$('input[name="inp_parc"]:checked').length){valorParcelaOriginal=firstInstallment.valorParcela;valorParcela=firstInstallment.valorParcela;valorParcela=valorParcela.replace(regexList.dot,"");valorParcela=valorParcela/100;qtdParcelas=firstInstallment.parcelas;valorMatriculaPresencial=valorParcela;Product.dataAll.selectedPaymentValue=valorMatriculaPresencial;Product.dataAll.selectedPaymentValue=valorParcelaOriginal.replace(regexList.dot,"");Product.dataAll.selectedPaymentValue=Product.dataAll.selectedPaymentValue.toString();valorTotal=valorParcela;nameSku="".concat(qtdParcelas,"x de R$ ").concat(valorParcelaOriginal.replace(regexList.dot,","));for(var i=1;i<=qtdParcelas;i++){parcelas.push({parcela:i,desconto:0,percentaul:0,valor:valorParcela,valorOriginal:valorParcela});valorTotal+=valorParcela}valorTotal=parseFloat(valorTotal)}else if($('input[name="inp_parc"]:checked').length){valorParcela=$('input[name="inp_parc"]:checked').attr("data-value");qtdParcelas=$('input[name="inp_parc"]:checked').attr("data-parc");valorMatriculaPresencial=$('input[name="inp_parc"]:checked').attr("data-sku");nameSku=$('input[name="inp_parc"]:checked').parent().attr("data-names-sku");Product.dataAll.selectedPaymentValue=valorMatriculaPresencial.replace(regexList.dot,"");Product.dataAll.dataInstallmentID=$('input[name="inp_parc"]:checked').attr("data-parc-id");Product.dataAll.dataSkuNameInst=nameSku;valorParcela=valorParcela.replace(regexList.dot,"");valorParcela=valorParcela/100;valorMatriculaPresencial=valorMatriculaPresencial.replace(regexList.dot,"");valorMatriculaPresencial=valorMatriculaPresencial/100;for(var i=1;i<=qtdParcelas;i++){parcelas.push({parcela:i,desconto:0,percentaul:0,valor:valorParcela,valorOriginal:valorParcela});valorTotal+=valorParcela}valorTotal=parseFloat(valorTotal)}switch(Product.dataAll.idModalidade.toLowerCase()){case"ead":case"intensivo":valorMatriculaPresencial:0;break}Product.dataAll.orderData=_objectSpread(_objectSpread({},window.storeHelpers.generic.getResetedOrderData()),{},{payment:{valorMatricula:valorMatriculaPresencial,valorTotal:valorTotal,valorMatriculaPresencial:valorMatriculaPresencial,parcelas:parcelas},idOfertaPlano:Product.dataAll.dataOfferPlanPoloID,idModalidade:Product.dataAll.idModalidade,modalityVtexName:Product.dataAll.dataProduct["Modalidade"][0],nomesku:Product.dataAll.dataSkuNameInst,courseName:Product.dataAll.dataProduct["Nome Curso"][0],productId:Product.dataAll.dataProduct.productId,productArea:Product.dataAll.dataProduct["Área de Estudo"][0],brand:Product.dataAll.dataProduct.brand,brandId:Product.dataAll.dataProduct.brandId,regiao:Product.dataAll.dataRegionID,unidadeEndereco:Product.dataAll.dataUnitAddress,unidadeID:Product.dataAll.dataUnitID,unidadeNome:Product.dataAll.dataAdress.name.toLowerCase(),encontros:Product.dataAll.dataDetailsMeetings,duracao:Product.dataAll.dataDetailsDuration,consultor:Product.dataAll.dataConsultorID,courseUrl:"/".concat(Product.dataAll.dataProduct.linkText,"/p"),category:Product.dataAll.dataProduct.categories[0].replace(/^\/|\/$/g,""),categories:Product.dataAll.dataProduct.categories[0].replace(/^\/|\/$/g,"").split("/"),categoriesIds:Product.dataAll.dataProduct.categoriesIds[0].replace(/^\/|\/$/g,"").split("/"),vtexSkuId:Product.dataAll.dataProduct.items[0].itemId,vtexSkuName:Product.dataAll.dataProduct.items[0].nameComplete,vtexSkuPrice:Product.dataAll.dataProduct.items[0].sellers[0].commertialOffer.Price,vtexSkuVariant:Product.dataAll.dataProduct.items[0].name,vtexSellerId:Product.dataAll.dataProduct.items[0].sellers[0].sellerId});Product.dataAll.orderData.mestreIndica={codigo:null,professor:null};localStorage.setItem("orderData",JSON.stringify(Product.dataAll.orderData));var _window$storeHelpers$=window.storeHelpers.generic,clearCart=_window$storeHelpers$.clearCart,addUtms=_window$storeHelpers$.addUtms;clearCart().then(function(){addUtms().then(Product.addToCart)})})})},addToCart:function addToCart(){var item={id:Product.dataAll.dataProduct.items[0].itemId,quantity:1,seller:Product.dataAll.dataProduct.items[0].sellers[0].sellerId};vtexjs.checkout.addToCart([item],null,jssalesChannel).done(Product.changePrice)},changePrice:function changePrice(orderForm){$.ajax({url:"/api/checkout/pub/orderForm/"+orderForm.orderFormId+"/items/0/price",type:"PUT",headers:window.header,data:'{"price":'+Product.dataAll.selectedPaymentValue+"}",success:function success(data){},error:function error(data,statusText){console.warn("Erro na Mudança do Orderform")}}).done(function(data){Product.sendAttachment()});$(window).trigger("MZ.productAddedToCart",[])},sendAttachment:function sendAttachment(){var itemIndex=0;var attachment="Dados da compra";var attachmentContent={"Codigo da Afiliacao Cielo":Product.dataAll.dataAffiliationID,codigoMestreIndica:Product.dataAll.orderData.mestreIndica.codigo!==null?Product.dataAll.orderData.mestreIndica.codigo:"-",Consultor:Product.dataAll.dataConsultorID,"Endereço Unidade":Product.dataAll.dataUnitAddress,Ibge:"-","Id da Oferta":Product.dataAll.dataOfferID,"Id da OfertaPolo":Product.dataAll.dataOfferPlanPoloID.toString(),IsentaPrimeiroPagamento:false,Unidade:"Regiao: "+Product.dataAll.dataRegionID+" - Nome: "+Product.dataAll.dataAdress.name,"Id Unidade":Product.dataAll.dataUnitID,"Valor Inscrição":"ID: "+Product.dataAll.dataInstallmentID+" - "+Product.dataAll.dataSkuNameInst,Voucher:"-",idCurso:Product.dataAll.dataCourseID};$.removeCookie("Voucher");$.removeCookie("ValorVoucher");vtexjs.checkout.addItemAttachment(itemIndex,attachment,attachmentContent).then(function(){return vtexjs.checkout.sendAttachment("openTextField",{value:""})}).done(function(){window.location.href="/checkout/#/email"})},addEbookInCheckout:function addEbookInCheckout(){$("#mz-ebook-buybutton").one("click",function(){var orderData=_objectSpread(_objectSpread({},window.storeHelpers.generic.getResetedOrderData()),{},{isEbook:true,payment:{valorSku:Product.dataAll.dataEbook.items[0].sellers[0].commertialOffer.Price,valorTotal:Product.dataAll.dataEbook.items[0].sellers[0].commertialOffer.Price},courseName:Product.dataAll.dataEbook.productName,courseUrl:"/".concat(Product.dataAll.dataProduct.linkText,"/p"),ebookImg:Product.dataAll.dataEbook.items[0].images[0].imageUrl});localStorage.setItem("orderData",JSON.stringify(orderData));window.storeHelpers.generic.clearCart().then(function(){window.storeHelpers.generic.addUtms().then(Product.addEbookToCart())})})},addEbookToCart:function addEbookToCart(){var ebookSalesChannel=4;var item={id:Product.dataAll.dataEbook.items[0].itemId,quantity:1,seller:Product.dataAll.dataEbook.items[0].sellers[0].sellerId};vtexjs.checkout.getOrderForm().then(function(orderForm){vtexjs.checkout.addToCart([item],null,ebookSalesChannel).done(Product.addEbookUrl())})},addEbookUrl:function addEbookUrl(){var ebookUrl=Product.dataAll.dataEbook.ebookUrl[0];if(ebookUrl){vtexjs.checkout.getOrderForm().then(function(){return vtexjs.checkout.sendAttachment("openTextField",{value:ebookUrl})}).then(function(){window.location.href="/checkout/#/email"})}else{window.location.href="/checkout/#/email"}},regexList:function regexList(){var rl={dot:/\./g};return rl}};Product.init()}catch(e){console.log("Erro na instancia [Product]: ",e)}})();