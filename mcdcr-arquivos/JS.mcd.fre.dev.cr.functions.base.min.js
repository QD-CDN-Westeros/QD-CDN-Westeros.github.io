/* DESKTOP-TKPPA5A - 19/06/2020 08:12:10 GMT */
"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});"function"!=typeof String.prototype.capitalize&&(String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1).toLowerCase()});"function"!==typeof String.prototype.replaceSpecialChars&&(String.prototype.replaceSpecialChars=function(){var b={"ç":"c","æ":"ae","œ":"oe","á":"a","é":"e","í":"i","ó":"o","ú":"u","à":"a","è":"e","ì":"i","ò":"o","ù":"u","ä":"a","ë":"e","ï":"i","ö":"o","ü":"u","ÿ":"y","â":"a","ê":"e","î":"i","ô":"o","û":"u","å":"a","ã":"a","ø":"o","õ":"o",u:"u","Á":"A","É":"E","Í":"I","Ó":"O","Ú":"U","Ê":"E","Ô":"O","Ü":"U","Ã":"A","Õ":"O","À":"A","Ç":"C"};return this.replace(/[\u00e0-\u00fa]/gi,function(a){return"undefined"!=typeof b[a]?b[a]:a})});Array.prototype.indexOf||(Array.prototype.indexOf=function(d,e){var a;if(null==this)throw new TypeError('"this" is null or not defined');var c=Object(this),b=c.length>>>0;if(0===b)return-1;a=+e||0;Infinity===Math.abs(a)&&(a=0);if(a>=b)return-1;for(a=Math.max(0<=a?a:b-Math.abs(a),0);a<b;){if(a in c&&c[a]===d)return a;a++}return-1});try{var Common={run:function(){Common.setShelfQuantity();Common.updateShelfQuantity()},init:function(){Common.addClickEvent();Common.adjustComboOfTheDay();Common.vtexBindQuickViewDestroy();Common.applyAmazingMenuMobile();Common.smartCartGumball();Common.itemAddedModal();Common.searchModal();Common.smartAutoComplete();Common.fixPlaceholderSearch();Common.applyImageLoad();Common.applyCarouselShelf();Common.setBreadCrumb();Common.menuOverFooter();Common.forceAuthentication();Common.waitLoadingScripts();Common.waitVtexjs()},ready:function(){},ajaxStop:function(){Common.addClickEvent();Common.setShelfQuantity();Common.applyImageLoad()},windowOnload:function(){Common.addQtdProductCart()},vtexBindQuickViewDestroy:function(){window.bindQuickView=function(){}},smartCartGumball:function(){var wrapper=$(".MZsmartCart__m4");var scWrapper=wrapper.find(".qd-sc-content");$(".MZh__n-cart").click(function(e){Common.addQtdProductCart();e.preventDefault();$(document.body).addClass("sc-qd-cart-opened")});wrapper.click(function(e){if($(e.target).is(this)){$(document.body).removeClass("sc-qd-cart-opened qd-ddc-product-add-time-v2")}});var itemsQtt=scWrapper.find(".qd-sc-items-quantity");$(window).on("orderFormUpdated.vtex",function(){var items=vtexjs.checkout.orderForm.items;var qtt=0;for(var i=0;i<items.length;i++)qtt+=items[i].quantity;itemsQtt.html("<span>Artículos:"+qtt+"</span>")});var $total=$('<div class="sc-qd-totalizers"><div class="totalizers-list"></div><a href="/checkout">Cerrar Pedido</a><a href="/mcmenu">Eligir más articulos</a></div>').appendTo(scWrapper).find("div");$(window).on("orderFormUpdated.vtex",function(e,orderForm){var subtotal=0;var discount=0;var shipping=0;var total=orderForm.value||0;var totalizers=orderForm.totalizers;for(var i=0;i<totalizers.length;i++){if(totalizers[i].id=="Items"){subtotal=totalizers[i].value}if(totalizers[i].id=="Discounts"){discount=totalizers[i].value}if(totalizers[i].id=="Shipping"){shipping=totalizers[i].value}}$total.html("<ul><li>Sub total: <strong>$ "+qd_number_format(subtotal/100,2,",",".")+'</strong></li><li style="display:'+(discount<0?"block;":"none;")+'">Desconto: <strong>$ '+qd_number_format(discount/100,2,",",".")+'</strong></li><li style="display:'+(shipping!==0?"block;":"none;")+'">Taxa de entrega: <strong>$ '+qd_number_format(shipping/100,2,",",".")+"</strong></li><li>Total: <strong>$ "+qd_number_format(total/100,2,",",".")+"</strong></li></ul>")});$.QD_smartCart({selector:scWrapper,enableNotification:true,dropDown:{updateOnlyHover:false,callback:function(){wrapper.find(".qd_ddc_lightBoxClose").click(function(){$(document.body).removeClass("sc-qd-cart-opened qd-ddc-product-add-time-v2")});Common.addQtdProductCart()},callbackProductsList:function(){var i=0;scWrapper.find(".qd-ddc-prodRow").each(function(){var $t=$(this);$t.find(".qd-ddc-prodImg").wrap('<div class="col-xs-3"></div>');$t.find(".qd-ddc-prodName, .qd-ddc-prodPrice, .qd-ddc-prodQtt, .qd-ddc-prodRemove").wrapAll('<div class="col-xs-9"></div>');$t.find(".qd-ddc-prodQtt, .qd-ddc-prodRemove").wrapAll('<div class="pull-right"></div>');$t.find(".qd-ddc-prodPrice").wrapAll('<div class="pull-left"></div>');i++});setTimeout(function(){Common.addQtdProductCart()},550);$(".MZs__buyBtn .add a.loading").removeClass("loading")},texts:{emptyCart:"Su carrito aún no tiene ningún producto"}}})},addQtdProductCart:function(){if(!window.vtexjs.checkout)return;var wrapper=$(".MZsmartCart__m4");wrapper.find(".qd-ddc-prodWrapper2").find(".qd_ddc_prodRow").each(function(){var t=$(this);var itemSku=window.vtexjs.checkout.orderForm.items.find(function(e){return e.id===t.attr("data-sku")});if(t.find(".MZs__cartCount").length==0){t.find(".qd-ddc-prodImgWrapper").append('<div class="MZs__cartCount" data-qtt="'+itemSku.quantity+'"><span>Anãdido</span></div>')}else{t.find(".MZs__cartCount").attr("data-qtt",itemSku.quantity)}})},addClickEvent:function(){var buyBtn=$(".MZs__buyBtn a:not(.has-loading-ev)");buyBtn.addClass("has-loading-ev");buyBtn.on("click",function(){$(this).addClass("loading")})},itemAddedModal:function(){$(window).on("QuatroDigital.qd_bb_prod_add",function(e,a,sku){var modal=$(".MZitemAddedModal");var item=$("#idprod"+sku).closest(".MZshelf");if(!item.length||!modal.length)return;var img=item.find(".MZs__i--img").clone();var name=item.find(".MZs__name a").text();var price=item.find(".MZs__p--price").text().trim();modal.find(".MZi__item--img").html(img);modal.find(".MZi__item--details h3").text(name);modal.find(".MZi__item--details span").text("Precio "+price);function closeModal(e){if(e&&typeof e!==undefined){e.preventDefault()}$(document.body).removeClass("qd-ddc-product-add-time-v2")}modal.on("click",function(e){if($(e.target).is(this)){closeModal()}}).find('.MZi__close, a[href="#"]').on("click",closeModal)})},searchModal:function(){$(".MZfb__search").click(function(){$(".modal-qd-v1-search").modal().addClass("in");$(".modal-backdrop").addClass("in");return false});$(".modal-qd-v1-search").on("click",function(){$(this).modal("hide");$(".modal-backdrop").remove()});$(".modal-qd-v1-search").on("show.bs.modal",function(){setTimeout(function(){$(".fulltext-search-box").focus()},170)});$(".modal-qd-v1-search-wrap").on("click",function(e){e.stopPropagation()})},applyAmazingMenuMobile:function(){var wrapper=$(".MZamazingMenuMob");$(".MZfb__menu").click(function(e){e.preventDefault();$(document.body).toggleClass("am-qd-menu-opened");$(document.body).removeClass("am-qd-acm-opened sc-qd-cart-opened mz-wn-on")});wrapper.click(function(e){if($(e.target).is(this)){$(document.body).removeClass("am-qd-menu-opened")}});wrapper.QD_amazingMenu({callback:function(){wrapper.find(".header-qd-v1-user-message").on("click","#login",function(){$(document.body).removeClass("am-qd-menu-opened")});wrapper.find(".MZamm__close").click(function(){$(document.body).removeClass("am-qd-menu-opened")});var openM=$('<span class="qd-am-dropdown-trigger"><i class="fa fa-plus"></i></span>');openM.appendTo(".MZamazingMenuMob .qd-am-has-ul");$(".qd-am-dropdown-trigger").click(function(){var $t=$(this);$t.toggleClass("qd-am-active");$t.prev(".qd-am-dropdown, ul.qd-am-level-2").slideToggle();$(document.body).toggleClass("am-qd-dropdown-opened")})}})},smartAutoComplete:function(){var input=$(".fulltext-search-box");var btn=$('<button disabled><i class="fas fa-times-circle"></i></button>');function disableBtn(){btn.attr("disabled","disabled")}function activeBtn(){btn.removeAttr("disabled")}function clearInput(){input.val("").focus();disableBtn()}input.on("keyup",function(){if($(this).val().length>0){activeBtn()}else{disableBtn()}});btn.on("click",function(){clearInput()});input.parent().append(btn);input.QD_smartAutoComplete({jqueryUI:{appendTo:".modal-qd-v1-search-wrap",maxRows:6}})},fixPlaceholderSearch:function(){if(typeof enableFullTextSearchBox=="undefined")return;var idSearchFilterP=$('.modal-qd-v1-search input[type="text"].fulltext-search-box');if(!idSearchFilterP.length)return;var idSearchFilter=idSearchFilterP.attr("id").replace("ftBox","");enableFullTextSearchBox("ftBox"+idSearchFilter,"ftDept"+idSearchFilter,"ftIdx"+idSearchFilter,"ftBtn"+idSearchFilter,"/SEARCHTERM?&utmi_p=_&utmi_pc=BuscaFullText&utmi_cp=SEARCHTERM","Escriba acá")},applyImageLoad:function(){$(".MZshelf").QD_smartImageLoad({sizes:{width:"124",height:"124"}})},applyCarouselShelf:function(){var wrapper=$(".MZbox .prateleira").not(".slick-initialized");if(!wrapper.length)return false;wrapper.has("h2").each(function(){var $t=$(this);$t.find("h2").insertBefore($t)});wrapper.each(function(){var $t=$(this);$t.slick({slidesToShow:2,slidesToScroll:2,infinite:true,draggable:false,speed:700})})},setShelfQuantity:function(){var shelf=$(".QD.prateleira.row").not(".ready").not("[id*=ResultItems_]");if(!window.vtexjs.checkout||!window.vtexjs.checkout.orderForm||!shelf.length){return}for(var j=0;j<shelf.length;j++){var itemsArr=[];if(window.vtexjs.checkout.orderForm.items.length){var items=window.vtexjs.checkout.orderForm.items;var itemsQuantity={};for(var k=0;k<items.length;k++){if(!itemsQuantity[items[k].productId]){itemsQuantity[items[k].productId]=items[k].quantity}else{itemsQuantity[items[k].productId]+=items[k].quantity}}Object.keys(itemsQuantity).forEach(function(key){itemsArr.push([key,itemsQuantity[key]])})}}if(itemsArr.length){for(var n=0;n<itemsArr.length;n++){var li=shelf.find(".qd_productId[value="+itemsArr[n][0]+"]");var count=li.parent().find(".MZs__cartCount");if(count.length){var qtt=itemsArr[n][1];count.attr("data-qtt",qtt);if(li.find(".yes").length){var a=li.find("span.add > a");var href=a.attr("href");a.attr("href",href.replace(/qty=\d+/,"qty="+(parseInt(qtt)+1)))}}}}shelf.addClass("ready")},updateShelfQuantity:function(){$(window).on("orderFormUpdated.vtex",function(e,orderForm){var allLi=$("li[layout] .yes").closest("li[layout]");allLi.each(function(){var a=$(this).find("span.add > a");var href=a.attr("href");a.attr("href",href.replace(/qty=\d+/,"qty=1"))});$(".MZs__cartCount").attr("data-qtt",0);var items=orderForm.items;for(var i=0;i<items.length;i++){var li=$(".qd_productId[value="+items[i].productId+"]").closest("li[layout]");if(!li.length){continue}li.find(".MZs__cartCount").attr("data-qtt",items[i].quantity);if(li.find(".yes").length){var href=li.find("span.add > a").attr("href");li.find("span.add > a").attr("href",href.replace(/qty=\d+/,"qty="+(parseInt(items[i].quantity)+1)))}}})},adjustComboOfTheDay:function(){if(!window.location.href.includes("mascombos-del-dia")){return}var day=new Date;day=day.getDay();var days=["domingo","Lunes","Martes","Miercoles","Jueves","Viernes","sabado"];var productId=$(".qd_productId");var productOfTheDayId;var url="/api/catalog_system/pub/products/search/mascombos-del-dia/"+days[day]+"?map=c,specificationFilter_20";$.ajax({url:url,method:"get"}).done(function(result){if(result&&result[0]&&result[0].productId){productOfTheDayId=result[0].productId;productId.each(function(el){var $t=$(this);var id=$(this).attr("value");if(id==productOfTheDayId){$t.parent().addClass("is-combo-of-the-day");$(document).trigger("scroll")}})}})},setBreadCrumb:function(){var breadCrumb=$(".bread-crumb");breadCrumb.find("li:first").append("<a href='/mcmenu'>McDonald's</a>");breadCrumb.show()},menuOverFooter:function(){if($("body").is(".product")||$("body").is(".pre-home")){return}var scrolling;var menuBtn=57+16;var offset=$(".footer-qd-v1").offset().top;$(document).on("scroll",function(){scrolling=true});setInterval(function(){if(scrolling){scrolling=false;if(offset!=$(".footer-qd-v1").offset().top){offset=$(".footer-qd-v1").offset().top}if($(".footer-qd-v1").offset().top<=$(window).scrollTop()+$(window).height()){$(".MZfixedBar").css({top:offset-menuBtn}).addClass("stop-menu")}else{$(".MZfixedBar").css({top:"auto"}).removeClass("stop-menu")}}},100);$(document).trigger("scroll");var aux=0;var positionFix=setInterval(function(){if(aux<6){aux++;$(document).trigger("scroll")}else{clearInterval(positionFix)}},250)},forceAuthentication:function(){if(window.vtexJsReady){authAndAddress()}$(window).on("mzVtexjsReady",function(){authAndAddress()});function authAndAddress(){if(!vtexjs.checkout.orderForm.loggedIn){vtexid.start({locale:"pt-BR",forceReload:false})}else{console.log("ae");if(!$("body").is(".pre-home")){if($("body").is(".account,.orders")){Common.adjustOrdersLink();return}if(!$.cookie("MZDeliveryType")){window.location.href="/";return}var deliveryType=$.cookie("MZDeliveryType");if(deliveryType=="pickup"){if($.cookie("VTEXSC")!="sc=1"&&location.search.indexOf("sc=1")<=-1){Common.setSalesChannel(1)}if(!$.cookie("MZSelectedSla")||!$.cookie("MZSelectedAddress")){$("body").addClass("modal-map-active")}else{}}else if(deliveryType=="delivery"){if($.cookie("VTEXSC")!="sc=2"&&location.search.indexOf("sc=2")<=-1){Common.setSalesChannel(2)}if(!$.cookie("mzAddress")){$(".MZAddressChange").modal().addClass("show-modal-container");$("body").addClass("mz-modal-on");$(".modal-container").addClass("show-inline-block");Utils.animationFunc(".address-change-div-container","slide-in-bottom")}}if($.cookie("MZStoreOperationHours")){var day=new Date;day=day.getDay();var businessHours=JSON.parse($.cookie("MZStoreOperationHours"));var todayHours;if(businessHours.length==1&&deliveryType=="delivery"){todayHours=businessHours[0]}else{todayHours=businessHours[day]}var aux=Common.getStoreOperation(todayHours);var isClosed=aux[1];if(isClosed){var mza=$(".MZa__closed");mza.find(".opHours").text(todayHours.OpeningTime.slice(0,-3)+"h");mza.find(".clHours").text(todayHours.ClosingTime.slice(0,-3)+"h");mza.show();$(document).trigger("scroll")}if($("body").is(".pre-home")){Address.closedStoreModal(todayHours)}}}}}},getItemsHtml:function(items){var html="";for(var i=0;i<items.length;i++){var item=items[i];var price=items[i].sellingPrice*items[i].quantity;price=(price/100).toFixed(2).replace(".",",");html+='<li class="mz-orders__item">                    <ul>                        <li class="mz-orders__img">                            <img src="'+item.imageUrl+'" alt="'+item.name+'">                        </li>                        <li class="mz-orders__name">                            <p>'+item.name+'</p>                        </li>                        <li class="mz-orders__price">                        <p>$ '+price+"</p>                        </li>                    </ul>                </li>"}return html},getDualPoint:function(bringgId,orderId,account){var request={url:"https://midmc.maeztra.com/bringg/order/prep",type:"POST",timeout:0,headers:{"Content-Type":"application/json"},data:JSON.stringify({id:orderId,bringg:bringgId,account:account})};return $.ajax(request)},waitLoadingScripts:function(){$(window).on("mzVtexjsReady",function(){Common.getOrders2()})},getOrders2:function(){var profileId=vtexjs.checkout.orderForm.userProfileId;if(!profileId){return}window.allowedDistance=250;$("body").addClass("suppress-loading");Common.getOrdersRequest(profileId).done(function(response){if(!response||!response.length){return}$(".MZfixedBar > button").on("click",function(){$("body").addClass("modal-orders-active")}).show();$(".mz-modal--orders .mz-modal__header").on("click",function(){$("body").removeClass("modal-orders-active")});$(".mz-modal--orders .mz-modal__body").html("");for(var i=0;i<response.length;i++){var order=response[i];if(!window.orderStatuses){window.orderStatuses=[]}window.orderStatuses[i]=Common.getOrderStatus(order);var html=Common.getOrderHtml(order);$(".mz-modal--orders .mz-modal__body").append(html);Common.updateOrderState(order)}setTimeout(function(){Common.watchPosition()},120);setInterval(function(){if(window.waitingBringg){window.waitingBringg=false}else{if($("body").is(".modal-orders-active")){Common.updateOrders(profileId)}}},15e3)}).fail(function(){Common.getOrders2()}).always(function(){$("body").removeClass("suppress-loading")})},getOrdersRequest:function(profileId){var settings={url:"https://midmc.maeztra.com/vtex/orders",type:"POST",timeout:0,headers:{"Content-Type":"application/json"},data:JSON.stringify({param:"userProfileId",value:profileId})};return $.ajax(settings)},mcMenuLoading:function(){$(".mz-skeleton").parent().remove();$(".MZmenuHome > ul").show();$(".MZsearch").show()},getOrderStatus:function(order){var id=order.id;if(order&&order.dualPoint){return{id:id,status:"ReceivedDualPoint"}}else if(order.status=="waiting"){return{id:id,status:"waitingDualPoint"}}else if(order.bringg){return{id:id,status:"isReadyToSend"}}else{return{id:id,status:"waitingBringg"}}},updateOrders:function(profileId){$("body").addClass("suppress-loading");Common.getOrdersRequest(profileId).done(function(response){$("body").removeClass("suppress-loading");if(!response||!response.length||!window.orderStatuses){return}var checkIFExists=[];for(var i=0;i<response.length;i++){checkIFExists.push(response[i].id)}$("[data-orderId]").each(function(item,index){var orderId=$(this).attr("data-orderId");if(checkIFExists.indexOf(orderId)<0){$(this).remove();for(var i=0;i<window.orderStatuses.length;i++){if(window.orderStatuses[i].id==orderId){window.orderStatuses.splice(i,1)}}}});for(var j=0;j<window.orderStatuses.length;j++){for(var k=0;k<response.length;k++){if(window.orderStatuses[j].id==response[k].id){var orderStatus=Common.getOrderStatus(response[k]);if(orderStatus.status!=window.orderStatuses[j].status){window.orderStatuses[j].status=orderStatus.status;Common.updateOrderState(response[k])}else{Common.updateOrderState(response[k])}}}}})},getOrderHtml:function(order){var items=JSON.parse(order.itens);var itemsHtml=Common.getItemsHtml(items);var footerHtml=Common.getOrdersFooterHtml(order);var itemHtml='<div class="mz-orders" data-orderId="'+order.id+'">                <div class="mz-orders__header">                    <h4>Pedidos</h4>                    <p class="mz-orders__id">'+order.id+'</p>                </div>                <ul class="mz-orders__list">'+itemsHtml+'</ul>                <div class="mz-orders__footer">'+footerHtml+"</div>            </div>";return itemHtml},getOrdersFooterHtml:function(order){var thisStat=Common.getOrderStatus(order).status;var bringgId=order.bringg;var dualPoint=order.dualPoint;var lastDistance=$.cookie("mzLastDistance")?$.cookie("mzLastDistance"):9999;var footerHtml='<div class="mz-prepare mz-prepare__initial" '+(thisStat=="waitingBringg"||thisStat=="isReadyToSend"?'style="display:block"':'style="display:none"')+'>                            <h5 class="mz-prepare__title">No olvides hacer click en el botón de abajo, que se activa cuando estás a 200 metros del local.</h5>                            <button '+(bringgId?'data-bringg="'+bringgId+'"':"")+'class="mz-prepare__button" type="button" '+(thisStat=="isReadyToSend"&&lastDistance<=window.allowedDistance?"false":'disabled="disabled"')+'">Empezar a prepararse</button>                        </div>                        <div class="mz-prepare mz-prepare--preparing" '+(thisStat=="ReceivedDualPoint"?'style="display:block"':'style="display:none"')+'>                            <h5 class="mz-prepare__title">                                <img src="/arquivos/icon-prepare.png" alt="Su pedido está siendo preparado">                                Su pedido está siendo preparado.                            </h5>                            <p class="mz-prepare__description">Contraseña de retirada de pedido</p>                            <div class="mz-prepare__dual-point">'+(dualPoint?dualPoint:"")+'</div>                        </div>                        <div class="mz-prepare mz-prepare--pending" '+(thisStat=="waitingDualPoint"?'style="display:block"':'style="display:none"')+'>                            <h5 class="mz-prepare__title">                                Esperando el restaurante<br> confirma tu pedido.                            </h5>                            <div class="mz-spinner">                                <div class="spinner">                                    <div></div>                                </div>                            </div>                        </div>';return footerHtml},updateOrderState:function(order){var orderElement=$("[data-orderId="+order.id+"]");orderElement.find(".mz-prepare").hide();var coords=JSON.parse(order.geoCoordinates);var distance=0;if(window.userCoords){var lat1=coords[1];var lat2=window.userCoords.latitude;var lng1=coords[0];var lng2=window.userCoords.longitude;var d=Common.getDistance([lat2,lng2],[lat1,lng1]);distance=Math.round(d/100)*100}else if($.cookie("mzLastDistance")){distance=$.cookie("mzLastDistance")}$.cookie("mzLastDistance",distance,{path:"/",expires:1/1440});if(order&&order.dualPoint){orderElement.find(".mz-prepare--preparing").show();orderElement.find(".mz-prepare--preparing").find(".mz-prepare__dual-point").text(order.dualPoint)}else if(order.status=="waiting"){orderElement.find(".mz-prepare--pending").show()}else if(order.bringg&&distance<=window.allowedDistance){orderElement.find(".mz-prepare__initial").show();orderElement.find(".mz-prepare__button").attr("disabled",false);orderElement.find(".mz-prepare__button").attr("data-bringg",order.bringg);orderElement.find(".mz-prepare__button").off("click").on("click",function(){$("body").addClass("modal-prepare-confirmation");$(".mz-prepare__button-confirmation").off("click").on("click",function(){$("body").removeClass("modal-prepare-confirmation");window.waitingBringg=true;orderElement.find(".mz-prepare").hide();orderElement.find(".mz-prepare--pending").show();Common.getDualPoint(order.bringg,order.id,order.account,order.hostname).done(function(){})})})}else{orderElement.find(".mz-prepare__initial").show();orderElement.find(".mz-prepare__button").attr("disabled","disabled")}},modalOverlayClick:function(){$(".mz-overlay").click(function(){$("body").removeClass("modal-orders-active");$("body").removeClass("modal-map-active")});$(".mz-overlay-confirmation,.mz-prepare__button-cancel,.mz-modal--confirmation .fa-times").click(function(){$("body").removeClass("modal-prepare-confirmation")})},watchPosition:function(){if(navigator.geolocation){navigator.geolocation.watchPosition(function(pos){console.log("pos watched");window.userCoords=pos.coords},function(){console.log("não foi possível recuperar as coordenadas do usuário");$.cookie("mzLastDistance",1,{path:"/",expires:1/1440});window.userCoords=""},{enableHighAccuracy:true,maximumAge:15e3})}else{console.log("geocoordenadas não habilitadas");$.cookie("mzLastDistance",1,{path:"/",expires:1/1440})}},getDistance:function(pos2,pos1){console.log(pos2,pos1);var lat1=pos2[0];var lat2=pos1[0];var lng1=pos2[1];var lng2=pos1[1];var phi1=lat1*Math.PI/180;var phi2=lat2*Math.PI/180;var dlambda=(lng2-lng1)*Math.PI/180;var R=6371e3;var d=Math.acos(Math.sin(phi1)*Math.sin(phi2)+Math.cos(phi1)*Math.cos(phi2)*Math.cos(dlambda))*R;return d},getDualPoint:function(bringgId,orderId,account,hostname){var request={url:"https://midmc.maeztra.com/bringg/order/prep",type:"POST",timeout:0,headers:{"Content-Type":"application/json"},data:JSON.stringify({id:orderId,bringg:bringgId,account:account,hostname:hostname?hostname:""})};return $.ajax(request)},deliveryType:function(){if($("body").is(".pre-home")){$(".selectDelivery").on("click",function(){Address.init();$(".MZph__bc--wrapper-delivery").fadeIn();$(".MZSelectDeliveryType").hide();localStorage.setItem("activeDeliveryChannel","delivery");localStorage.setItem("aditionalShippingData",'{"activeTab":"delivery","selectedLeanShippingOption":"CLOSEST","isScheduledDeliveryActive":false,"originComponent":"omnishipping"}');if($.cookie("MZDeliveryType")&&$.cookie("MZDeliveryType")=="pickup"){vtexjs.checkout.removeAllItems()}$.cookie("MZDeliveryType","delivery",{path:"/",expires:1})});$(".selectPickup").on("click",function(){Pickup.init();$(".MZph__bc--wrapper-pickup").fadeIn();$(".MZSelectDeliveryType").hide();localStorage.setItem("activeDeliveryChannel","pickup-in-point");localStorage.setItem("aditionalShippingData",'{"activeTab":"pickup-in-point","selectedLeanShippingOption":"CLOSEST","isScheduledDeliveryActive":false,"originComponent":"omnishipping"}');if($.cookie("MZDeliveryType")&&$.cookie("MZDeliveryType")=="delivery"){vtexjs.checkout.removeAllItems()}$.cookie("MZDeliveryType","pickup",{path:"/",expires:1})});$(".mz-gmap-go-back button, .mz-form-go-back button").on("click",function(){$(".MZph