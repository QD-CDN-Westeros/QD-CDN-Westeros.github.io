/* LAPTOP-T0P1H0OI - 21/05/2021 11:17:38 GMT */
$(function(){mostraLoader(".passo-um");loadFormularioLogin()});function loadFormularioLogin(){var form_login='<form action="javascript:enviaLogin();" method="post" class="form-login-lojista">'+'\t<div class="col-xs-12 text-center titulo-cadastro">FaÃ§a seu login</div>'+'\t<input type="text" id="email-lojista" placeholder="E-mail">'+'\t<input class="btn-entra-login-lojista" value="Entrar" type="submit" />'+'\t<div class="nao-sou-cadastrado">'+'\t\t<a class="load-formulario-cadastro" href="/cadastro-lojista">NÃ£o sou cadastrado</a>'+"\t</div>"+"</form>";$(".form-cadastro-lojista").html(form_login);$("a.load-formulario-cadastro").click(function(){loadFormulario();return false})}function loadFormulario(){var formulario='<div class="passo-um">'+'\t<input type="hidden" id="setor-selecionado" />'+'\t<input type="hidden" id="id_dc-selecionado" />'+'\t<div class="col-xs-12 text-center titulo-cadastro">Perfil do Cliente</div>'+'\t<div class="col-xs-12 text-center texto-cadastro">Por favor, informe qual seu <b>setor/segmento</b> de atuaÃ§Ã£o:</div>'+'\t<div class="col-xs-12 text-left radio-select">'+'\t\t<input type="radio" id="client-natural" name="setor" value="natural" />'+'\t\t<label for="client-natural">Loja de produtos naturais e/ou suplementos</label>'+"\t</div>"+'\t<div class="col-xs-12 text-left radio-select">'+'\t\t<input type="radio" id="client-farmacia" name="setor" value="farmacia" />'+'\t\t<label for="client-farmacia">FarmÃ¡cia</label>'+"\t</div>"+'\t<div class="col-xs-12"><div id="btn-setor" class="btn-salvar-lojista">AvanÃ§ar</div></div>'+"</div>"+'<div class="passo-dois">'+'\t<div class="dados-um">'+'\t\t<div class="col-xs-12 text-center titulo-cadastro">Dados cadastrais do cliente</div>'+'\t\t<div class="col-xs-12 text-right">*Campos obrigatÃ³rios</div>'+'\t\t<div class="col-xs-12"><input type="text" id="client-razao-social" placeholder="*RazÃ£o Social" /></div>'+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-cep" placeholder="*CEP" maxlength="9" />'+'\t\t\t<input type="text" id="client-endereco" placeholder="*EndereÃ§o" />'+'\t\t\t<input type="text" id="client-endereco-numero" placeholder="*NÃºmero">'+'\t\t\t<input type="text" id="client-endereco-complemento" placeholder="Complemento">'+"\t\t</div>"+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-bairro" placeholder="*Bairro" />'+'\t\t\t<input type="text" id="client-uf" placeholder="*UF" />'+"\t\t</div>"+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-cidade" placeholder="*Cidade" />'+'\t\t\t<input type="text" id="client-contato" placeholder="*Nome do responsÃ¡vel" />'+"\t\t</div>"+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-tel-1" placeholder="*DDD/Telefone 1" maxlength="15" />'+'\t\t\t<input type="text" id="client-tel-2" placeholder="*DDD/Telefone 2" maxlength="15" />'+"\t\t</div>"+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-cnpj" placeholder="*CNPJ (MF)" maxlength="18" />'+'\t\t\t<input type="text" id="client-email" placeholder="*E-mail para envio de XML" />'+"\t\t</div>"+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-insc-estadual" placeholder="*Insc. Estadual" />'+'\t\t\t<input type="text" id="client-insc-municipal" placeholder="Insc. Municipal" />'+"\t\t</div>"+'\t\t<div class="col-xs-12"><div class="passo-dados"><img src="/arquivos/passo-dados-um.png" /></div></div>'+'\t\t<div class="col-xs-12"><div id="btn-dados-um" class="btn-salvar-lojista">Salvar e continuar</div></div>'+"\t</div>"+'\t<div class="dados-dois">'+'\t\t<div class="col-xs-12 text-center titulo-cadastro">Dados de cobranÃ§a</div>'+'\t\t<div class="col-xs-12 text-left">'+'\t\t\t<input type="checkbox" id="btn-utilizar-endereco" />'+'\t\t\t<label for="btn-utilizar-endereco">Utilizar o mesmo endereÃ§o cadastrado no passo anterior</label>'+"\t\t</div>"+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-cep-cobranca" placeholder="CEP" maxlength="9" />'+'\t\t\t<input type="text" id="client-endereco-cobranca" placeholder="EndereÃ§o" />'+'\t\t\t<input type="text" id="client-endereco-numero-cobranca" placeholder="NÃºmero">'+'\t\t\t<input type="text" id="client-endereco-complemento-cobranca" placeholder="Complemento">'+"\t\t</div>"+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-bairro-cobranca" placeholder="Bairro" />'+'\t\t\t<input type="text" id="client-uf-cobranca" placeholder="UF" />'+"\t\t</div>"+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-cidade-cobranca" placeholder="Cidade" />'+'\t\t\t<input type="text" id="client-contato-cobranca" placeholder="Nome do responsÃ¡vel" />'+"\t\t</div>"+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-tel-cobranca" placeholder="DDD/Telefone" maxlength="15" />'+'\t\t\t<input type="text" id="client-cnpj-cobranca" placeholder="CNPJ (MF)" maxlength="18" />'+"\t\t</div>"+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-insc-estadual-cobranca" placeholder="Insc. Estadual" />'+'\t\t\t<input type="text" id="client-insc-municipal-cobranca" placeholder="Insc. Municipal" />'+"\t\t</div>"+'\t\t<div class="col-xs-12"><div class="passo-dados"><img src="/arquivos/passo-dados-dois.png" /></div></div>'+'\t\t<div class="col-xs-12"><div id="btn-dados-dois" class="btn-salvar-lojista">Salvar e continuar</div></div>'+"\t</div>"+'\t<div class="dados-tres">'+'\t\t<div class="col-xs-12 text-center titulo-cadastro">E-mails de contato</div>'+'\t\t<div class="col-xs-12 text-center titulo-contato">*InformaÃ§Ãµes obrigatÃ³rias</div>'+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-titulo-financeiro" placeholder="*E-mail Financeiro" />'+'\t\t\t<input type="text" id="client-tel-financeiro" placeholder="*DDD/Telefone" maxlength="15" />'+'\t\t\t<input type="text" id="client-contato-financeiro" placeholder="*Nome do responsÃ¡vel" />'+"\t\t</div>"+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-titulo-compras" placeholder="E-mail Compras" />'+'\t\t\t<input type="text" id="client-tel-compras" placeholder="DDD/Telefone" maxlength="15" />'+'\t\t\t<input type="text" id="client-contato-compras" placeholder="Nome do responsÃ¡vel" />'+"\t\t</div>"+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-titulo-pedidos" placeholder="E-mail EDI (Pedidos)" />'+'\t\t\t<input type="text" id="client-tel-pedidos" placeholder="DDD/Telefone" maxlength="15" />'+'\t\t\t<input type="text" id="client-contato-pedidos" placeholder="Nome do responsÃ¡vel" />'+"\t\t</div>"+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-titulo-agendamento" placeholder="E-mail Agendamento" />'+'\t\t\t<input type="text" id="client-tel-agendamento" placeholder="DDD/Telefone" maxlength="15" />'+'\t\t\t<input type="text" id="client-contato-agendamento" placeholder="Nome do responsÃ¡vel" />'+"\t\t</div>"+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-titulo-recebimento" placeholder="E-mail Recebimento" />'+'\t\t\t<input type="text" id="client-tel-recebimento" placeholder="DDD/Telefone" maxlength="15" />'+'\t\t\t<input type="text" id="client-contato-recebimento" placeholder="Nome do responsÃ¡vel" />'+"\t\t</div>"+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-titulo-fiscal" placeholder="E-mail Fiscal" />'+'\t\t\t<input type="text" id="client-tel-fiscal" placeholder="DDD/Telefone" maxlength="15" />'+'\t\t\t<input type="text" id="client-contato-fiscal" placeholder="Nome do responsÃ¡vel" />'+"\t\t</div>"+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-titulo-devolucao" placeholder="E-mail DevoluÃ§Ã£o" />'+'\t\t\t<input type="text" id="client-tel-devolucao" placeholder="DDD/Telefone" maxlength="15" />'+'\t\t\t<input type="text" id="client-contato-devolucao" placeholder="Nome do responsÃ¡vel" />'+"\t\t</div>"+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-titulo-farmaceutico" placeholder="E-mail FarmacÃªutico" />'+'\t\t\t<input type="text" id="client-tel-farmaceutico" placeholder="DDD/Telefone" maxlength="15" />'+'\t\t\t<input type="text" id="client-contato-farmaceutico" placeholder="Nome do responsÃ¡vel" />'+"\t\t</div>"+'\t\t<div class="col-xs-12"><div class="passo-dados"><img src="/arquivos/passo-dados-tres.png" /></div></div>'+'\t\t<div class="col-xs-12"><div id="btn-dados-tres" class="btn-salvar-lojista">Salvar e continuar</div></div>'+"\t</div>"+'\t<div class="dados-quatro">'+'\t\t<div class="col-xs-12 text-center titulo-cadastro">InformaÃ§Ãµes complementares</div>'+'\t\t<div class="col-xs-12 text-left titulo-informacoes">ReferÃªncia comercial (principais fornecedores)</div>'+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-ref-1" placeholder="1)" />'+'\t\t\t<input type="text" id="client-ref-1-tel" placeholder="DDD/Telefone" maxlength="15" />'+"\t\t</div>"+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-ref-2" placeholder="2)" />'+'\t\t\t<input type="text" id="client-ref-2-tel" placeholder="DDD/Telefone" maxlength="15" />'+"\t\t</div>"+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-ref-3" placeholder="3)" />'+'\t\t\t<input type="text" id="client-ref-3-tel" placeholder="DDD/Telefone" maxlength="15" />'+"\t\t</div>"+'\t\t<div class="col-xs-12 text-left titulo-informacoes">ReferÃªncia bancÃ¡ria</div>'+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-ref-banco-1" placeholder="Banco" />'+'\t\t\t<input type="text" id="client-ref-agencia-1" placeholder="AgÃªncia" />'+'\t\t\t<input type="text" id="client-ref-conta-1" placeholder="Conta Corrente" />'+"\t\t</div>"+'\t\t<div class="col-xs-12">'+'\t\t\t<input type="text" id="client-ref-banco-2" placeholder="Banco" />'+'\t\t\t<input type="text" id="client-ref-agencia-2" placeholder="AgÃªncia" />'+'\t\t\t<input type="text" id="client-ref-conta-2" placeholder="Conta Corrente" />'+"\t\t</div>"+'\t\t<div class="col-xs-12"><div class="passo-dados"><img src="/arquivos/passo-dados-quatro.png" /></div></div>'+'\t\t<div class="col-xs-12"><div id="btn-dados-quatro" class="btn-salvar-lojista">Salvar e continuar</div></div>'+"\t</div>"+'\t<div class="dados-cinco">'+'\t\t<div class="col-xs-12 text-center titulo-cadastro">InformaÃ§Ãµes complementares</div>'+'\t\t<div class="col-xs-12">'+'\t\t\t<textarea id="client-info" maxlength="500" placeholder="Escreva aqui outras informaÃ§Ãµes complementares para o seu cadastro..." rows="10"></textarea>'+"\t\t</div>"+'\t\t<div class="col-xs-12 text-center titulo-contato">*MÃ¡ximo de 500 caracteres</div>'+'\t\t<div class="col-xs-12"><div class="passo-dados"><img src="/arquivos/passo-dados-cinco.png" /></div></div>'+'\t\t<div class="col-xs-12"><div id="btn-dados-cinco" class="btn-salvar-lojista">Salvar e finalizar</div></div>'+"\t</div>"+"</div>"+'<div class="passo-tres">'+'\t<div class="col-xs-12 text-center titulo-cadastro">DocumentaÃ§Ã£o para cadastro</div>'+'\t<div class="col-xs-12">'+'\t\t<div class="div-numero">01</div>'+'\t\t<div class="div-texto">'+"\t\t\tAutorizaÃ§Ã£o de Funcionamento de Empresa (ANVISA)"+"\t\t\tde medicamentos e cosmÃ©ticos.<br />"+"\t\t\tFarmÃ¡cias: todos os CNPJs (nÃ£o se aplica Ã  loja de produtos naturais)."+"\t\t</div>"+"\t</div>"+'\t<div class="col-xs-12">'+'\t\t<input type="file" id="client-anvisa-file" />'+"\t</div>"+'\t<div class="col-xs-12">'+'\t\t<div class="div-numero">02</div>'+'\t\t<div class="div-texto">'+"\t\t\tLicenÃ§a de Funcionamento Estadual/Municipal ou protocolo de renovaÃ§Ã£o<br />"+"\t\t\t(Secretaria Estadual do local onde estÃ¡ sediado o cliente - VISA)"+"\t\t</div>"+"\t</div>"+'\t<div class="col-xs-12">'+'\t\t<input type="file" id="client-visa-file" />'+"\t</div>"+'\t<div class="col-xs-12">'+'\t\t<div class="div-numero">03</div>'+'\t\t<div class="div-texto">'+"\t\t\tCertificado de Regularidade da Empresa - expedido pelo ConselhoRegional de FarmÃ¡cia<br />"+"\t\t\tdo Estado, para o ano em curso, ou protocolo de renovaÃ§Ã£o."+"\t\t</div>"+"\t</div>"+'\t<div class="col-xs-12">'+'\t\t<input type="file" id="client-certificado-file" />'+"\t</div>"+'\t<div class="col-xs-12">'+'\t\t<div class="div-numero">04</div>'+'\t\t<div class="div-texto">'+"\t\t\tInscriÃ§Ã£o Estadual ou, se for isento, declaraÃ§Ã£o de isenÃ§Ã£o."+"\t\t</div>"+"\t</div>"+'\t<div class="col-xs-12">'+'\t\t<input type="file" id="client-insc-estadual-file" />'+"\t</div>"+'\t<div class="col-xs-12">'+'\t\t<div class="div-numero">05</div>'+'\t\t<div class="div-texto">'+"\t\t\tCartÃ£o do CNPJ."+"\t\t</div>"+"\t</div>"+'\t<div class="col-xs-12">'+'\t\t<input type="file" id="client-cnpj-file" />'+"\t</div>"+'\t<div class="col-xs-12">'+'\t\t<div class="div-numero">06</div>'+'\t\t<div class="div-texto">'+"\t\t\tCÃ³pia do Contrato Social e Ãºltima AlteraÃ§Ã£o Contratual."+"\t\t</div>"+"\t</div>"+'\t<div class="col-xs-12">'+'\t\t<input type="file" id="client-contrato-social-file" />'+"\t</div>"+'\t<div class="col-xs-12">'+'\t\t<div class="div-numero">07</div>'+'\t\t<div class="div-texto">'+"\t\t\tBalanÃ§o Patrimonial/DRE"+"\t\t</div>"+"\t</div>"+'\t<div class="col-xs-12">'+'\t\t<input type="file" id="client-patrimonial-file" />'+"\t</div>"+'\t<div class="col-xs-12">'+'\t\t<div class="div-numero">08</div>'+'\t\t<div class="div-texto">'+"\t\t\tRelaÃ§Ã£o de faturamento dos Ãºltimos 12 meses."+"\t\t</div>"+"\t</div>"+'\t<div class="col-xs-12">'+'\t\t<input type="file" id="client-faturamento-file" />'+"\t</div>"+'\t<div class="col-xs-12">'+'\t\t<div class="div-numero">09</div>'+'\t\t<div class="div-texto">'+"\t\t\tLiminar ou Regime Especial de PossÃ­veis ConvÃªnios do ICMS."+"\t\t</div>"+"\t</div>"+'\t<div class="col-xs-12">'+'\t\t<input type="file" id="client-icms-file" />'+"\t</div>"+'\t<div class="col-xs-12">'+'\t\t<div class="div-numero">10</div>'+'\t\t<div class="div-texto">'+"\t\t\tSuframa (caso pertenÃ§a Ã  Ãrea de Livre ComÃ©rcio)."+"\t\t</div>"+"\t</div>"+'\t<div class="col-xs-12">'+'\t\t<input type="file" id="client-suframa-file" />'+"\t</div>"+'\t<div class="col-xs-12"><div id="btn-documentos" class="btn-salvar-lojista">Enviar</div></div>'+'\t<div class="col-xs-12 text-center texto-duvidas">DÃºvidas contatar a AdministraÃ§Ã£o de Vendas</div>'+'\t<div class="col-xs-12 text-center texto-duvidas-email">vendassp@herbariumdistribuidora.com.br</div>'+'\t<div class="col-xs-12 text-center texto-duvidas-tel">0800 9797989</div>'+"</div>"+'<div class="passo-quatro">'+'\t<div class="col-xs-12 text-center titulo-cadastro">Ficha Cadastral</div>'+'\t<div class="col-xs-12 text-left div-titulo-ficha">Dados Cadastrais do Cliente</div>'+'\t<div class="col-xs-12 dados-cadastrais-cliente"></div>'+'\t<div class="col-xs-12 text-left div-titulo-ficha">Dados de CobranÃ§a</div>'+'\t<div class="col-xs-12 dados-cobranca-cliente"></div>'+'\t<div class="col-xs-12 text-left div-titulo-ficha">Contato / E-mail</div>'+'\t<div class="col-xs-12 dados-contato-email-cliente"></div>'+'\t<div class="col-xs-12 text-left div-titulo-ficha">InformaÃ§Ãµes Complementares</div>'+'\t<div class="col-xs-12 dados-info-complementar-cliente"></div>'+'\t<div class="col-xs-12"><div id="btn-ficha-cadastral" class="btn-salvar-lojista">Confirmar e Continuar</div></div>'+"</div>"+'<div class="passo-cinco">'+'\t<div class="col-xs-12 text-center titulo-cadastro">Caro cliente, seu cadastro foi enviado com sucesso.</div>'+'\t<div class="col-xs-12 text-center">Dentro de 72 horas vocÃª serÃ¡ contatado para receber seu login e sua senha para compra.</div>'+"</div>";$(".form-cadastro-lojista").html(formulario);preparaBoxUm()}function preparaBoxUm(){preparaBox();$(".passo-um").fadeIn();$("#btn-setor").click(function(){if($("input[name=setor]:checked").attr("name")!=undefined){var valor=$("input[name=setor]:checked").attr("value");$("#setor-selecionado").val(valor);preparaBoxDois()}else{var msg="Selecione o setor";errorMessage(".passo-um",msg)}});removeLoader(".passo-um")}function preparaBoxDois(){preparaBox();$(".passo-dois").fadeIn();preparaBoxDadosUm()}function preparaBoxDadosUm(){preparaBoxDados();$(".dados-um").fadeIn();$("#btn-dados-um").click(function(){var resultado=validaFormulario();if(resultado=="sucesso"){salvaPassoUm()}else{errorMessage(".passo-dois",resultado)}});id("client-cep").onkeypress=function(){mascaraCep(this,cep)};id("client-cep").onblur=function(){var cep=this.value;if(cep.length==9)buscaCep(cep,1)};id("client-tel-1").onkeypress=function(){mascaraTel(this,tel)};id("client-tel-2").onkeypress=function(){mascaraTel(this,tel)};id("client-cnpj").onkeypress=function(){mascaraCnpj(this,cnpj)}}function salvaPassoUm(){mostraLoader(".passo-dois");var cl_trade_name=$("#client-razao-social").val();var cl_is_corporate="True";var cl_is_newsletter_opt_in="True";var cl_email=$("#client-email").val();var cl_contact=$("#client-contato").val();var cl_home_phone=$("#client-tel-1").val();var cl_phone=$("#client-tel-2").val();var cl_document=$("#client-cnpj").val();var cl_state_registration=$("#client-insc-estadual").val();var cl_city_registration=$("#client-insc-municipal").val();var cl_perfil=$("#setor-selecionado").val();var dc_street=$("#client-endereco").val()+" - NÃºmero: "+$("#client-endereco-numero").val()+" - Complemento: "+$("#client-endereco-complemento").val();var dc_neighborhood=$("#client-bairro").val();var dc_city=$("#client-cidade").val();var dc_postal_code=$("#client-cep").val();var dc_state=$("#client-uf").val();var dc_passo="um";var cl_json={tradeName:cl_trade_name,isCorporate:cl_is_corporate,isNewsletterOptIn:cl_is_newsletter_opt_in,email:cl_email,contact:cl_contact,homePhone:cl_home_phone,phone:cl_phone,document:cl_document,stateRegistration:cl_state_registration,cityRegistration:cl_city_registration,perfil:cl_perfil,street:dc_street,neighborhood:dc_neighborhood,city:dc_city,postalCode:dc_postal_code,state:dc_state,step:dc_passo};var cl_url="/api/dataentities/CL/documents/";$.ajax({headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json"},data:JSON.stringify(cl_json),type:"PATCH",url:cl_url,success:function(data,textStatus,xhr){console.log(data);if(xhr.status=="200"||xhr.status=="201"){$("#id_dc-selecionado").val(data.Id);insereEndereco(data.Id)}else if(xhr.status=="304"){$("#id_dc-selecionado").val(data.Id);insereEndereco(data.Id)}else{console.log("Deu erro")}},error:function(data){console.log(data);removeLoader(".passo-dois")}})}function insereEndereco(id){var ad_postal_code=$("#client-cep").val();var ad_street=$("#client-endereco").val()+" - NÃºmero: "+$("#client-endereco-numero").val()+" - Complemento: "+$("#client-endereco-complemento").val();var ad_neighborhood=$("#client-bairro").val();var ad_state=$("#client-uf").val();var ad_city=$("#client-cidade").val();var ad_country="BRA";var ad_address_name="Comercial";var ad_address_type="Comercial";var jsonAD={userId:id.replace("CL-",""),postalCode:ad_postal_code,street:ad_street,neighborhood:ad_neighborhood,state:ad_state,city:ad_city,country:ad_country,addressName:ad_address_name,addressType:ad_address_type};var urlAD="/api/dataentities/AD/documents/";$.ajax({headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json"},data:JSON.stringify(jsonAD),type:"PATCH",url:urlAD,success:function(data){console.log(data);preparaBoxDadosDois();removeLoader(".passo-dois")},error:function(data){removeLoader(".passo-dois")}})}function disparaEmail(dc_client){var dc_trade_name=$("#client-razao-social").val();var dc_street=$("#client-endereco").val();var dc_neighborhood=$("#client-bairro").val();var dc_city=$("#client-cidade").val();var dc_phone_home=$("#client-tel-1").val();var dc_phone=$("#client-tel-2").val();var dc_document=$("#client-cnpj").val();var dc_state_registration=$("#client-insc-estadual").val();var dc_city_registration=$("#client-insc-municipal").val();var dc_postal_code=$("#client-cep").val();var dc_state=$("#client-uf").val();var dc_contact=$("#client-contato").val();var dc_email=$("#client-email").val();var dc_json={client:dc_client.replace("CL-",""),street:dc_street,neighborhood:dc_neighborhood,city:dc_city,phoneHome:dc_phone_home,document:dc_document,postalCode:dc_postal_code,state:dc_state};var dc_url="/api/dataentities/CL/documents/";$.ajax({headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json"},data:JSON.stringify(dc_json),type:"PATCH",url:dc_url,success:function(data,textStatus,xhr){console.log(data);if(xhr.status=="200"||xhr.status=="201"){$("#id_dc-selecionado").val(data.Id);preparaBoxDadosDois()}else if(xhr.status=="304"){$("#id_dc-selecionado").val(data.Id);preparaBoxDadosDois()}else{console.log("Deu erro")}removeLoader(".passo-dois")},error:function(data){console.log(data);removeLoader(".passo-dois");disparaEmail()}})}function preparaBoxDadosDois(){preparaBoxDados();$(".dados-dois").fadeIn();$("#btn-dados-dois").click(function(){preparaBoxDadosTres()});$("#btn-utilizar-endereco").change(function(){if($(this).prop("checked")){$("input#client-cep-cobranca").val($("input#client-cep").val());$("input#client-cep-cobranca").attr("readonly","readonly");$("input#client-endereco-cobranca").val($("input#client-endereco").val());$("input#client-endereco-cobranca").attr("readonly","readonly");$("input#client-endereco-numero-cobranca").val($("input#client-endereco-numero").val());$("input#client-endereco-numero-cobranca").attr("readonly","readonly");$("input#client-endereco-complemento-cobranca").val($("input#client-endereco-complemento").val());$("input#client-endereco-complemento-cobranca").attr("readonly","readonly");$("input#client-bairro-cobranca").val($("input#client-bairro").val());$("input#client-bairro-cobranca").attr("readonly","readonly");$("input#client-cidade-cobranca").val($("input#client-cidade").val());$("input#client-cidade-cobranca").attr("readonly","readonly");$("input#client-tel-cobranca").val($("input#client-tel-1").val());$("input#client-tel-cobranca").attr("readonly","readonly");$("input#client-insc-estadual-cobranca").val($("input#client-insc-estadual").val());$("input#client-insc-estadual-cobranca").attr("readonly","readonly");$("input#client-uf-cobranca").val($("input#client-uf").val());$("input#client-uf-cobranca").attr("readonly","readonly");$("input#client-contato-cobranca").val($("input#client-contato").val());$("input#client-contato-cobranca").attr("readonly","readonly");$("input#client-cnpj-cobranca").val($("input#client-cnpj").val());$("input#client-cnpj-cobranca").attr("readonly","readonly");$("input#client-insc-municipal-cobranca").val($("input#client-insc-municipal").val());$("input#client-insc-municipal-cobranca").attr("readonly","readonly")}else{$("input#client-cep-cobranca").val("");$("input#client-cep-cobranca").removeAttr("readonly");$("input#client-endereco-cobranca").val("");$("input#client-endereco-cobranca").removeAttr("readonly");$("input#client-endereco-numero-cobranca").val("");$("input#client-endereco-numero-cobranca").removeAttr("readonly");$("input#client-endereco-complemento-cobranca").val("");$("input#client-endereco-complemento-cobranca").removeAttr("readonly");$("input#client-bairro-cobranca").val("");$("input#client-bairro-cobranca").removeAttr("readonly");$("input#client-cidade-cobranca").val("");$("input#client-cidade-cobranca").removeAttr("readonly");$("input#client-tel-cobranca").val("");$("input#client-tel-cobranca").removeAttr("readonly");$("input#client-insc-estadual-cobranca").val("");$("input#client-insc-estadual-cobranca").removeAttr("readonly");$("input#client-uf-cobranca").val("");$("input#client-uf-cobranca").removeAttr("readonly");$("input#client-contato-cobranca").val("");$("input#client-contato-cobranca").removeAttr("readonly");$("input#client-cnpj-cobranca").val("");$("input#client-cnpj-cobranca").removeAttr("readonly");$("input#client-insc-municipal-cobranca").val("");$("input#client-insc-municipal-cobranca").removeAttr("readonly")}});id("client-cep-cobranca").onkeypress=function(){mascaraCep(this,cep)};id("client-cep-cobranca").onblur=function(){var cep=this.value;if(cep.length==9)buscaCep(cep,2)};id("client-tel-cobranca").onkeypress=function(){mascaraTel(this,tel)};id("client-cnpj-cobranca").onkeypress=function(){mascaraCnpj(this,cnpj)}}function preparaBoxDadosTres(){preparaBoxDados();$(".dados-tres").fadeIn();$("#btn-dados-tres").click(function(){var resultado=validaBoxDadosTres();if(resultado=="sucesso"){preparaBoxDadosQuatro()}else{errorMessage(".passo-dois",resultado)}});id("client-tel-compras").onkeypress=function(){mascaraTel(this,tel)};id("client-tel-pedidos").onkeypress=function(){mascaraTel(this,tel)};id("client-tel-agendamento").onkeypress=function(){mascaraTel(this,tel)};id("client-tel-recebimento").onkeypress=function(){mascaraTel(this,tel)};id("client-tel-fiscal").onkeypress=function(){mascaraTel(this,tel)};id("client-tel-financeiro").onkeypress=function(){mascaraTel(this,tel)};id("client-tel-devolucao").onkeypress=function(){mascaraTel(this,tel)};id("client-tel-farmaceutico").onkeypress=function(){mascaraTel(this,tel)}}function validaBoxDadosTres(){var email_financeiro=$("#client-titulo-financeiro").val();var tel_financeiro=$("#client-tel-financeiro").val();var con_financeiro=$("#client-contato-financeiro").val();if(email_financeiro==""){return"Informe um e-mail para financeiro"}else{if(!IsEmail(email_financeiro)){return"Informe um e-mail para financeiro vÃ¡lido"}}if(tel_financeiro==""){return"Informe um telefone para finaceiro"}if(con_financeiro==""){return"Informe um responsÃ¡vel para finaceiro"}return"sucesso"}function preparaBoxDadosQuatro(){preparaBoxDados();$(".dados-quatro").fadeIn();$("#btn-dados-quatro").click(function(){preparaBoxDadosCinco()});id("client-ref-1-tel").onkeypress=function(){mascaraTel(this,tel)};id("client-ref-2-tel").onkeypress=function(){mascaraTel(this,tel)};id("client-ref-3-tel").onkeypress=function(){mascaraTel(this,tel)}}function preparaBoxDadosCinco(){preparaBoxDados();$(".dados-cinco").fadeIn();$("#btn-dados-cinco").click(function(){preparaBoxTres()})}function enviaFormularioCompleto(){mostraLoader(".passo-quatro");var dc_id=$("#id_dc-selecionado").val().replace("CL-","");var dc_trade_name=$("#client-razao-social").val();var dc_street=$("#client-endereco").val()+" - NÃºmero: "+$("#client-endereco-numero").val()+" - Complemento: "+$("#client-endereco-complemento").val();var dc_neighborhood=$("#client-bairro").val();var dc_city=$("#client-cidade").val();var dc_phone_home=$("#client-tel-1").val();var dc_phone=$("#client-tel-2").val();var dc_document=$("#client-cnpj").val();var dc_state_registration=$("#client-insc-estadual").val();var dc_city_registration=$("#client-insc-municipal").val();var dc_postal_code=$("#client-cep").val();var dc_state=$("#client-uf").val();var dc_contact=$("#client-contato").val();var dc_email=$("#client-email").val();var dc_pay_street=$("#client-endereco-cobranca").val()+" - NÃºmero: "+$("#client-endereco-numero-cobranca").val()+" - Complemento: "+$("#client-endereco-complemento-cobranca").val();var dc_pay_neighborhood=$("#client-bairro-cobranca").val();var dc_pay_city=$("#client-cidade-cobranca").val();var dc_pay_phone=$("#client-tel-cobranca").val();var dc_pay_document=$("#client-cnpj-cobranca").val();var dc_pay_state_registration=$("#client-insc-estadual-cobranca").val();var dc_pay_city_registration=$("#client-insc-municipal-cobranca").val();var dc_pay_postal_code=$("#client-cep-cobranca").val();var dc_pay_state=$("#client-uf-cobranca").val();var dc_pay_cobranca=$("#client-contato-cobranca").val();var dc_email_compras=$("#client-titulo-compras").val();var dc_phone_compras=$("#client-tel-compras").val();var dc_contact_compras=$("#client-contato-compras").val();var dc_email_pedidos=$("#client-titulo-pedidos").val();var dc_phone_pedidos=$("#client-tel-pedidos").val();var dc_contact_pedidos=$("#client-contato-pedidos").val();var dc_email_agendamento=$("#client-titulo-agendamento").val();var dc_phone_agendamento=$("#client-tel-agendamento").val();var dc_contact_agendamento=$("#client-contato-agendamento").val();var dc_email_recebimento=$("#client-titulo-recebimento").val();var dc_phone_recebimento=$("#client-tel-recebimento").val();var dc_contact_recebimento=$("#client-contato-recebimento").val();var dc_email_fiscal=$("#client-titulo-fiscal").val();var dc_phone_fiscal=$("#client-tel-fiscal").val();var dc_contact_fiscal=$("#client-contato-fiscal").val();var dc_email_financeiro=$("#client-titulo-financeiro").val();var dc_phone_financeiro=$("#client-tel-financeiro").val();var dc_contact_financeiro=$("#client-contato-financeiro").val();var dc_email_devolucao=$("#client-titulo-devolucao").val();var dc_phone_devolucao=$("#client-tel-devolucao").val();var dc_contact_devolucao=$("#client-contato-devolucao").val();var dc_email_farmaceutico=$("#client-titulo-farmaceutico").val();var dc_phone_farmaceutico=$("#client-tel-farmaceutico").val();var dc_contact_farmaceutico=$("#client-contato-farmaceutico").val();var dc_contact_fornecedor_um=$("#client-ref-1").val();var dc_phone_fornecedor_um=$("#client-ref-1-tel").val();var dc_contact_fornecedor_dois=$("#client-ref-2").val();var dc_phone_fornecedor_dois=$("#client-ref-2-tel").val();var dc_contact_fornecedor_tres=$("#client-ref-3").val();var dc_phone_fornecedor_tres=$("#client-ref-3-tel").val();var dc_banco_um=$("#client-ref-banco-1").val();var dc_agencia_um=$("#client-ref-agencia-1").val();var dc_conta_corrente_um=$("#client-ref-conta-1").val();var dc_banco_dois=$("#client-ref-banco-2").val();var dc_agencia_dois=$("#client-ref-agencia-2").val();var dc_conta_corrente_dois=$("#client-ref-conta-2").val();var dc_informacoes=$("#client-info").val();var dc_passo="cinco";var dc_json={tradeName:dc_trade_name,street:dc_street,neighborhood:dc_neighborhood,city:dc_city,homePhone:dc_phone_home,phone:dc_phone,document:dc_document,stateRegistration:dc_state_registration,cityRegistration:dc_city_registration,postalCode:dc_postal_code,state:dc_state,contact:dc_contact,email:dc_email,payStreet:dc_pay_street,payNeighborhood:dc_pay_neighborhood,payCity:dc_pay_city,payPhone:dc_pay_phone,payDocument:dc_pay_document,payStateRegistration:dc_pay_state_registration,payCityRegistration:dc_pay_city_registration,payPostalCode:dc_pay_postal_code,payState:dc_pay_state,payContact:dc_pay_cobranca,emailCompras:dc_email_compras==""?null:dc_email_compras,phoneCompras:dc_phone_compras,contactCompras:dc_contact_compras,emailPedidos:dc_email_pedidos==""?null:dc_email_pedidos,phonePedidos:dc_phone_pedidos,contactPedidos:dc_contact_pedidos,emailAgendamento:dc_email_agendamento==""?null:dc_email_agendamento,phoneAgendamento:dc_phone_agendamento,contactAgendamento:dc_contact_agendamento,emailRecebimento:dc_email_recebimento==""?null:dc_email_recebimento,phoneRecebimento:dc_phone_recebimento,contactRecebimento:dc_contact_recebimento,emailFiscal:dc_email_fiscal==""?null:dc_email_fiscal,phoneFiscal:dc_phone_fiscal,contactFiscal:dc_contact_fiscal,emailFinanceiro:dc_email_financeiro==""?null:dc_email_financeiro,phoneFinanceiro:dc_phone_financeiro,contactFinanceiro:dc_contact_financeiro,emailDevolucao:dc_email_devolucao==""?null:dc_email_devolucao,phoneDevolucao:dc_phone_devolucao,contactDevolucao:dc_contact_devolucao,emailFarmaceutico:dc_email_farmaceutico==""?null:dc_email_farmaceutico,phoneFarmaceutico:dc_phone_farmaceutico,contactFarmaceutico:dc_contact_farmaceutico,contactFornecedorUm:dc_contact_fornecedor_um,phoneFornecedorUm:dc_phone_fornecedor_um,contactFornecedorDois:dc_contact_fornecedor_dois,phoneFornecedorDois:dc_phone_fornecedor_dois,contactFornecedorTres:dc_contact_fornecedor_tres,phoneFornecedorTres:dc_phone_fornecedor_tres,bancoUm:dc_banco_um,agenciaUm:dc_agencia_um,contaCorrenteUm:dc_conta_corrente_um,bancoDois:dc_banco_dois,agenciaDois:dc_agencia_dois,contaCorrenteDois:dc_conta_corrente_dois,Informacaoes:dc_informacoes,step:dc_passo};var dc_url="/api/dataentities/CL/documents/"+dc_id+"/";$.ajax({headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json"},data:JSON.stringify(dc_json),type:"PATCH",url:dc_url,success:function(data,textStatus,xhr){console.log(data);enviaEmailSucesso();removeLoader(".passo-quatro")},error:function(data){console.log(data);removeLoader(".passo-quatro")}})}function preparaBoxTres(){preparaBox();$(".passo-tres").fadeIn();$("#btn-documentos").click(function(){var lista_anexo=new Array;var ind=0;if($("#client-anvisa-file").val()!=""){lista_anexo[ind]="client-anvisa-file";ind++}if($("#client-visa-file").val()!=""){lista_anexo[ind]="client-visa-file";ind++}if($("#client-certificado-file").val()!=""){lista_anexo[ind]="client-certificado-file";ind++}if($("#client-insc-estadual-file").val()!=""){lista_anexo[ind]="client-insc-estadual-file";ind++}if($("#client-cnpj-file").val()!=""){lista_anexo[ind]="client-cnpj-file";ind++}if($("#client-contrato-social-file").val()!=""){lista_anexo[ind]="client-contrato-social-file";ind++}if($("#client-patrimonial-file").val()!=""){lista_anexo[ind]="client-patrimonial-file";ind++}if($("#client-faturamento-file").val()!=""){lista_anexo[ind]="client-faturamento-file";ind++}if($("#client-icms-file").val()!=""){lista_anexo[ind]="client-icms-file";ind++}if($("#client-suframa-file").val()!=""){lista_anexo[ind]="client-suframa-file"}enviaAnexo(lista_anexo,0)})}function mostraLoader(seletor){$(seletor).append('<div class="loader-msg" display="none;"><div class="div-gif"><img src="/arquivos/loader-gif.gif"></div></div>');$(".loader-msg").fadeIn()}function removeLoader(seletor){$(".loader-msg").fadeOut(1e3,function(){$(this).remove()})}function enviaAnexo(lista,ind){if(ind<lista.length){mostraLoader(".passo-tres");var dc_id=$("#id_dc-selecionado").val().replace("CL-","");var tc_file=$("#"+lista[ind])[0].files;var fileData=new FormData;$.each(tc_file,function(key,value){fileData.append(key,value)});var urlCO="/api/dataentities/CL/documents/"+dc_id+"/"+lista[ind].replace(/-/g,"_")+"/attachments";$.ajax({headers:{Accept:"application/vnd.vtex.ds.v10+json"},data:fileData,type:"POST",url:urlCO,processData:false,contentType:false,enctype:"multipart/form-data",success:function(data){console.log(data);ind++;enviaAnexo(lista,ind)},error:function(data){console.log(data);removeLoader(".passo-tres")}})}else{removeLoader(".passo-tres");preparaBoxQuatro()}}function preparaBoxQuatro(){preparaBox();$(".passo-quatro").fadeIn();$("#btn-ficha-cadastral").click(function(){enviaFormularioCompleto()});$("#btn-setor").unbind();$("#btn-dados-um").unbind();$("#btn-dados-dois").unbind();$("#btn-dados-tres").unbind();$("#btn-dados-quatro").unbind();$("#btn-dados-cinco").unbind();$("#btn-documentos").unbind();var html='<table class="ficha-cadastral-cliente">'+"\t<tr>"+'\t\t<td colspan="3">'+"\t\t\t<b>RazÃ£o Social:</b> "+$("#client-razao-social").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+'\t\t<td colspan="3">'+"\t\t\t<b>EndereÃ§o:</b> "+$("#client-endereco").val()+", "+$("#client-endereco-numero").val()+" - "+$("#client-endereco-complemento").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+"\t\t<td>"+"\t\t\t<b>Bairro:</b> "+$("#client-bairro").val()+"\t\t</td>"+"\t\t<td>"+"\t\t\t<b>CEP:</b> "+$("#client-cep").val()+"\t\t</td>"+"\t\t<td>"+"\t\t\t<b>UF:</b> "+$("#client-uf").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+"\t\t<td>"+"\t\t\t<b>Cidade:</b> "+$("#client-cidade").val()+"\t\t</td>"+'\t\t<td colspan="2">'+"\t\t\t<b>Contato:</b> "+$("#client-contato").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+"\t\t<td>"+"\t\t\t<b>DDD/Telefone 1:</b> "+$("#client-tel-1").val()+"\t\t</td>"+'\t\t<td colspan="2">'+"\t\t\t<b>DDD/Telefone 2:</b> "+$("#client-tel-2").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+"\t\t<td>"+"\t\t\t<b>CNPJ:</b> "+$("#client-cnpj").val()+"\t\t</td>"+'\t\t<td colspan="2">'+"\t\t\t<b>E-mail XML:</b> "+$("#client-email").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+"\t\t<td>"+"\t\t\t<b>Insc. Estadual:</b> "+$("#client-insc-estadual").val()+"\t\t</td>"+'\t\t<td colspan="2">'+"\t\t\t<b>Insc. Municipal:</b> "+$("#client-insc-municipal").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+'\t\t<td colspan="3">'+'\t\t\t<span class="editar-cliente">Editar</span> '+"\t\t</td>"+"\t</tr>"+"</table>";$(".dados-cadastrais-cliente").html(html);html='<table class="ficha-cadastral-cobranca">'+"\t<tr>"+'\t\t<td colspan="3">'+"\t\t\t<b>EndereÃ§o:</b> "+$("#client-endereco-cobranca").val()+", "+$("#client-endereco-numero-cobranca").val()+" - "+$("#client-endereco-complemento-cobranca").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+"\t\t<td>"+"\t\t\t<b>Bairro:</b> "+$("#client-bairro-cobranca").val()+"\t\t</td>"+"\t\t<td>"+"\t\t\t<b>CEP:</b> "+$("#client-cep-cobranca").val()+"\t\t</td>"+"\t\t<td>"+"\t\t\t<b>UF:</b> "+$("#client-uf-cobranca").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+"\t\t<td>"+"\t\t\t<b>Cidade:</b> "+$("#client-cidade-cobranca").val()+"\t\t</td>"+'\t\t<td colspan="2">'+"\t\t\t<b>Contato:</b> "+$("#client-contato-cobranca").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+"\t\t<td>"+"\t\t\t<b>DDD/Telefone:</b> "+$("#client-tel-cobranca").val()+"\t\t</td>"+'\t\t<td colspan="2">'+"\t\t\t<b>CNPJ:</b> "+$("#client-cnpj-cobranca").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+"\t\t<td>"+"\t\t\t<b>Insc. Estadual:</b> "+$("#client-insc-estadual-cobranca").val()+"\t\t</td>"+'\t\t<td colspan="2">'+"\t\t\t<b>Insc. Municipal:</b> "+$("#client-insc-municipal-cobranca").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+'\t\t<td colspan="3">'+'\t\t\t<span class="editar-cobranca">Editar</span> '+"\t\t</td>"+"\t</tr>"+"</table>";$(".dados-cobranca-cliente").html(html);html='<table class="ficha-cadastral-contato">'+"\t<tr>"+"\t\t<td>"+"\t\t\t<b>Compras:</b> "+$("#client-titulo-compras").val()+" / "+$("#client-tel-compras").val()+" / "+$("#client-contato-compras").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+"\t\t<td>"+"\t\t\t<b>Pedidos:</b> "+$("#client-titulo-pedidos").val()+" / "+$("#client-tel-pedidos").val()+" / "+$("#client-contato-pedidos").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+"\t\t<td>"+"\t\t\t<b>Agendamento:</b> "+$("#client-titulo-agendamento").val()+" / "+$("#client-tel-agendamento").val()+" / "+$("#client-contato-agendamento").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+"\t\t<td>"+"\t\t\t<b>Recebimento:</b> "+$("#client-titulo-recebimento").val()+" / "+$("#client-tel-recebimento").val()+" / "+$("#client-contato-recebimento").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+"\t\t<td>"+"\t\t\t<b>Fiscal:</b> "+$("#client-titulo-fiscal").val()+" / "+$("#client-tel-fiscal").val()+" / "+$("#client-contato-fiscal").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+"\t\t<td>"+"\t\t\t<b>Financeiro:</b> "+$("#client-titulo-financeiro").val()+" / "+$("#client-tel-financeiro").val()+" / "+$("#client-contato-financeiro").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+"\t\t<td>"+"\t\t\t<b>Devolucao:</b> "+$("#client-titulo-devolucao").val()+" / "+$("#client-tel-devolucao").val()+" / "+$("#client-contato-devolucao").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+"\t\t<td>"+"\t\t\t<b>FarmacÃªutico:</b> "+$("#client-titulo-farmaceutico").val()+" / "+$("#client-tel-farmaceutico").val()+" / "+$("#client-contato-farmaceutico").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+"\t\t<td>"+'\t\t\t<span class="editar-contato">Editar</span> '+"\t\t</td>"+"\t</tr>"+"</table>";$(".dados-contato-email-cliente").html(html);html='<table class="ficha-cadastral-referencia">'+"\t<tr>"+"\t\t<th>"+"\t\t\tPrincipais fornecedores:"+"\t\t</th>"+"\t\t<th>"+"\t\t\tReferÃªncia bancÃ¡ria:"+"\t\t</th>"+"\t</tr>"+"\t<tr>"+"\t\t<td>"+"\t\t\t"+$("#client-ref-1").val()+" / "+$("#client-ref-1-tel").val()+"\t\t</td>"+"\t\t<td>"+"\t\t\t<b>Banco:</b> "+$("#client-ref-banco-1").val()+" / <b>AgÃªncia:</b> "+$("#client-ref-agencia-1").val()+" / <b>Conta Corrente:</b> "+$("#client-ref-conta-1").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+"\t\t<td>"+"\t\t\t"+$("#client-ref-2").val()+" / "+$("#client-ref-2-tel").val()+"\t\t</td>"+"\t\t<td>"+"\t\t\t<b>Banco:</b> "+$("#client-ref-banco-2").val()+" / <b>AgÃªncia:</b> "+$("#client-ref-agencia-2").val()+" / <b>Conta Corrente:</b> "+$("#client-ref-conta-2").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+'\t\t<td colspan="2">'+"\t\t\t"+$("#client-ref-3").val()+" / "+$("#client-ref-3-tel").val()+"\t\t</td>"+"\t</tr>"+"\t<tr>"+'\t\t<td colspan="2">'+'\t\t\t<span class="editar-referencia">Editar</span> '+"\t\t</td>"+"\t</tr>"+"</table>";$(".dados-info-complementar-cliente").html(html);$(".editar-cliente").click(function(){preparaBoxDois();preparaBoxDadosUm();$("#btn-ficha-cadastral").unbind()});$(".editar-cobranca").click(function(){preparaBoxDois();preparaBoxDadosDois();$("#btn-ficha-cadastral").unbind()});$(".editar-contato").click(function(){preparaBoxDois();preparaBoxDadosTres();$("#btn-ficha-cadastral").unbind()});$(".editar-referencia").click(function(){preparaBoxDois();preparaBoxDadosQuatro();$("#btn-ficha-cadastral").unbind()})}function preparaBoxCinco(){preparaBox();$(".passo-cinco").fadeIn()}function enviaEmailSucesso(){mostraLoader(".passo-quatro");var di_email=$("#client-email").val();var di_json={email:di_email};var di_url="/api/dataentities/DI/documents/";$.ajax({headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json"},data:JSON.stringify(di_json),type:"PATCH",url:di_url,success:function(data,textStatus,xhr){console.log(data);removeLoader(".passo-quatro");preparaBoxCinco()},error:function(data){console.log(data);removeLoader(".passo-quatro");preparaBoxCinco()}})}function validaFormulario(){var razao_social=$("#client-razao-social").val();var cep=$("#client-cep").val();var endereco=$("#client-endereco").val();var numero=$("#client-endereco-numero").val();var bairro=$("#client-bairro").val();var uf=$("#client-uf").val();var cidade=$("#client-cidade").val();var contato=$("#client-contato").val();var tel1=$("#client-tel-1").val();var tel2=$("#client-tel-2").val();var cnpj=$("#client-cnpj").val();var email=$("#client-email").val();var insc_estadual=$("#client-insc-estadual").val();if(razao_social==""){return"Informe a RazÃ£o Social"}if(cep==""){return"Informe o CEP"}if(endereco==""){return"Informe o EndereÃ§o"}if(numero==""){return"Informe o NÃºmero (caso nÃ£o tenha nÃºmero informe ZERO)"}if(bairro==""){return"Informe o Bairro"}if(uf==""){return"Informe a UF"}if(cidade==""){return"Informe a Cidade"}if(contato==""){return"Informe o Contato"}if(tel1==""){return"Informe o Telefone 1"}if(tel2==""){return"Informe o Telefone 2"}if(cnpj==""){return"Informe o CNPJ"}if(!validarCNPJ(cnpj)){return"CNPJ invÃ¡lido"}if(email==""){return"Informe o E-mail"}if(!IsEmail(email)){return"Informe um E-mail vÃ¡lido"}if(insc_estadual==""){return"Informe a InscriÃ§Ã£o Estadual"}return"sucesso"}function preparaBoxDados(){$(".dados-um").fadeOut();$(".dados-dois").fadeOut();$(".dados-tres").fadeOut();$(".dados-quatro").fadeOut();$(".dados-cinco").fadeOut()}function errorMessage(seletor,msg){$(seletor).append('<div class="error-msg" display="none;">'+msg+"</div>");$(".error-msg").fadeIn(3e3).fadeOut(3e3,function(){$(this).remove()})}function preparaBox(){$(".passo-um").fadeOut();$(".passo-dois").fadeOut();$(".passo-tres").fadeOut();$(".passo-quatro").fadeOut();$(".passo-cinco").fadeOut()}function mascaraCep(o,f){v_obj=o;v_fun=f;setTimeout("execmascaraCep()",1)}function execmascaraCep(){v_obj.value=v_fun(v_obj.value)}function cep(v){v=v.replace(/\D/g,"");v=v.replace(/^(\d{5})(\d)/g,"$1-$2");return v}function mascaraTel(o,f){v_obj=o;v_fun=f;setTimeout("execmascaraTel()",1)}function execmascaraTel(){v_obj.value=v_fun(v_obj.value)}function tel(v){v=v.replace(/\D/g,"");v=v.replace(/^(\d{2})(\d)/g,"($1) $2");v=v.replace(/(\d)(\d{4})$/,"$1-$2");return v}function mascaraCnpj(o,f){v_obj=o;v_fun=f;setTimeout("execmascaraCnpj()",1)}function execmascaraCnpj(){v_obj.value=v_fun(v_obj.value)}function cnpj(v){v=v.replace(/\D/g,"");v=v.replace(/^(\d{2})(\d{3})?(\d{3})?(\d{4})?(\d{2})?/,"$1.$2.$3/$4-$5");return v}function id(el){return document.getElementById(el)}function setCookie(name,value,duration){var cookie=name+"="+escape(value)+(duration?"; duration="+duration.toGMTString():"");document.cookie=cookie}function getCookie(name){var cookies=document.cookie;var prefix=name+"=";var begin=cookies.indexOf("; "+prefix);if(begin==-1){begin=cookies.indexOf(prefix);if(begin!=0){return null}}else{begin+=2}var end=cookies.indexOf(";",begin);if(end==-1){end=cookies.length}return unescape(cookies.substring(begin+prefix.length,end))}function deleteCookie(name){if(getCookie(name)){document.cookie=name+"="+"; expires=Thu, 01-Jan-70 00:00:01 GMT"}}function getDuracao(dias){var duracao=new Date;duracao.setDate(duracao.getDate()+dias);return duracao}function validarCNPJ(cnpj){cnpj=cnpj.replace(/[^\d]+/g,"");if(cnpj=="")return false;if(cnpj.length!=14)return false;if(cnpj=="00000000000000"||cnpj=="11111111111111"||cnpj=="22222222222222"||cnpj=="33333333333333"||cnpj=="44444444444444"||cnpj=="55555555555555"||cnpj=="66666666666666"||cnpj=="77777777777777"||cnpj=="88888888888888"||cnpj=="99999999999999")return false;tamanho=cnpj.length-2;numeros=cnpj.substring(0,tamanho);digitos=cnpj.substring(tamanho);soma=0;pos=tamanho-7;for(i=tamanho;i>=1;i--){soma+=numeros.charAt(tamanho-i)*pos--;if(pos<2)pos=9}resultado=soma%11<2?0:11-soma%11;if(resultado!=digitos.charAt(0))return false;tamanho=tamanho+1;numeros=cnpj.substring(0,tamanho);soma=0;pos=tamanho-7;for(i=tamanho;i>=1;i--){soma+=numeros.charAt(tamanho-i)*pos--;if(pos<2)pos=9}resultado=soma%11<2?0:11-soma%11;if(resultado!=digitos.charAt(1))return false;return true}function IsEmail(email){var regex=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return regex.test(email)}function buscaCep(cep,target){var url="https://viacep.com.br/ws/"+cep+"/json/";$.ajax({headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json"},type:"GET",url:url,success:function(data){console.log(data);carregaCep(data,target)},error:function(data){console.log(data)}})}function carregaCep(data,target){if(data!=null){if(target==1){$("#client-endereco").val(data.logradouro);$("#client-bairro").val(data.bairro);$("#client-uf").val(data.uf);$("#client-cidade").val(data.localidade);$("#client-endereco-numero").focus()}if(target==2){$("#client-endereco-cobranca").val(data.logradouro);$("#client-bairro-cobranca").val(data.bairro);$("#client-uf-cobranca").val(data.uf);$("#client-cidade-cobranca").val(data.localidade);$("#client-endereco-numero-cobranca").focus()}}}function enviaLogin(){var resultado=validaFormularioLogin();if(resultado=="sucesso"){var email=$("#email-lojista").val();loginLojista(email)}else{errorMessageLogin(".form-login-lojista",resultado)}}function errorMessageLogin(seletor,msg){$(seletor).append('<div class="error-msg" display="none;">'+msg+"</div>");$(".error-msg").fadeIn(3e3).fadeOut(3e3,function(){$(this).remove()})}function mostraLoaderLogin(seletor){$(seletor).append('<div class="loader-msg" display="none;"><div class="div-gif"><img src="/arquivos/loader-gif.gif"></div></div>');$(".loader-msg").fadeIn()}function removeLoaderLogin(seletor){$(".loader-msg").fadeOut(1e3,function(){$(this).remove()})}function validaFormularioLogin(){var email=$("#email-lojista").val();if(email==""){email.addClass("error");return"Informe o E-mail"}if(!IsEmail(email)){email.addClass("error");return"Informe um E-mail vÃ¡lido"}return"sucesso"}function IsEmailLogin(email){var regex=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return regex.test(email)}function loginLojista(email){mostraLoaderLogin(".form-login-lojista");var url="/api/dataentities/CL/search/?email="+email+"&_fields=approved";$.ajax({headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json"},type:"GET",url:url,success:function(data,textStatus,xhr){console.log(data);if(xhr.status=="200"||xhr.status=="201"){return loadLojista(data)}else{console.log(data)}},error:function(data){console.log(data);removeLoaderLogin(".form-login-lojista")}})}function loadLojista(data){removeLoaderLogin(".form-login-lojista");if(data[0]!=null){if(data[0].approved){var email=$("#email-lojista").val();$("body,html").animate({scrollTop:0},"slow");vtexid.start({returnUrl:"/",userEmail:email,locale:"pt-BR",forceReload:true,scopeName:"herbariumb2b"})}else{errorMessageLogin(".form-login-lojista","Seu cadastro ainda nÃ£o foi aprovado.")}}else{errorMessageLogin(".form-login-lojista","E-mail ou Senha estÃ£o incorretos.")}}