(function(f){"function"===typeof define&&define.amd?define(["jquery"],f):f(window.jQuery||window.Zepto)})(function(f){var A=function(b,g,d){var h=this,y,z;b=f(b);g="function"===typeof g?g(b.val(),void 0,b,d):g;h.init=function(){d=d||{};h.byPassKeys=[9,16,17,18,36,37,38,39,40,91];h.translation={0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}};h.translation=f.extend({},h.translation,d.translation);h=f.extend(!0,{},h,d);z=
c.getRegexMask();b.each(function(){!1!==d.maxlength&&b.attr("maxlength",g.length);d.placeholder&&b.attr("placeholder",d.placeholder);b.attr("autocomplete","off");c.destroyEvents();c.events();var a=c.getCaret();c.val(c.getMasked());c.setCaret(a+c.getMaskCharactersBeforeCount(a,!0))})};var c={getCaret:function(){var a=0;var e=b.get(0),c=document.selection;e=e.selectionStart;if(c&&!~navigator.appVersion.indexOf("MSIE 10"))a=c.createRange(),a.moveStart("character",b.is("input")?-b.val().length:-b.text().length),
a=a.text.length;else if(e||"0"===e)a=e;return a},setCaret:function(a){if(b.is(":focus")){var e=b.get(0);e.setSelectionRange?e.setSelectionRange(a,a):e.createTextRange&&(e=e.createTextRange(),e.collapse(!0),e.moveEnd("character",a),e.moveStart("character",a),e.select())}},events:function(){b.on("keydown.mask",function(){y=c.val()});b.on("keyup.mask",c.behaviour);b.on("paste.mask drop.mask",function(){setTimeout(function(){b.keydown().keyup()},100)});b.on("change.mask",function(){b.data("changeCalled",
!0)});b.on("blur.mask",function(a){a=f(a.target);a.prop("defaultValue")!==a.val()&&(a.prop("defaultValue",a.val()),a.data("changeCalled")||a.trigger("change"));a.data("changeCalled",!1)});b.on("focusout.mask",function(){d.clearIfNotMatch&&!z.test(c.val())&&c.val("")})},getRegexMask:function(){var a=[],e,b,c,d,f;for(f in g)(e=h.translation[g[f]])?(b=e.pattern.toString().replace(/.{1}$|^.{1}/g,""),c=e.optional,(e=e.recursive)?(a.push(g[f]),d={digit:g[f],pattern:b}):a.push(c||e?b+"?":b)):a.push("\\"+
g[f]);a=a.join("");d&&(a=a.replace(RegExp("("+d.digit+"(.*"+d.digit+")?)"),"($1)?").replace(RegExp(d.digit,"g"),d.pattern));return RegExp(a)},destroyEvents:function(){b.off("keydown.mask keyup.mask paste.mask drop.mask change.mask blur.mask focusout.mask").removeData("changeCalled")},val:function(a){var e=b.is("input");return 0<arguments.length?e?b.val(a):b.text(a):e?b.val():b.text()},getMaskCharactersBeforeCount:function(a,e){for(var b=0,c=0,d=g.length;c<d&&c<a;c++)h.translation[g.charAt(c)]||(a=
e?a+1:a,b++);return b},determineCaretPos:function(a,b,d,f){return h.translation[g.charAt(Math.min(a-1,g.length-1))]?Math.min(a+d-b-f,d):c.determineCaretPos(a+1,b,d,f)},behaviour:function(a){a=a||window.event;var b=a.keyCode||a.which;if(-1===f.inArray(b,h.byPassKeys)){var d=c.getCaret(),g=c.val(),n=g.length,m=d<n,p=c.getMasked(),k=p.length,q=c.getMaskCharactersBeforeCount(k-1)-c.getMaskCharactersBeforeCount(n-1);p!==g&&c.val(p);!m||65===b&&a.ctrlKey||(8!==b&&46!==b&&(d=c.determineCaretPos(d,n,k,q)),
c.setCaret(d));return c.callbacks(a)}},getMasked:function(a){var b=[],f=c.val(),l=0,n=g.length,m=0,p=f.length,k=1,q="push",t=-1,r,v;for(d.reverse?(q="unshift",k=-1,r=0,l=n-1,m=p-1,v=function(){return-1<l&&-1<m}):(r=n-1,v=function(){return l<n&&m<p});v();){var w=g.charAt(l),x=f.charAt(m),u=h.translation[w];if(u)x.match(u.pattern)?(b[q](x),u.recursive&&(-1===t?t=l:l===r&&(l=t-k),r===t&&(l-=k)),l+=k):u.optional&&(l+=k,m-=k),m+=k;else{if(!a)b[q](w);x===w&&(m+=k);l+=k}}a=g.charAt(r);n!==p+1||h.translation[a]||
b.push(a);return b.join("")},callbacks:function(a){var e=c.val(),f=c.val()!==y;if(!0===f&&"function"===typeof d.onChange)d.onChange(e,a,b,d);if(!0===f&&"function"===typeof d.onKeyPress)d.onKeyPress(e,a,b,d);if("function"===typeof d.onComplete&&e.length===g.length)d.onComplete(e,a,b,d)}};h.remove=function(){var a=c.getCaret(),b=c.getMaskCharactersBeforeCount(a);c.destroyEvents();c.val(h.getCleanVal()).removeAttr("maxlength");c.setCaret(a-b)};h.getCleanVal=function(){return c.getMasked(!0)};h.init()};
f.fn.mask=function(b,g){this.unmask();return this.each(function(){f(this).data("mask",new A(this,b,g))})};f.fn.unmask=function(){return this.each(function(){try{f(this).data("mask").remove()}catch(b){}})};f.fn.cleanVal=function(){return f(this).data("mask").getCleanVal()};f("*[data-mask]").each(function(){var b=f(this),g={};"true"===b.attr("data-mask-reverse")&&(g.reverse=!0);"false"===b.attr("data-mask-maxlength")&&(g.maxlength=!1);"true"===b.attr("data-mask-clearifnotmatch")&&(g.clearIfNotMatch=
!0);b.mask(b.attr("data-mask"),g)})});