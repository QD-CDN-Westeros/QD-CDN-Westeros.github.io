{"version":3,"sources":["webpack:///./src/js/general/repositories/b8one.masterdataRepository.js","webpack:///./src/js/general/services/b8one.transporterService.js","webpack:///./src/js/store/desktop/transporter/index.js","webpack:///./src/js/general/components/b8one.accordionComponent.js","webpack:///./src/js/general/components/b8one.modalComponent.js","webpack:///./src/js/general/common/b8one.ensure.js","webpack:///./src/js/general/components/b8one.customSelect.js","webpack:///./src/js/general/common/b8one.helper.js","webpack:///./src/js/general/common/b8one.logger.js","webpack:///./src/js/general/services/b8one.cartService.js","webpack:///./src/js/general/services/b8one.httpClient.js"],"names":["MasterdataRepository","entityCode","this","entityCode_","httpClient_","HttpClient","_VTEX_MASTERDATA_ENDPOINT","entityPayload","apiEndpoint","put","then","res","error","patch","params","get","documentId","fields","delete","field","fileName","getAttachmentUrl","TransporterService","httpClient","endpoint","console","hubID","query","TransporterPage","modalCompare","addressCep","transporterSelected","transporters","logisticsInfo","filters","Set","compareTransportersList","masterdataRepository","cartService","CartService","helper","Helper","orderBy","totalizers","orderForm","transporterService","window","init","initModalCompare","initFilterAccordions","createCustomSelect","getCurrent","setAddressCep","setHubID","fetchTransporters","Promise","all","getDeliveryTypes","setLogoUrlInTransportes","orderTransportersByLessPrice","addTransportersToDOM","setHandledFiltersChange","setHandledsToTransporterElement","handledCompareButtonFooterClick","setHandledScheduleChangeButtonsClick","setHandledButtonSaveClick","ModalComponent","modal","modalShowCLass","document","querySelector","addEventListener","e","close","querySelectorAll","forEach","accordion","accordionHeader","AccordionComponent","openAccordionCallback","classList","add","closeAccordionCallback","remove","isOpen","filterItem","event","handledFilterChange","transporter","transporterID","getAttribute","compareButton","handledTransporterCompareButtonClick","priceElement","prevPriceElementActive","checked","transporterDeliveryType","dataset","setAttribute","scheduleChangeButton","handledScheduleChangeButtonClick","handledButtonSaveClick","target","filterName","filter","transporterElement","id","filtersArray","map","includes","toggle","contains","updateTransporterFooter","columns","createCompareTableColumn","join","compareTable","innerHTML","children","outerHTML","createTransportersCustomSelects","show","getParents","transporterDeliveryTypeSelected","setTransporterSelected","saveData","location","assign","priceActive","dispatchEvent","initSaveCustomDataEvent","endSaveCustomDataEvent","transporterSelect","selectElement","selectCustom","customSelectList","customSelectSelected","CustomSelect","customSelectListItemClassName","customSelectListItemClassNameActive","selectOpenCallback","selectListHeight","offsetHeight","style","maxHeight","selectCloseCallback","selectChangeCallback","value","filterSelect","orderTransportersBy","compareTransporterList","sort","a","b","deliveryTypes","price","index","prevTransporterElement","nextTransporterElement","insertBefore","nome","logoURL","armazenagem","certificacao","tempoMercado","equipeFeminina","deliveryShared","type","deliveryExclusive","priceFormatted","item","transporterData","features","descricao","length","prices","createTransporterPriceElement","split","feature","getTransportersByHUB","Error","bugsnagClient","notify","filename","compareFooter","compareFooterParagraph","compareFooterButton","size","transporterId","findIndex","deliveryTypeSelected","slaName","selectedSla","updateSelectedSLA","updateCheckoutTransporterSLA","setSingleCustomDataField","JSON","stringify","log","logo","fetchTransporterLogoURL","transporterVariations","slas","name","key","toLowerCase","replace","customData","customApps","customApp","to_address_zipcode","orderInfoApp","find","simulateOrderForm","shippingData","setTotalizers","getLogisticsInfo","insuranceSKU","items","parseInt","getTransporterVariations","totalItemsWithDiscounts","total","reduce","totalizer","courier","courierId","deliveryIds","courierIds","transporterIndex","courierType","courierTypeLowerCase","manualPrice","formatPrice","currentTransporter","removeTransportersWithoutDeliveryType","orderDeliveryTypesByLessPrice","hasOwnProperty","createTransporterElement","openCallback","Function","closeCallback","Element","setHandleClick","openModalCallback","closeModalCallback","Ensure","undefined","input","isUndefined","checkValidity","object","props","getMissingProps","missingProps","prop","push","setCurrentSelectedItem","createSelectList","setListenerForCurrentSelected","options","selectedIndex","textContent","newValue","prevListItemActive","changeOption","option","listItem","createElement","trim","handleSelectChange","append","open","body","className","eventChange","Event","bubbles","_logger","Logger","language","navigator","userLanguage","currency","currencyLocale","minimumFractionDigits","elem","selector","prototype","matches","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","s","ownerDocument","i","parents","parentNode","form","serialized","elements","disabled","n","selected","encodeURIComponent","data","Math","random","toString","substr","cname","cvalue","exdays","date","Date","setTime","getTime","expires","toUTCString","cookie","decodeURIComponent","element","heightViewport","innerHeight","documentElement","clientHeight","widthViewport","innerWidth","clientWidth","getBoundingClientRect","top","right","bottom","left","str","mapAccents","o","u","c","pattern","RegExp","toFixed","max","Intl","NumberFormat","format","logName","message","errorObj","info","warn","_VTEX_API_ENDPOINT","_httpClient","skuId","productQuantity","sellerId","current","indexFound","x","quantity","endpointUrl","orderFormId","payload","orderItems","seller","skus","vtexjs","checkout","getOrderForm","skusCustomProducts","getCustomProducts","sku","isCustom","skuToIgnore","indexToRemove","indexList","removeMoreProducts","response","productsToAdd","productId","productsToUpdate","sameSku","diffQuantity","productsToReplaceSKU","itemsList","oldSKU","newSKU","productsToRemove","updateItems","replaceSKU","removeItems","addToCart","customProducts","newQuantity","customProductItem","currentCustomProduct","customProductQuantity","Object","values","itemIndex","expectedOrderFormSections","noSplitItem","itemsIndex","updateProducts","postalCode","country","calculateShipping","simulateShipping","orderFormSimulated","sendAttachment","address","availableAddresses","selectedAddresses","appName","appFieldName","appFieldValue","_execute","httpVerb","header","method","headers","accept","fetch","validateResponse","parseResponseToJson","catch","ok","json","resolve","reject","statusText"],"mappings":"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","file":"js/b8one.desktop.transporter.js","sourcesContent":["import HttpClient from '../services/b8one.httpClient';\r\n\r\n/**\r\n * Masterdata Base Repository\r\n */\r\nclass MasterdataRepository {\r\n  /**\r\n   * Masterdata Repository constructor\r\n   * @param {*} entityCode\r\n   */\r\n  constructor(entityCode) {\r\n    const STORE_ID = 'TR';\r\n\r\n    this.entityCode_ = entityCode;\r\n    this.httpClient_ = new HttpClient();\r\n\r\n    // this._VTEX_MASTERDATA_ENDPOINT = `//api.vtexcrm.com.br/${STORE_ID}/dataentities/${entityCode}`;\r\n    this._VTEX_MASTERDATA_ENDPOINT = `/api/dataentities/${entityCode}`;\r\n  }\r\n\r\n  /**\r\n   * add\r\n   * @param {*} entityPayload\r\n   * @return {*}\r\n   */\r\n  add(entityPayload) {\r\n    const apiEndpoint = `${this._VTEX_MASTERDATA_ENDPOINT}/documents`;\r\n\r\n    return this.httpClient_.put(apiEndpoint, entityPayload).then(\r\n      res => {\r\n        return res;\r\n      },\r\n      error => {\r\n        return error;\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * update..\r\n   * @param {*} entityPayload\r\n   * @return {*}\r\n   */\r\n  update(entityPayload) {\r\n    const apiEndpoint = `${this._VTEX_MASTERDATA_ENDPOINT}/documents`;\r\n\r\n    return this.httpClient_.patch(apiEndpoint, entityPayload).then(\r\n      res => {\r\n        return res;\r\n      },\r\n      error => error\r\n    );\r\n  }\r\n\r\n  /**\r\n   * search\r\n   * @param {*} params\r\n   * @return {*}\r\n   */\r\n  search(params) {\r\n    const apiEndpoint = `${this._VTEX_MASTERDATA_ENDPOINT}/search?${params}`;\r\n\r\n    return this.httpClient_.get(apiEndpoint).then(res => {\r\n      return res;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get Document by document ID\r\n   * @param {GUID} documentId Document Id\r\n   */\r\n  async getByDocumentId(documentId) {\r\n    const apiEndpoint = `${this._VTEX_MASTERDATA_ENDPOINT}/documents/${documentId}`;\r\n\r\n    const res = await this.httpClient_.get(apiEndpoint);\r\n    return res;\r\n  }\r\n\r\n  async getByDocumentIdWithFields(documentId, fields) {\r\n    const apiEndpoint = `${this._VTEX_MASTERDATA_ENDPOINT}/documents/${documentId}?_fields=${fields}`;\r\n\r\n    const res = await this.httpClient_.get(apiEndpoint);\r\n    return res;\r\n  }\r\n  /**\r\n   * delete\r\n   * @param {*} documentId\r\n   * @return {*}\r\n   */\r\n  delete(documentId) {\r\n    const apiEndpoint = `${this._VTEX_MASTERDATA_ENDPOINT}/documents/${documentId}`;\r\n\r\n    return this.httpClient_.delete(apiEndpoint).then(res => {\r\n      return res;\r\n    });\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {*} documentId\r\n   * @param {*} field\r\n   * @param {*} fileName\r\n   */\r\n  getAttachmentUrl(documentId = '', field = '', fileName = '') {\r\n    return `${this._VTEX_MASTERDATA_ENDPOINT}/documents/${documentId}/${field}/attachments/${fileName}`;\r\n  }\r\n\r\n  /**\r\n   * Get attachments\r\n   * @param {*} documentId\r\n   * @param {*} field\r\n   * @param {*} fileName\r\n   */\r\n  async getAttachment(documentId = '', field = '', fileName = '') {\r\n    // /api/dataentities/{{data_entity_name}}/documents/{{id}}/{{field}}/attachments/{{file_name}}\r\n    const apiEndpoint = this.getAttachmentUrl(documentId, field, fileName);\r\n\r\n    const res = await this.httpClient_.get(apiEndpoint);\r\n    return res;\r\n  }\r\n}\r\n\r\nexport default MasterdataRepository;\r\n","import HttpClient from './b8one.httpClient';\r\n\r\nexport default class TransporterService {\r\n  constructor() {\r\n    this.httpClient = new HttpClient();\r\n  }\r\n\r\n  /**\r\n   * This function return all active hubs from HUB Entity.\r\n   * @param  {Array|String} fields=['id', 'initialZipcode', 'finalZipcode']\r\n   */\r\n  async getALLHUBS(fields = ['id', 'initialZipcode', 'finalZipcode']) {\r\n    try {\r\n      const endpoint = `/api/dataentities/HB/search?_fields=${fields}&_where=active=true`;\r\n\r\n      return this.httpClient.get(endpoint);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * This functions get and filter the transporters by hubID property.\r\n   * @param  {String} hubID The documentID of a document from HUB Entity.\r\n   * @param  {Array|String} fields Document fields what you need\r\n   */\r\n  async getTransportersByHUB(hubID, fields) {\r\n    try {\r\n      const query = `(status=true AND idHUB=${hubID})`;\r\n\r\n      const endpoint = `/api/dataentities/TR/search?_fields=${fields}&_where=${query}`;\r\n\r\n      return this.httpClient.get(endpoint);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n}\r\n","// Commons\r\nimport { Helper } from 'Commons';\r\n\r\n// Components\r\nimport ModalComponent from 'Components/b8one.modalComponent.js';\r\nimport CustomSelect from 'Components/b8one.customSelect.js';\r\nimport AccordionComponent from 'Components/b8one.accordionComponent.js';\r\n\r\n// Repositories\r\nimport MasterdataRepository from 'Repositories/b8one.masterdataRepository.js';\r\n\r\n// Services\r\nimport CartService from 'Services/b8one.cartService.js';\r\nimport TransporterService from 'Services/b8one.transporterService.js';\r\n\r\n/*\r\n  Class TransporterPage\r\n*/\r\nclass TransporterPage {\r\n  constructor() {\r\n    this.modalCompare = null;\r\n    this.addressCep = null;\r\n    this.transporterSelected = null;\r\n    this.transporters = [];\r\n    this.logisticsInfo = [];\r\n    this.filters = new Set();\r\n    this.compareTransportersList = new Set();\r\n    this.masterdataRepository = new MasterdataRepository('TR');\r\n    this.cartService = new CartService();\r\n    this.helper = new Helper();\r\n    this.orderBy = 'less-price';\r\n    this.totalizers = [];\r\n    this.orderForm = {};\r\n    this.hubID = null;\r\n    this.transporterService = new TransporterService();\r\n\r\n    // window.cartService = this.cartService;\r\n    window.TransporterPage = this;\r\n\r\n    this.init();\r\n  }\r\n\r\n  // Init Functions\r\n  async init() {\r\n    this.initModalCompare();\r\n    this.initFilterAccordions();\r\n    this.createCustomSelect();\r\n\r\n    this.orderForm = await this.cartService.getCurrent();\r\n\r\n    await this.setAddressCep();\r\n\r\n    this.setHubID();\r\n\r\n    this.transporters = await this.fetchTransporters();\r\n\r\n    await Promise.all([\r\n      this.getDeliveryTypes(),\r\n      this.setLogoUrlInTransportes(),\r\n    ]);\r\n\r\n    this.orderTransportersByLessPrice();\r\n\r\n    this.addTransportersToDOM();\r\n\r\n    this.setHandledFiltersChange();\r\n    this.setHandledsToTransporterElement();\r\n    this.handledCompareButtonFooterClick();\r\n    this.setHandledScheduleChangeButtonsClick();\r\n    this.setHandledButtonSaveClick();\r\n  }\r\n\r\n  initModalCompare() {\r\n    this.modalCompare = new ModalComponent({\r\n      modal: '.modal-compare',\r\n      modalShowCLass: 'wrapper-modal--show',\r\n    });\r\n\r\n    const modalCompareButtonClose = document.querySelector('.modal__close');\r\n\r\n    modalCompareButtonClose.addEventListener('click', e => {\r\n      this.modalCompare.close();\r\n    });\r\n  }\r\n\r\n  initFilterAccordions() {\r\n    const accordions = [...document.querySelectorAll('.js-accordion-filter')];\r\n\r\n    accordions.forEach(accordion => {\r\n      const accordionHeader = accordion.querySelector('.filter__header');\r\n\r\n      const accordionInstance = new AccordionComponent({\r\n        accordion,\r\n        accordionHeader,\r\n        openAccordionCallback: () => {\r\n          accordion.classList.add('filter--show');\r\n        },\r\n        closeAccordionCallback: ({ accordion }) => {\r\n          accordion.classList.remove('filter--show');\r\n        },\r\n      });\r\n\r\n      accordionInstance.isOpen = true;\r\n    });\r\n  }\r\n\r\n  // Set Handled Functions\r\n  setHandledFiltersChange() {\r\n    const filterItems = [...document.querySelectorAll('.filter__item')];\r\n\r\n    filterItems.forEach(filterItem =>\r\n      filterItem.addEventListener('change', event =>\r\n        this.handledFilterChange(event, filterItem)\r\n      )\r\n    );\r\n  }\r\n\r\n  setHandledsToTransporterElement() {\r\n    const transporters = [\r\n      ...document.querySelectorAll('.compare-transporter__list .transporter'),\r\n    ];\r\n\r\n    transporters.forEach(transporter => {\r\n      const transporterID = transporter.getAttribute('id');\r\n      const compareButton = transporter.querySelector(\r\n        '.transporter__compare-button'\r\n      );\r\n\r\n      compareButton.addEventListener('click', event => {\r\n        this.handledTransporterCompareButtonClick(compareButton, transporterID);\r\n      });\r\n\r\n      const priceElements = [...transporter.querySelectorAll('.price')];\r\n\r\n      priceElements.forEach(priceElement => {\r\n        priceElement.addEventListener('change', event => {\r\n          const prevPriceElementActive = document.querySelector(\r\n            '.price--active'\r\n          );\r\n\r\n          if (prevPriceElementActive) {\r\n            prevPriceElementActive.classList.remove('price--active');\r\n\r\n            const prevPriceElementActiveCheckbox = prevPriceElementActive.querySelector(\r\n              'input[type=\"checkbox\"]'\r\n            );\r\n\r\n            prevPriceElementActiveCheckbox.checked = false;\r\n          }\r\n\r\n          priceElement.classList.add('price--active');\r\n\r\n          const priceElementCheckbox = priceElement.querySelector(\r\n            'input[type=\"checkbox\"]'\r\n          );\r\n\r\n          priceElementCheckbox.checked = true;\r\n\r\n          const { transporterDeliveryType } = priceElement.dataset;\r\n\r\n          transporter.setAttribute(\r\n            'data-transporter-delivery-type-selected',\r\n            transporterDeliveryType\r\n          );\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  setHandledScheduleChangeButtonsClick() {\r\n    const scheduleChangeButtons = [\r\n      ...document.querySelectorAll('.js-button-schedule-change'),\r\n    ];\r\n\r\n    scheduleChangeButtons.forEach(scheduleChangeButton => {\r\n      scheduleChangeButton.addEventListener('click', event =>\r\n        this.handledScheduleChangeButtonClick(scheduleChangeButton)\r\n      );\r\n    });\r\n  }\r\n\r\n  setHandledButtonSaveClick() {\r\n    const buttonSave = document.querySelector('.js-button-save');\r\n\r\n    buttonSave.addEventListener('click', () => this.handledButtonSaveClick());\r\n  }\r\n\r\n  // Handled Functions\r\n  handledFilterChange({ target }, filterItem) {\r\n    const { filter: filterName } = filterItem.dataset;\r\n\r\n    if (target.checked) {\r\n      this.filters.add(filterName);\r\n    } else {\r\n      this.filters.delete(filterName);\r\n    }\r\n\r\n    this.transporters.forEach(transporter => {\r\n      const transporterElement = document.querySelector(\r\n        `[id=\"${transporter.id}\"]`\r\n      );\r\n\r\n      const filtersArray = [...this.filters].map(\r\n        filter => !!transporter[filter]\r\n      );\r\n\r\n      if (transporterElement) {\r\n        filtersArray.includes(false)\r\n          ? transporterElement.classList.add('hide')\r\n          : transporterElement.classList.remove('hide');\r\n      }\r\n    });\r\n  }\r\n\r\n  handledTransporterCompareButtonClick(compareButton, transporterID) {\r\n    compareButton.classList.toggle('transporter__compare-button--active');\r\n\r\n    const toCompare = compareButton.classList.contains(\r\n      'transporter__compare-button--active'\r\n    );\r\n\r\n    if (toCompare) {\r\n      this.compareTransportersList.add(transporterID);\r\n    } else {\r\n      this.compareTransportersList.delete(transporterID);\r\n    }\r\n\r\n    this.updateTransporterFooter();\r\n  }\r\n\r\n  handledCompareButtonFooterClick() {\r\n    const compareButton = document.querySelector(\r\n      '.compare-transporter__footer .button'\r\n    );\r\n\r\n    compareButton.addEventListener('click', event => {\r\n      const columns = [...this.compareTransportersList]\r\n        .map(transporterID => {\r\n          return this.createCompareTableColumn(transporterID);\r\n        })\r\n        .join('');\r\n\r\n      const compareTable = document.querySelector(\r\n        '.modal-compare .compare__table'\r\n      );\r\n\r\n      compareTable.innerHTML = compareTable.children[0].outerHTML;\r\n\r\n      compareTable.innerHTML += columns;\r\n\r\n      this.setHandledScheduleChangeButtonsClick();\r\n      this.createTransportersCustomSelects();\r\n\r\n      this.modalCompare.show();\r\n    });\r\n  }\r\n\r\n  async handledScheduleChangeButtonClick(scheduleChangeButton) {\r\n    const transporterElement = Helper.getParents(\r\n      scheduleChangeButton,\r\n      '.transporter'\r\n    )[0];\r\n\r\n    if (!transporterElement.dataset.transporterDeliveryTypeSelected) return;\r\n\r\n    this.setTransporterSelected(transporterElement);\r\n\r\n    await this.saveData();\r\n\r\n    if (this.transporterSelected) {\r\n      window.location.assign('/endereco');\r\n    }\r\n  }\r\n\r\n  async handledButtonSaveClick() {\r\n    const priceActive = document.querySelector('.price--active');\r\n\r\n    if (priceActive) {\r\n      const transporterElement = Helper.getParents(\r\n        priceActive,\r\n        '.transporter'\r\n      )[0];\r\n\r\n      this.setTransporterSelected(transporterElement);\r\n\r\n      document.dispatchEvent(window.initSaveCustomDataEvent);\r\n\r\n      await this.saveData();\r\n\r\n      document.dispatchEvent(window.endSaveCustomDataEvent);\r\n    }\r\n  }\r\n\r\n  // Create Functions\r\n  createTransportersCustomSelects() {\r\n    const transportersSelects = [\r\n      ...document.querySelectorAll('.transporter__select-custom'),\r\n    ];\r\n\r\n    transportersSelects.forEach(transporterSelect => {\r\n      const selectElement = transporterSelect.querySelector('.select__native');\r\n      const selectCustom = transporterSelect.querySelector('.select__custom');\r\n      const customSelectList = transporterSelect.querySelector('.select__list');\r\n      const customSelectSelected = transporterSelect.querySelector(\r\n        '.select__custom-selected'\r\n      );\r\n\r\n      const transporterElement = Helper.getParents(\r\n        transporterSelect,\r\n        '.transporter'\r\n      )[0];\r\n\r\n      new CustomSelect({\r\n        selectElement,\r\n        customSelectList,\r\n        customSelectSelected,\r\n        customSelectListItemClassName: '',\r\n        customSelectListItemClassNameActive: 'active',\r\n        selectOpenCallback: event => {\r\n          const selectListHeight = customSelectList.offsetHeight;\r\n\r\n          selectCustom.classList.add('select__custom--open');\r\n          selectCustom.style.maxHeight = `${selectListHeight}px`;\r\n        },\r\n        selectCloseCallback: () => {\r\n          selectCustom.classList.remove('select__custom--open');\r\n          selectCustom.style.maxHeight = 0;\r\n        },\r\n        selectChangeCallback: ({ value }) => {\r\n          transporterElement.setAttribute(\r\n            'data-transporter-delivery-type-selected',\r\n            value\r\n          );\r\n        },\r\n      });\r\n    });\r\n  }\r\n\r\n  createCustomSelect() {\r\n    const filterSelect = document.querySelector(\r\n      '.header__actions .filter__select'\r\n    );\r\n\r\n    const customSelect = new CustomSelect({\r\n      selectElement: '.header__actions .filter__select .select__native',\r\n      customSelectList: '.header__actions .select__list',\r\n      customSelectSelected: '.header__actions .select__custom-selected',\r\n      customSelectListItemClassName: '',\r\n      customSelectListItemClassNameActive: 'active',\r\n      selectOpenCallback: event => {\r\n        filterSelect.classList.add('filter__select--open');\r\n      },\r\n      selectCloseCallback: () => {\r\n        filterSelect.classList.remove('filter__select--open');\r\n      },\r\n      selectChangeCallback: ({ value }) => {\r\n        this.orderTransportersBy(value);\r\n      },\r\n    });\r\n\r\n    // filterSelect.addEventListener('click', event => {\r\n    //   console.log(event.target.tagName);\r\n    //   console.log(customSelect.isOpen);\r\n\r\n    //   if (event.target.tagName !== 'LI') {\r\n    //     customSelect.open(event);\r\n    //   } else if (customSelect.isOpen) {\r\n    //     customSelect.close();\r\n    //   }\r\n    // });\r\n  }\r\n\r\n  orderTransportersBy(orderBy) {\r\n    if (this.orderBy === orderBy) return;\r\n\r\n    if (orderBy === 'less-price') {\r\n      this.transporters.sort((a, b) => {\r\n        return a.deliveryTypes[0].price - b.deliveryTypes[0].price;\r\n      });\r\n    } else if (orderBy === 'higher-price') {\r\n      this.transporters.sort((a, b) => {\r\n        return b.deliveryTypes[0].price - a.deliveryTypes[0].price;\r\n      });\r\n    }\r\n\r\n    this.orderBy = orderBy;\r\n\r\n    const compareTransporterList = document.querySelector(\r\n      '.compare-transporter__list'\r\n    );\r\n\r\n    this.transporters.forEach((transporter, index) => {\r\n      const prevTransporterElement = compareTransporterList.children[index];\r\n\r\n      const nextTransporterElement = compareTransporterList.querySelector(\r\n        `[id=\"${transporter.id}\"]`\r\n      );\r\n\r\n      if (prevTransporterElement.id === nextTransporterElement.id) return;\r\n\r\n      compareTransporterList.insertBefore(\r\n        nextTransporterElement,\r\n        prevTransporterElement\r\n      );\r\n    });\r\n  }\r\n\r\n  createCompareTableColumn(transporterID) {\r\n    const transporter = this.transporters.filter(\r\n      ({ id }) => id === transporterID\r\n    )[0];\r\n\r\n    const {\r\n      id,\r\n      nome,\r\n      logoURL,\r\n      armazenagem,\r\n      tempoMercado,\r\n      certificacao,\r\n      deliveryTypes,\r\n      equipeFeminina,\r\n    } = transporter;\r\n\r\n    const deliveryShared = deliveryTypes.filter(\r\n      ({ type }) => type === 'Compartilhado'\r\n    )[0];\r\n\r\n    const deliveryExclusive = deliveryTypes.filter(\r\n      ({ type }) => type === 'Exclusivo'\r\n    )[0];\r\n\r\n    return `\r\n      <div class=\"table__column\">\r\n        <div \r\n          class=\"transporter\" \r\n          data-transporter-id=\"${id}\" \r\n          data-transporter-delivery-type-selected=\"${\r\n            deliveryShared ? deliveryShared.type : deliveryExclusive.type\r\n          }\"\r\n        >\r\n          <header class=\"transporter__header\">\r\n            <figure class=\"transporter__brand\">\r\n              <img \r\n                class=\"transporter__logo\"\r\n                src=\"${logoURL}\"\r\n              />\r\n            </figure>\r\n\r\n            <h3 class=\"transporter__name\">${nome}</h3>\r\n          </header>\r\n\r\n          <ul class=\"transporter__fields-list\">\r\n            <li class=\"list__item\">\r\n              ${\r\n                deliveryShared\r\n                  ? deliveryShared.priceFormatted\r\n                  : 'Não disponivel'\r\n              }\r\n            </li>\r\n\r\n            <li class=\"list__item\">\r\n              ${\r\n                deliveryExclusive\r\n                  ? deliveryExclusive.priceFormatted\r\n                  : 'Não disponivel'\r\n              }\r\n            </li>\r\n\r\n            <li class=\"list__item\">\r\n              ${certificacao ? 'Sim' : 'Não'}\r\n            </li>\r\n\r\n            <li class=\"list__item\">\r\n              ${equipeFeminina ? 'Sim' : 'Não'}\r\n            </li>\r\n\r\n            <li class=\"list__item\">\r\n              ${armazenagem ? 'Sim' : 'Não'}\r\n            </li>\r\n            \r\n            <li class=\"list__item\">\r\n              <div class=\"transporter__select-custom\">\r\n                <select class=\"select__native\">\r\n                  ${deliveryTypes.map(({ type }) => {\r\n                    return `<option value=\"${type}\">${type}</option>`;\r\n                  })}\r\n                </select>\r\n                \r\n                <span class=\"select__custom-selected\"></span>\r\n                \r\n                <div class=\"select__custom\">\r\n                  <ul class=\"select__list\">\r\n                  </ul>\r\n                </div>\r\n                \r\n                <i class=\"fas fa-caret-down select__icon\"></i>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n          \r\n          <button class=\"button button--primary js-button-schedule-change\">Agendar</button>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  createTransporterPriceElement(item) {\r\n    return `\r\n      <div class=\"price\" data-transporter-delivery-type=\"${item.type}\">\r\n        <div class=\"price__row\">\r\n          <div class=\"price__container price__container--flex\">\r\n            <label for=\"${item.id}\">\r\n              <div class=\"checkbox\">\r\n                <input \r\n                  type=\"checkbox\" \r\n                  id=\"${item.id}\"\r\n                />\r\n                  \r\n                <i class=\"fa fa-check checkbox__icon\"></i>\r\n              </div>\r\n\r\n              <p class=\"checkbox__label\">${item.type}</p>\r\n            </label>\r\n\r\n            <button \r\n              class=\"tooltip without-padding\" \r\n              data-balloon-pos=\"left\"\r\n              data-balloon-length=\"large\"\r\n              aria-label=\"${\r\n                item.type === 'Exclusivo'\r\n                  ? 'Nas mudanças exclusivas, o caminhão da mudança vai direto para sua nova residência. Apenas seus bens vão no caminhão de mudança. Prazo de entrega: A entrega ocorrerá imediatamente após a embalagem dos seus itens. Por favor, considere os dias de viagens necessários para que o caminhão da mudança chegue até o destino. Antes da embalagem nossos consultores entrarão em contato para agendar a melhor data para sua conveniência'\r\n                  : 'Nas mudanças compartilhadas os seus bens podem ir no caminhão de mudança junto com outros de outras pessoas. Mas o fato de compartilhar o caminhão não representa qualquer risco para seus bens e sem qualquer perda de qualidade. Prazo de entrega: Em até 45 dias da data da embalagem. Nossos consultores entrarão em contato para agendar a melhor data para sua conveniência'\r\n              }\">\r\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0 8C0 3.58172 3.58172 0 8 0C10.1217 0 12.1566 0.842855 13.6569 2.34315C15.1571 3.84344 16 5.87827 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8ZM1.6 8C1.6 4.46538 4.46538 1.6 8 1.6C9.69739 1.6 11.3253 2.27428 12.5255 3.47452C13.7257 4.67475 14.4 6.30261 14.4 8C14.4 11.5346 11.5346 14.4 8 14.4C4.46538 14.4 1.6 11.5346 1.6 8Z\" fill=\"#FF8B30\"></path>\r\n                <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M10.2907 7.53114C10.5738 7.28895 10.7798 6.97699 10.8854 6.63034C11.0329 6.11191 10.9471 5.55896 10.6482 5.10234C10.4031 4.73488 10.0414 4.44987 9.61467 4.28794C9.11078 4.09022 8.5693 3.9922 8.02371 3.99994C7.65121 4.00747 7.28303 4.0768 6.93596 4.20474C6.41622 4.38232 5.96755 4.70764 5.65166 5.13594C5.46403 5.38958 5.36133 5.69056 5.35685 5.99994C5.3473 6.17964 5.42014 6.35453 5.55678 6.47994C5.6583 6.56944 5.78567 6.62846 5.92275 6.64954C6.23437 6.73113 6.56596 6.61184 6.74111 6.35514C6.81762 6.2391 6.88223 6.11632 6.94689 5.99346C6.97673 5.93675 7.00658 5.88002 7.03761 5.82394C7.15101 5.57642 7.36828 5.38457 7.6374 5.29434C7.88275 5.22353 8.14259 5.20981 8.39476 5.25434C8.55994 5.27946 8.71693 5.33964 8.85392 5.43034C9.23345 5.68314 9.30291 6.25434 9.08096 6.60314C8.91857 6.83449 8.71373 7.03659 8.47609 7.19994C8.15735 7.41611 7.85915 7.65809 7.58488 7.92314C7.34888 8.15468 7.21292 8.46108 7.20366 8.78234C7.18548 9.04698 7.32284 9.29964 7.56116 9.43994C7.7043 9.52066 7.87169 9.55441 8.03726 9.53594C8.29383 9.53636 8.52418 9.38752 8.61672 9.16154C8.66077 9.0634 8.70595 8.961 8.75226 8.85434C8.80661 8.71112 8.89875 8.58336 9.01996 8.48314L9.02 8.48311C9.20128 8.34872 9.38256 8.21433 9.56723 8.08634C9.82276 7.91863 10.0646 7.73304 10.2907 7.53114ZM7.01389 11.1343C7.01389 11.6124 7.42428 11.9999 7.93052 11.9999C8.17362 11.9999 8.40677 11.9087 8.57867 11.7464C8.75057 11.5841 8.84714 11.3639 8.84714 11.1343C8.84714 10.6563 8.43676 10.2687 7.93052 10.2687C7.42428 10.2687 7.01389 10.6563 7.01389 11.1343Z\" fill=\"#FF8B30\"></path>\r\n              </svg>\r\n            </button>\r\n          </div>\r\n\r\n          <div class=\"price__container price__container--right\">\r\n            <span class=\"price__total\">${item.priceFormatted}</span>\r\n            <p class=\"price__parcels\">em até 6x sem juros</p>\r\n          </div>\r\n        </div>\r\n        \r\n        ${\r\n          item.type === 'Compartilhado'\r\n            ? `\r\n          <p class=\"price__paragraph price__paragraph--text-orange\">\r\n            * Prazo de entrega: em até 45 dias da data da embalagem.\r\n          </p>\r\n        `\r\n            : ''\r\n        }\r\n      </div> \r\n    `;\r\n  }\r\n\r\n  createTransporterElement(transporterData) {\r\n    const {\r\n      id,\r\n      nome,\r\n      logoURL,\r\n      features,\r\n      descricao,\r\n      deliveryTypes,\r\n    } = transporterData;\r\n\r\n    if (!deliveryTypes) {\r\n      return '';\r\n    }\r\n\r\n    const showSeeMoreButton = descricao.length > 130;\r\n\r\n    const prices = deliveryTypes\r\n      .map(item => {\r\n        return this.createTransporterPriceElement(item);\r\n      })\r\n      .join('');\r\n\r\n    return `\r\n      <li \r\n        class=\"transporter\" \r\n        id=\"${id}\"\r\n        data-transporter-id=\"${id}\"\r\n      >\r\n        <figure class=\"transporter__brand\">\r\n          <img \r\n            class=\"transporter__logo\" \r\n            src=\"${logoURL}\"\r\n          />\r\n        </figure>\r\n\r\n        <div class=\"transporter__details\">\r\n          <div class=\"transporter__row\" style=\"margin-bottom: 16px;\">\r\n            <h3 class=\"transporter__name\">${nome}</h3>\r\n\r\n            <div class=\"transporter__review\">\r\n              <i class=\"fas fa-star review__star review__star--active\"></i>\r\n              <i class=\"fas fa-star review__star review__star--active\"></i>\r\n              <i class=\"fas fa-star review__star review__star--active\"></i>\r\n              <i class=\"fas fa-star review__star review__star--active\"></i>\r\n              <i class=\"fas fa-star review__star review__star--active\"></i>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"transporter__description\">\r\n            <p class=\"description__paragraph\">\r\n              ${descricao}\r\n            </p>\r\n\r\n            ${\r\n              false\r\n                ? '<button class=\"description__see-more\">Ver tudo</button>'\r\n                : ''\r\n            }\r\n          </div>\r\n\r\n          <div class=\"transporter__row\">\r\n            <ul class=\"transporter__benefits\">\r\n              ${features\r\n                .split(';')\r\n                .map(\r\n                  feature => `\r\n                    <li class=\"benefit\">\r\n                      <i class=\"far fa-check-circle benefit__icon\"></i>\r\n      \r\n                      <p class=\"benefit__text\">\r\n                        ${feature}\r\n                      </p>\r\n                    </li>\r\n                  `\r\n                )\r\n                .join('')}\r\n            </ul>\r\n\r\n            <button class=\"transporter__compare-button\">\r\n              <i class=\"fas fa-dot-circle button__icon\"></i>\r\n              Comparar\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"transporter__prices\">\r\n          ${prices}\r\n\r\n          <button class=\"button button--primary js-button-schedule-change\">\r\n            AGENDAR MUDANÇA\r\n          </button>\r\n        </div>\r\n      </li>\r\n    `;\r\n  }\r\n\r\n  // Fetch Functions\r\n  async fetchTransporters() {\r\n    const fields =\r\n      'armazenagem,certificacao,courierIds,descricao,equipeFeminina,features,frota,logo,nome,status,tempoMercado,id,tipoEmbalabem';\r\n\r\n    try {\r\n      if (this.hubID) {\r\n        return await this.transporterService.getTransportersByHUB(\r\n          this.hubID,\r\n          fields\r\n        );\r\n      }\r\n\r\n      throw new Error('The hubID is undefined');\r\n    } catch (error) {\r\n      window.bugsnagClient.notify(new Error(error));\r\n    }\r\n  }\r\n\r\n  async fetchTransporterLogoURL(id, filename) {\r\n    return await this.masterdataRepository.getAttachmentUrl(\r\n      id,\r\n      'logo',\r\n      filename\r\n    );\r\n  }\r\n\r\n  // Other Functions\r\n  updateTransporterFooter() {\r\n    const compareFooter = document.querySelector(\r\n      '.compare-transporter__footer'\r\n    );\r\n\r\n    const compareFooterParagraph = compareFooter.querySelector(\r\n      '.footer__paragraph'\r\n    );\r\n\r\n    const compareFooterButton = compareFooter.querySelector('.button');\r\n\r\n    if (this.compareTransportersList.size > 0) {\r\n      compareFooter.classList.add('compare-transporter__footer--show');\r\n    } else {\r\n      compareFooter.classList.remove('compare-transporter__footer--show');\r\n    }\r\n\r\n    if (this.compareTransportersList.size < 2) {\r\n      compareFooterParagraph.innerHTML = `\r\n        Selecione <span class=\"footer__paragraph--orange\">2 ou mais empresas de mudança </span>para comparar\r\n      `;\r\n\r\n      compareFooterButton.classList.add('button--disabled');\r\n    } else {\r\n      compareFooterParagraph.innerHTML = `\r\n        Você selecionou <span class=\"footer__paragraph--orange\">${this.compareTransportersList.size} empresas de mudança</span>\r\n      `;\r\n\r\n      compareFooterButton.classList.remove('button--disabled');\r\n    }\r\n  }\r\n\r\n  setTransporterSelected(transporterElement) {\r\n    const {\r\n      transporterId,\r\n      transporterDeliveryTypeSelected,\r\n    } = transporterElement.dataset;\r\n\r\n    const index = this.transporters.findIndex(({ id }) => id === transporterId);\r\n\r\n    this.transporterSelected = this.transporters[index];\r\n\r\n    this.transporterSelected.deliveryTypeSelected = this.transporterSelected.deliveryTypes.filter(\r\n      ({ type }) => type === transporterDeliveryTypeSelected\r\n    )[0];\r\n  }\r\n\r\n  updateSelectedSLA() {\r\n    const { slaName } = this.transporterSelected.deliveryTypeSelected;\r\n\r\n    this.logisticsInfo = this.logisticsInfo.map(item => ({\r\n      ...item,\r\n      selectedSla: slaName,\r\n    }));\r\n  }\r\n\r\n  async saveData() {\r\n    try {\r\n      this.updateSelectedSLA();\r\n\r\n      await Promise.all([\r\n        this.cartService.updateCheckoutTransporterSLA(this.logisticsInfo),\r\n        this.cartService.setSingleCustomDataField(\r\n          'selectedcourier',\r\n          'courier_data',\r\n          JSON.stringify(this.transporterSelected)\r\n        ),\r\n        this.cartService.setSingleCustomDataField(\r\n          'orderinfo',\r\n          'current_step',\r\n          'transporter'\r\n        ),\r\n      ]);\r\n    } catch (error) {\r\n      console.log('saveData', error);\r\n    }\r\n  }\r\n\r\n  async setLogoUrlInTransportes() {\r\n    this.transporters = await Promise.all(\r\n      this.transporters.map(async transporter => {\r\n        const { id, logo } = transporter;\r\n\r\n        const logoURL = await this.fetchTransporterLogoURL(id, logo);\r\n\r\n        transporter.logoURL = logoURL;\r\n\r\n        return transporter;\r\n      })\r\n    );\r\n  }\r\n\r\n  getTransporterVariations(logisticsInfo) {\r\n    const transporterVariations = {};\r\n\r\n    logisticsInfo.forEach(({ slas }) => {\r\n      slas.forEach(({ id, price, name }) => {\r\n        const key = id.toLowerCase().replace(/\\s/g, '');\r\n\r\n        if (transporterVariations[key]) {\r\n          transporterVariations[key].price += price;\r\n        } else {\r\n          transporterVariations[key] = {\r\n            price,\r\n            name,\r\n          };\r\n        }\r\n      });\r\n    });\r\n\r\n    return transporterVariations;\r\n  }\r\n\r\n  async setAddressCep() {\r\n    const { customData } = await this.cartService.getCurrent();\r\n\r\n    if (!customData) return;\r\n\r\n    customData.customApps\r\n      .filter(customApp => customApp.id === 'orderinfo')\r\n      .forEach(customApp => {\r\n        const { to_address_zipcode } = customApp.fields;\r\n\r\n        this.addressCep = to_address_zipcode;\r\n      });\r\n  }\r\n\r\n  setHubID() {\r\n    const orderInfoApp = this.orderForm.customData?.customApps.find(\r\n      customApp => customApp.id === 'orderinfo'\r\n    );\r\n\r\n    if (!orderInfoApp) return;\r\n\r\n    const { hubID } = orderInfoApp.fields;\r\n\r\n    this.hubID = hubID;\r\n  }\r\n\r\n  setTotalizers(totalizers) {\r\n    this.totalizers = totalizers;\r\n  }\r\n\r\n  async getLogisticsInfo() {\r\n    const {\r\n      shippingData,\r\n      totalizers,\r\n    } = await this.cartService.simulateOrderForm(this.addressCep);\r\n\r\n    this.setTotalizers(totalizers);\r\n\r\n    this.logisticsInfo = shippingData.logisticsInfo;\r\n  }\r\n\r\n  async getDeliveryTypes() {\r\n    await this.getLogisticsInfo();\r\n\r\n    const insuranceSKU = this.orderForm.items.filter(\r\n      ({ id }) => parseInt(id) === 35\r\n    )[0];\r\n\r\n    const transporterVariations = this.getTransporterVariations(\r\n      this.logisticsInfo\r\n    );\r\n\r\n    const totalItemsWithDiscounts = this.totalizers\r\n      .filter(total => total.id !== 'Shipping')\r\n      .reduce((total, totalizer) => total + totalizer.value, 0);\r\n\r\n    this.logisticsInfo[0].slas\r\n      .map(courier => {\r\n        const { courierId } = courier.deliveryIds[0];\r\n\r\n        const index = this.transporters.findIndex(({ courierIds }) => {\r\n          const ids = courierIds.split(';');\r\n\r\n          return ids.includes(courierId);\r\n        });\r\n\r\n        courier.transporterIndex = index;\r\n\r\n        return courier;\r\n      })\r\n      .filter(({ transporterIndex }) => transporterIndex !== -1)\r\n      .forEach(({ id, name, deliveryIds, transporterIndex }) => {\r\n        const key = id.toLowerCase().replace(/\\s/g, '');\r\n        const [courierName, courierType] = id.split(' - ');\r\n        const courierTypeLowerCase = courierType.toLowerCase();\r\n\r\n        const { courierId } = deliveryIds[0];\r\n\r\n        let { price } = transporterVariations[key];\r\n\r\n        price += insuranceSKU\r\n          ? totalItemsWithDiscounts + -insuranceSKU.manualPrice\r\n          : totalItemsWithDiscounts;\r\n\r\n        const priceFormatted = this.helper.formatPrice(price);\r\n\r\n        const currentTransporter = this.transporters[transporterIndex];\r\n\r\n        const courier = [\r\n          {\r\n            price,\r\n            priceFormatted,\r\n            id: courierId,\r\n            type: courierType,\r\n            slaName: name,\r\n          },\r\n        ];\r\n\r\n        if (currentTransporter.deliveryTypes) {\r\n          currentTransporter.deliveryTypes = [\r\n            ...courier,\r\n            ...currentTransporter.deliveryTypes,\r\n          ];\r\n        } else {\r\n          currentTransporter.deliveryTypes = courier;\r\n        }\r\n\r\n        currentTransporter[courierTypeLowerCase] = true;\r\n      });\r\n\r\n    this.removeTransportersWithoutDeliveryType();\r\n    this.orderDeliveryTypesByLessPrice();\r\n  }\r\n\r\n  removeTransportersWithoutDeliveryType() {\r\n    this.transporters = this.transporters.filter(transporter => {\r\n      return transporter.hasOwnProperty('deliveryTypes');\r\n    });\r\n  }\r\n\r\n  orderDeliveryTypesByLessPrice() {\r\n    this.transporters = this.transporters.map(transporter => {\r\n      transporter.deliveryTypes.sort((a, b) => a.price - b.price);\r\n\r\n      return transporter;\r\n    });\r\n  }\r\n\r\n  orderTransportersByLessPrice() {\r\n    this.transporters.sort((a, b) => {\r\n      return a.deliveryTypes[0].price - b.deliveryTypes[0].price;\r\n    });\r\n  }\r\n\r\n  addTransportersToDOM() {\r\n    const compareTransporterList = document.querySelector(\r\n      '.compare-transporter__list'\r\n    );\r\n\r\n    const transporters = this.transporters.map(transporter =>\r\n      this.createTransporterElement(transporter)\r\n    );\r\n\r\n    if (transporters.length > 0) {\r\n      compareTransporterList.classList.remove('empty-list');\r\n      compareTransporterList.innerHTML = transporters.join('');\r\n    } else {\r\n      compareTransporterList.classList.add('empty-list');\r\n      compareTransporterList.innerHTML = `<li class=\"empty-text\">Não encontramos nenhum resultado para os filtros selecionados.</li>`;\r\n    }\r\n  }\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  new TransporterPage();\r\n});\r\n","export default class AccordionComponent {\r\n  constructor({\r\n    accordion,\r\n    accordionHeader,\r\n    openAccordionCallback,\r\n    closeAccordionCallback,\r\n  }) {\r\n    this.isOpen = false;\r\n    this.openCallback = openAccordionCallback || new Function();\r\n    this.closeCallback = closeAccordionCallback || new Function();\r\n\r\n    this.accordion =\r\n      accordion instanceof Element\r\n        ? accordion\r\n        : document.querySelector(accordion);\r\n\r\n    this.accordionHeader =\r\n      accordionHeader instanceof Element\r\n        ? accordionHeader\r\n        : document.querySelector(accordionHeader);\r\n\r\n    this.setHandleClick();\r\n  }\r\n\r\n  setHandleClick() {\r\n    this.accordionHeader.addEventListener('click', () => {\r\n      this.isOpen ? this.closeCallback(this) : this.openCallback(this);\r\n\r\n      this.isOpen = !this.isOpen;\r\n    });\r\n  }\r\n}\r\n","/*\r\n  *\r\n  * Author: Enrique Mora <enriquebeta7@gmail.com>\r\n  *\r\n*/\r\n\r\nexport default class ModalComponent {\r\n\t/**\r\n\t * @param  { Element | String } modal\r\n\t * @param  { String } modalShowCLass\r\n\t * @param  { Function } openModalCallback\r\n\t * @param  { Function } closeModalCallback\r\n   * @requires modal\r\n\t */\r\n\tconstructor({\r\n\t\tmodal,\r\n\t\tmodalShowCLass,\r\n\t\topenModalCallback,\r\n\t\tcloseModalCallback,\r\n\t}) {\r\n\t\tthis.isOpen = false;\r\n\t\tthis.modalShowCLass = modalShowCLass || 'show';\r\n\t\tthis.openCallback = openModalCallback || new Function();\r\n\t\tthis.closeCallback = closeModalCallback || new Function();\r\n\t\tthis.modal =\r\n\t\t\tmodal instanceof Element ? modal : document.querySelector(modal);\r\n\t}\r\n\r\n\tshow() {\r\n\t\t!this.isOpen && this.modal.classList.add(this.modalShowCLass);\r\n\t\tthis.isOpen = true;\r\n\r\n\t\tthis.openCallback(this);\r\n\t}\r\n\r\n\tclose() {\r\n\t\tthis.isOpen && this.modal.classList.remove(this.modalShowCLass);\r\n\t\tthis.isOpen = false;\r\n\r\n\t\tthis.closeCallback(this);\r\n\t}\r\n}\r\n","/**\r\n * Ensure Abstraction class\r\n */\r\nclass Ensure {\r\n  /**\r\n   * Ensure value is Undefined\r\n   * @param {*} value Value to be validated\r\n   * @return {boolean}\r\n   */\r\n  static isUndefined(value = undefined) {\r\n    return typeof value === 'undefined' ||\r\n      value === null ||\r\n      value === '' ||\r\n      value === {} ||\r\n      value === [];\r\n    // || JSON.stringify(value) === JSON.stringify({});\r\n  }\r\n\r\n  /**\r\n   * Ensure Input validity\r\n   * @param {*} input to validate\r\n   * @return {boolean} true if is valid\r\n   */\r\n  static isInputValid(input) {\r\n    return !this.isUndefined(input) && input.checkValidity();\r\n  }\r\n\r\n  /**\r\n   * Verify if object has properties\r\n   * @param {Object} object - Object to be verified\r\n   * @param {Array} props - properties to search on object\r\n   * @return {Boolean} True if object has all properties\r\n   */\r\n  static hasProps(object, props) {\r\n    const missingPropsResult = this.getMissingProps(object, props);\r\n    return missingPropsResult.length <= 0;\r\n  }\r\n\r\n  /**\r\n   * Get Object missing properties\r\n   * @param {Object} object - Object to be verified\r\n   * @param {Array} props - properties to search on object\r\n   * @return {Array} missing properties\r\n   */\r\n  static getMissingProps(object, props) {\r\n    let missingProps = [];\r\n    [...props].forEach((prop) => {\r\n      const result = prop in object;\r\n      if (!result) {\r\n        missingProps.push(prop);\r\n      }\r\n    });\r\n\r\n    return missingProps;\r\n  }\r\n}\r\n\r\nexport default Ensure;\r\n","export default class CustomSelect {\r\n  constructor({\r\n    selectElement,\r\n    customSelectList,\r\n    customSelectSelected,\r\n    customSelectListItemClassName,\r\n    customSelectListItemClassNameActive,\r\n    selectChangeCallback,\r\n    selectOpenCallback,\r\n    selectCloseCallback,\r\n  }) {\r\n    this.isOpen = false;\r\n\r\n    this.selectElement =\r\n      selectElement instanceof Element\r\n        ? selectElement\r\n        : document.querySelector(selectElement);\r\n\r\n    this.customSelectList =\r\n      customSelectList instanceof Element\r\n        ? customSelectList\r\n        : document.querySelector(customSelectList);\r\n\r\n    this.customSelectSelected =\r\n      customSelectSelected instanceof Element\r\n        ? customSelectSelected\r\n        : document.querySelector(customSelectSelected);\r\n\r\n    this.selectChangeCallback = selectChangeCallback || new Function();\r\n    this.selectOpenCallback = selectOpenCallback || new Function();\r\n    this.selectCloseCallback = selectCloseCallback || new Function();\r\n    this.customSelectListItemClassName = customSelectListItemClassName || '';\r\n    this.customSelectListItemClassNameActive =\r\n      customSelectListItemClassNameActive || '';\r\n\r\n    this.setCurrentSelectedItem();\r\n    this.createSelectList();\r\n    this.setListenerForCurrentSelected();\r\n  }\r\n\r\n  setCurrentSelectedItem() {\r\n    let { options, selectedIndex } = this.selectElement;\r\n\r\n    this.customSelectSelected.textContent = options[selectedIndex].textContent;\r\n  }\r\n\r\n  handleSelectChange(target) {\r\n    let { value } = this.selectElement;\r\n    let { value: newValue } = target.dataset;\r\n\r\n    const prevListItemActive = this.customSelectList.querySelector(\r\n      `.${this.customSelectListItemClassNameActive}`\r\n    );\r\n\r\n    if (prevListItemActive) {\r\n      prevListItemActive.classList.remove(\r\n        this.customSelectListItemClassNameActive\r\n      );\r\n    }\r\n\r\n    target.classList.add(this.customSelectListItemClassNameActive);\r\n\r\n    this.close();\r\n\r\n    if (value !== newValue) {\r\n      this.changeOption(newValue);\r\n    }\r\n  }\r\n\r\n  createSelectList() {\r\n    [...this.selectElement].forEach(option => {\r\n      const listItem = document.createElement('li');\r\n      listItem.setAttribute('class', this.customSelectListItemClassName);\r\n      listItem.dataset['value'] = option.value;\r\n\r\n      listItem.textContent = option.textContent.trim();\r\n\r\n      listItem.addEventListener('click', ({ target }) =>\r\n        this.handleSelectChange(target)\r\n      );\r\n\r\n      this.customSelectList.append(listItem);\r\n    });\r\n  }\r\n\r\n  setListenerForCurrentSelected() {\r\n    this.customSelectSelected.addEventListener('click', () => {\r\n      this.open();\r\n\r\n      document.body.addEventListener('click', ({ target }) => {\r\n        let close = !target.className.includes('custom-select');\r\n\r\n        if (close) this.close();\r\n      });\r\n    });\r\n  }\r\n\r\n  open(event = null) {\r\n    this.isOpen = true;\r\n    this.selectOpenCallback(event);\r\n    this.customSelectList.classList.add('open');\r\n  }\r\n\r\n  close() {\r\n    this.isOpen = false;\r\n    this.selectCloseCallback();\r\n    this.customSelectList.classList.remove('open');\r\n  }\r\n\r\n  changeOption(value) {\r\n    this.selectElement.value = value;\r\n\r\n    const eventChange = new Event('change', { bubbles: true });\r\n\r\n    this.selectElement.dispatchEvent(eventChange);\r\n\r\n    this.setCurrentSelectedItem();\r\n    this.selectChangeCallback({\r\n      value,\r\n    });\r\n  }\r\n}\r\n","/* eslint-disable max-len */\r\nimport { Logger } from './';\r\n\r\n/**\r\n * Helper Abstraction class\r\n */\r\nclass Helper {\r\n  /**\r\n   * Helper constructor\r\n   * @param {*} props\r\n   */\r\n  constructor(props) {\r\n    this._logger = new Logger('Ensure');\r\n    this.props = props || {\r\n      language: navigator.language || navigator.userLanguage,\r\n      currency: 'BRL',\r\n      currencyLocale: 'pt-br',\r\n      minimumFractionDigits: 2,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * format currency\r\n   * @param {*} value\r\n   * @param {*} minimumFractionDigits\r\n   * @return {*}\r\n   */\r\n  formatPrice(value) {\r\n    value = value / 100;\r\n    value = (value * 1).toFixed(\r\n      Math.max(0, ~~this.props.minimumFractionDigits)\r\n    );\r\n\r\n    return new Intl.NumberFormat(this.props.currencyLocale, {\r\n      style: 'currency',\r\n      currency: this.props.currency,\r\n      minimumFractionDigits: this.props.minimumFractionDigits,\r\n    }).format(value);\r\n  }\r\n\r\n  static getParents(elem, selector) {\r\n    // Element.matches() polyfill\r\n    if (!Element.prototype.matches) {\r\n      Element.prototype.matches =\r\n        Element.prototype.matchesSelector ||\r\n        Element.prototype.mozMatchesSelector ||\r\n        Element.prototype.msMatchesSelector ||\r\n        Element.prototype.oMatchesSelector ||\r\n        Element.prototype.webkitMatchesSelector ||\r\n        function(s) {\r\n          let matches = (this.document || this.ownerDocument).querySelectorAll(\r\n              s\r\n            ),\r\n            i = matches.length;\r\n\r\n          while (--i >= 0 && matches.item(i) !== this) {}\r\n\r\n          return i > -1;\r\n        };\r\n    }\r\n\r\n    // Set up a parent array\r\n    let parents = [];\r\n\r\n    // Push each parent element to the array\r\n    for (; elem && elem !== document; elem = elem.parentNode) {\r\n      if (selector) {\r\n        if (elem.matches(selector)) {\r\n          parents.push(elem);\r\n        }\r\n\r\n        continue;\r\n      }\r\n\r\n      parents.push(elem);\r\n    }\r\n\r\n    // Return our parent array\r\n    return parents;\r\n  }\r\n\r\n  static serializeForm(form) {\r\n    // Setup our serialized data\r\n    let serialized = [];\r\n\r\n    // Loop through each field in the form\r\n    for (let i = 0; i < form.elements.length; i++) {\r\n      let field = form.elements[i];\r\n\r\n      // Don't serialize fields without a name, submits, buttons, file and reset inputs, and disabled fields\r\n      if (\r\n        !field.name ||\r\n        field.disabled ||\r\n        field.type === 'file' ||\r\n        field.type === 'reset' ||\r\n        field.type === 'submit' ||\r\n        field.type === 'button'\r\n      )\r\n        continue;\r\n\r\n      // If a multi-select, get all selections\r\n      if (field.type === 'select-multiple') {\r\n        for (let n = 0; n < field.options.length; n++) {\r\n          if (!field.options[n].selected) continue;\r\n\r\n          serialized.push(\r\n            encodeURIComponent(field.name) +\r\n              '=' +\r\n              encodeURIComponent(field.options[n].value)\r\n          );\r\n        }\r\n      }\r\n\r\n      // Convert field data to a query string\r\n      else if (\r\n        (field.type !== 'checkbox' && field.type !== 'radio') ||\r\n        field.checked\r\n      ) {\r\n        serialized.push(\r\n          encodeURIComponent(field.name) + '=' + encodeURIComponent(field.value)\r\n        );\r\n      }\r\n    }\r\n\r\n    return serialized.join('&');\r\n  }\r\n\r\n  static getFormData(form) {\r\n    // Setup our serialized data\r\n    let data = {};\r\n\r\n    // Loop through each field in the form\r\n    for (let i = 0; i < form.elements.length; i++) {\r\n      let field = form.elements[i];\r\n\r\n      // Don't serialize fields without a name, submits, buttons, file and reset inputs, and disabled fields\r\n      if (\r\n        !field.name ||\r\n        field.disabled ||\r\n        field.type === 'file' ||\r\n        field.type === 'reset' ||\r\n        field.type === 'submit' ||\r\n        field.type === 'button'\r\n      )\r\n        continue;\r\n\r\n      // If a multi-select, get all selections\r\n      if (field.type === 'select-multiple') {\r\n        for (let n = 0; n < field.options.length; n++) {\r\n          if (!field.options[n].selected) continue;\r\n\r\n          data[field.name] = field.options[n].value;\r\n        }\r\n      }\r\n\r\n      // Convert field data to a query string\r\n      else if (\r\n        (field.type !== 'checkbox' && field.type !== 'radio') ||\r\n        field.checked\r\n      ) {\r\n        data[field.name] = field.value;\r\n      }\r\n    }\r\n\r\n    return data;\r\n  }\r\n\r\n  static getRandomID() {\r\n    // Generate unique IDs for use as pseudo-private/protected names.\r\n    // Similar in concept to\r\n    // <http://wiki.ecmascript.org/doku.php?id=strawman:names>.\r\n    //\r\n    // The goals of this function are twofold:\r\n    //\r\n    // * Provide a way to generate a string guaranteed to be unique when compared\r\n    //   to other strings generated by this function.\r\n    // * Make the string complex enough that it is highly unlikely to be\r\n    //   accidentally duplicated by hand (this is key if you're using `ID`\r\n    //   as a private/protected name on an object).\r\n    //\r\n    // Use:\r\n    //\r\n    //     var privateName = ID();\r\n    //     var o = { 'public': 'foo' };\r\n    //     o[privateName] = 'bar';\r\n\r\n    // Math.random should be unique because of its seeding algorithm.\r\n    // Convert it to base 36 (numbers + letters), and grab the first 9 characters\r\n    // after the decimal.\r\n\r\n    return (\r\n      '_' +\r\n      Math.random()\r\n        .toString(36)\r\n        .substr(2, 9)\r\n    );\r\n  }\r\n\r\n  static setCookie(cname, cvalue, exdays) {\r\n    const date = new Date();\r\n\r\n    date.setTime(date.getTime() + exdays * 24 * 60 * 60 * 1000);\r\n\r\n    const expires = 'expires=' + date.toUTCString();\r\n\r\n    document.cookie = `${cname}=${cvalue};${expires};path=/`;\r\n  }\r\n\r\n  static getCookie(cname) {\r\n    const decodedCookie = decodeURIComponent(document.cookie);\r\n\r\n    const cookie = decodedCookie\r\n      .split(';')\r\n      .filter(cookie => cookie.includes(cname))[0];\r\n\r\n    return cookie || '';\r\n  }\r\n\r\n  static isInViewport(element) {\r\n    const heightViewport =\r\n      window.innerHeight || document.documentElement.clientHeight;\r\n\r\n    const widthViewport =\r\n      window.innerWidth || document.documentElement.clientWidth;\r\n\r\n    const { top, right, bottom, left } = element.getBoundingClientRect();\r\n\r\n    return (\r\n      top >= 0 &&\r\n      left >= 0 &&\r\n      bottom <= heightViewport &&\r\n      right <= widthViewport\r\n    );\r\n  }\r\n\r\n  static removeAccents(str) {\r\n    const mapAccents = {\r\n      a: 'á|à|ã|â|À|Á|Ã|Â',\r\n      e: 'é|è|ê|É|È|Ê',\r\n      i: 'í|ì|î|Í|Ì|Î',\r\n      o: 'ó|ò|ô|õ|Ó|Ò|Ô|Õ',\r\n      u: 'ú|ù|û|ü|Ú|Ù|Û|Ü',\r\n      c: 'ç|Ç',\r\n      n: 'ñ|Ñ',\r\n    };\r\n\r\n    for (let pattern in mapAccents) {\r\n      str = str.replace(new RegExp(mapAccents[pattern], 'g'), pattern);\r\n    }\r\n\r\n    return str;\r\n  }\r\n}\r\n\r\nexport default Helper;\r\n","/* eslint no-console: 0 */\r\n\r\n/**\r\n * Logger Abstraction class\r\n */\r\nclass Logger {\r\n  /**\r\n   * Logger constructor\r\n   * @param {string} logName Application name to log\r\n   */\r\n  constructor(logName = 'B8ONE Logger Component') {\r\n    this.logName = logName;\r\n  }\r\n\r\n  /**\r\n   * Log error message\r\n   * @param {*} message - Message text\r\n   * @param {*} errorObj - Message object\r\n   */\r\n  error(message = '', errorObj = {}) {\r\n    console.error(message, errorObj);\r\n  }\r\n\r\n  /**\r\n   * Log information message\r\n   * @param {*} message - Message text\r\n   */\r\n  info(message = '') {\r\n    console.info(message);\r\n  }\r\n\r\n  /**\r\n   * Log warning message\r\n   * @param {*} message - Message text\r\n   */\r\n  warning(message = '') {\r\n    console.warn(this.logName, message);\r\n  }\r\n\r\n  /**\r\n   * Generic log\r\n   * @param {String} message - log's message\r\n   */\r\n  log(message = '') {\r\n    console.log(message);\r\n  }\r\n\r\n  /**\r\n   * Generic log\r\n   * @param {String} message - log's message\r\n   * @param {*} object - object to be logged\r\n   */\r\n  log(message = '', object = {}) {\r\n    console.log(message, object);\r\n  }\r\n}\r\n\r\nexport default Logger;\r\n","/* eslint-disable max-len */\r\n\r\nimport { Ensure, Logger } from '../common';\r\nimport HttpClient from './b8one.httpClient';\r\n\r\n/**\r\n * Cart Abstraction class\r\n */\r\nclass CartService {\r\n  /**\r\n   * Cart constructor\r\n   */\r\n  constructor() {\r\n    this._VTEX_API_ENDPOINT = '/api/checkout/pub/orderForm';\r\n\r\n    this._logger = new Logger('Cart service');\r\n    this._httpClient = new HttpClient();\r\n  }\r\n\r\n  /**\r\n   * Get current cart\r\n   * @return {*} Cart object\r\n   */\r\n  async getCurrent() {\r\n    return await this._httpClient.get(this._VTEX_API_ENDPOINT);\r\n  }\r\n\r\n  /**\r\n   * Add item to cart\r\n   * @param {*} skuId - Product sku Id (SKU)\r\n   * @param {*} productQuantity - Product Quantity\r\n   * @param {*} sellerId - Seller id\r\n   */\r\n  async add(skuId, productQuantity, sellerId = 1) {\r\n    // const payload = this._payloadFactory(skuId, productQuantity, sellerId);\r\n\r\n    if (!Ensure.isUndefined(skuId)) {\r\n      const current = await this.getCurrent();\r\n      const indexFound = current.items.findIndex(x => x.id === skuId);\r\n\r\n      if (indexFound > -1) {\r\n        productQuantity =\r\n          parseInt(productQuantity) +\r\n          parseInt(current.items[indexFound].quantity);\r\n      }\r\n\r\n      const endpointUrl = `${this._VTEX_API_ENDPOINT}/${current.orderFormId}/items`;\r\n\r\n      const payload = {\r\n        orderItems: [\r\n          {\r\n            seller: sellerId.toString(),\r\n            quantity: parseInt(productQuantity),\r\n            id: skuId.toString(),\r\n          },\r\n        ],\r\n      };\r\n\r\n      return this._httpClient.patch(endpointUrl, payload);\r\n    }\r\n  }\r\n\r\n  async checkoutCRUD(skus) {\r\n    let { items } = await window.vtexjs.checkout.getOrderForm();\r\n\r\n    const skusCustomProducts = this.getCustomProducts(skus);\r\n\r\n    skus = skus.filter(sku => !sku.isCustom);\r\n    skus = [...skus, ...skusCustomProducts];\r\n\r\n    const skuToIgnore = [19, 698, 25, 26];\r\n\r\n    const indexToRemove = items.reduce((indexList, item, index) => {\r\n      const customProductSKUs = [25, 26];\r\n\r\n      if (customProductSKUs.includes(parseInt(item.id))) {\r\n        return [...indexList, index];\r\n      }\r\n\r\n      return indexList;\r\n    }, []);\r\n\r\n    if (indexToRemove.length > 0) {\r\n      const response = await this.removeMoreProducts(indexToRemove);\r\n\r\n      response && (items = response.items);\r\n    }\r\n\r\n    const productsToAdd = skus\r\n      .filter(sku => sku.quantity > 0)\r\n      .filter(sku => {\r\n        let index = items.findIndex(\r\n          item => parseInt(item.productId) === parseInt(sku.productId)\r\n        );\r\n\r\n        return index === -1 && sku.quantity > 0;\r\n      })\r\n      .map(sku => ({\r\n        quantity: sku.quantity,\r\n        seller: 1,\r\n        id: sku.skuId || sku.id,\r\n      }));\r\n\r\n    console.log('productsToAdd', productsToAdd);\r\n\r\n    const productsToUpdate = skus\r\n      .filter(sku => sku.quantity > 0)\r\n      .filter(sku => {\r\n        const id = sku.skuId || sku.id;\r\n\r\n        let index = items.findIndex(item => parseInt(item.id) === parseInt(id));\r\n\r\n        if (index !== -1) {\r\n          const sameSku = parseInt(items[index].id) === parseInt(sku.id);\r\n          const diffQuantity =\r\n            parseInt(items[index].quantity) !== parseInt(sku.quantity);\r\n\r\n          return sameSku && diffQuantity && sku.quantity > 0;\r\n        }\r\n\r\n        return false;\r\n      })\r\n      .map(sku => {\r\n        const id = sku.skuId || sku.id;\r\n\r\n        let index = items.findIndex(item => parseInt(item.id) === parseInt(id));\r\n\r\n        return {\r\n          index,\r\n          quantity: sku.quantity,\r\n        };\r\n      });\r\n\r\n    console.log('productsToUpdate', productsToUpdate);\r\n\r\n    const productsToReplaceSKU = skus\r\n      .filter(\r\n        sku =>\r\n          sku.quantity > 0 &&\r\n          !skuToIgnore.includes(parseInt(sku.skuId || sku.id))\r\n      )\r\n      .filter(sku => {\r\n        const index = items.findIndex(\r\n          item => parseInt(item.productId) === parseInt(sku.productId)\r\n        );\r\n\r\n        if (index !== -1) {\r\n          const diffSku = parseInt(items[index].id) !== parseInt(sku.skuId);\r\n\r\n          return diffSku;\r\n        }\r\n\r\n        return false;\r\n      })\r\n      .map(sku => {\r\n        const index = items.findIndex(\r\n          item => parseInt(item.productId) === parseInt(sku.productId)\r\n        );\r\n\r\n        const oldSKU = {\r\n          index,\r\n          seller: 1,\r\n          quantity: 0,\r\n        };\r\n\r\n        const newSKU = {\r\n          seller: 1,\r\n          id: sku.skuId,\r\n          quantity: sku.quantity,\r\n        };\r\n\r\n        return [oldSKU, newSKU];\r\n      })\r\n      .reduce((itemsList, current) => {\r\n        const [oldSKU, newSKU] = current;\r\n\r\n        return [...itemsList, oldSKU, newSKU];\r\n      }, []);\r\n\r\n    console.log('productsToReplaceSKU', productsToReplaceSKU);\r\n\r\n    const productsToRemove = skus\r\n      .filter(sku => sku.quantity < 1)\r\n      .filter(sku => {\r\n        const id = sku.skuId || sku.id;\r\n\r\n        let index = items.findIndex(item => parseInt(item.id) === parseInt(id));\r\n\r\n        if (index !== -1) {\r\n          return sku.quantity == 0;\r\n        }\r\n\r\n        return false;\r\n      })\r\n      .map(sku => {\r\n        const id = sku.skuId || sku.id;\r\n\r\n        let index = items.findIndex(item => parseInt(item.id) === parseInt(id));\r\n\r\n        return {\r\n          index,\r\n          quantity: 0,\r\n        };\r\n      });\r\n\r\n    console.log('productsToRemove', productsToRemove);\r\n\r\n    if (productsToUpdate[0]) {\r\n      await window.vtexjs.checkout.updateItems(productsToUpdate, null, false);\r\n    }\r\n\r\n    if (productsToReplaceSKU[0]) {\r\n      await window.vtexjs.checkout.replaceSKU(productsToReplaceSKU);\r\n    }\r\n\r\n    if (productsToRemove[0]) {\r\n      await window.vtexjs.checkout.removeItems(productsToRemove);\r\n    }\r\n\r\n    if (productsToAdd[0]) {\r\n      await window.vtexjs.checkout.addToCart(productsToAdd, null);\r\n    }\r\n  }\r\n\r\n  getCustomProducts(skus) {\r\n    const customProducts = {};\r\n\r\n    skus\r\n      .filter(({ isCustom }) => isCustom === true)\r\n      .forEach(({ skuId, quantity, customProductItem }) => {\r\n        let currentCustomProduct = customProducts[skuId];\r\n\r\n        const customProductQuantity =\r\n          parseInt(customProductItem.quantity) * parseInt(quantity);\r\n\r\n        if (currentCustomProduct) {\r\n          const newQuantity =\r\n            parseInt(currentCustomProduct.quantity) + customProductQuantity;\r\n\r\n          currentCustomProduct = {\r\n            ...currentCustomProduct,\r\n            quantity: newQuantity,\r\n          };\r\n        } else {\r\n          currentCustomProduct = {\r\n            ...customProductItem,\r\n            quantity: customProductQuantity,\r\n            isCustom: true,\r\n          };\r\n        }\r\n\r\n        customProducts[skuId] = currentCustomProduct;\r\n      });\r\n\r\n    return Object.values(customProducts);\r\n  }\r\n\r\n  async getProductIndexInOrderForm(productId) {\r\n    const { items } = await this.getCurrent();\r\n\r\n    const index = items.findIndex(item => item.productId == productId);\r\n\r\n    if (index !== -1) return index;\r\n\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Remove item to cart\r\n   * @param {JSON} itemIndex - Product item index to be removed\r\n   */\r\n  async remove(itemIndex) {\r\n    const current = await this.getCurrent();\r\n    const endpointUrl = `${this._VTEX_API_ENDPOINT}/${current.orderFormId}/items`;\r\n    const payload = {\r\n      orderItems: [\r\n        {\r\n          index: itemIndex,\r\n          quantity: 0,\r\n        },\r\n      ],\r\n      expectedOrderFormSections: ['items'],\r\n      noSplitItem: true,\r\n    };\r\n\r\n    await this._httpClient.patch(endpointUrl, payload);\r\n  }\r\n\r\n  /**\r\n   * Remove items of cart\r\n   * @param {Array} itemsIndex - Products items index to be removed\r\n   */\r\n  async removeMoreProducts(itemsIndex) {\r\n    const current = await this.getCurrent();\r\n    const endpointUrl = `${this._VTEX_API_ENDPOINT}/${current.orderFormId}/items`;\r\n    const payload = {\r\n      orderItems: itemsIndex.map(index => ({\r\n        index,\r\n        quantity: 0,\r\n      })),\r\n      expectedOrderFormSections: ['items'],\r\n      noSplitItem: true,\r\n    };\r\n\r\n    return await this._httpClient.patch(endpointUrl, payload);\r\n  }\r\n\r\n  async updateProduct(skuId, quantity, seller = 1) {\r\n    const newSKU = {\r\n      seller,\r\n      quantity,\r\n      id: skuId,\r\n    };\r\n\r\n    return await this.updateProducts([newSKU]);\r\n  }\r\n\r\n  async updateProducts(skus) {\r\n    const { items, orderFormId } = await this.getCurrent();\r\n\r\n    skus = skus\r\n      .map(({ id, quantity, seller }) => {\r\n        const index = items.findIndex(\r\n          item => parseInt(item.id) === parseInt(id)\r\n        );\r\n\r\n        return {\r\n          id,\r\n          index,\r\n          quantity,\r\n          seller: seller || 1,\r\n        };\r\n      })\r\n      .filter(sku => sku.index !== -1);\r\n\r\n    if (skus.length > 0) {\r\n      const payload = {\r\n        orderItems: skus,\r\n      };\r\n\r\n      return await this._httpClient.patch(\r\n        `/api/checkout/pub/orderForm/${orderFormId}/items`,\r\n        payload\r\n      );\r\n    }\r\n  }\r\n\r\n  async simulateOrderForm(postalCode, country = 'BRA') {\r\n    try {\r\n      await vtexjs.checkout.getOrderForm();\r\n\r\n      const orderForm = await vtexjs.checkout.calculateShipping({\r\n        postalCode,\r\n        country,\r\n      });\r\n\r\n      return orderForm;\r\n    } catch (error) {\r\n      console.error('Error in simulateOrderForm', error);\r\n    }\r\n  }\r\n\r\n  async simulateShipping(items, postalCode, country = 'BRA') {\r\n    const orderFormSimulated = await vtexjs.checkout.simulateShipping(\r\n      items,\r\n      postalCode,\r\n      country\r\n    );\r\n\r\n    return orderFormSimulated;\r\n  }\r\n\r\n  async updateCheckoutTransporterSLA(logisticsInfo) {\r\n    await vtexjs.checkout.getOrderForm();\r\n\r\n    const { shippingData } = vtexjs.checkout.orderForm;\r\n\r\n    shippingData.logisticsInfo = logisticsInfo;\r\n\r\n    await vtexjs.checkout.sendAttachment('shippingData', shippingData);\r\n  }\r\n\r\n  async updateCheckoutAddress(address) {\r\n    console.log(address);\r\n    await vtexjs.checkout.getOrderForm();\r\n\r\n    const { shippingData } = vtexjs.checkout.orderForm;\r\n\r\n    shippingData.availableAddresses = [\r\n      {\r\n        ...shippingData.address,\r\n        ...address,\r\n      },\r\n    ];\r\n\r\n    shippingData.selectedAddresses = [\r\n      {\r\n        ...shippingData.address,\r\n        ...address,\r\n      },\r\n    ];\r\n\r\n    shippingData.address = {\r\n      ...shippingData.address,\r\n      ...address,\r\n    };\r\n\r\n    return await vtexjs.checkout.sendAttachment('shippingData', shippingData);\r\n  }\r\n\r\n  async setMultipleCustomDataFields(appName, fields) {\r\n    const { orderFormId } = await this.getCurrent();\r\n\r\n    const endpoint = `/api/checkout/pub/orderForm/${orderFormId}/customData/${appName}`;\r\n\r\n    try {\r\n      return await this._httpClient.put(endpoint, fields);\r\n    } catch (error) {\r\n      console.error('setMultipleCustomDataFields', error);\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  async setSingleCustomDataField(appName, appFieldName, appFieldValue) {\r\n    const { orderFormId } = await this.getCurrent();\r\n\r\n    const endpoint = `/api/checkout/pub/orderForm/${orderFormId}/customData/${appName}/${appFieldName}`;\r\n\r\n    const payload = { value: appFieldValue };\r\n\r\n    try {\r\n      return await this._httpClient.put(endpoint, payload);\r\n    } catch (error) {\r\n      console.error('setSingleCustomDataField', error);\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  async removeSingleCustomDataField(appName, appFieldName) {\r\n    const { orderFormId } = await this.getCurrent();\r\n\r\n    const endpoint = `/api/checkout/pub/orderForm/${orderFormId}/customData/${appName}/${appFieldName}`;\r\n\r\n    const payload = { value: null };\r\n\r\n    try {\r\n      return await this._httpClient.delete(endpoint, payload);\r\n    } catch (error) {\r\n      console.error('removeSingleCustomDataField', error);\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Cart's payload method factory\r\n   * @param {*} skuId - Product Id (SKU)\r\n   * @param {*} productQuantity - Product Quantity\r\n   * @param {*} sellerId - Seller id\r\n   * @return {JSON} cart paylod\r\n   */\r\n  _payloadFactory(skuId, productQuantity, sellerId = 1) {\r\n    return {\r\n      id: skuId,\r\n      quantity: productQuantity,\r\n      seller: sellerId,\r\n    };\r\n  }\r\n}\r\n\r\nexport default CartService;\r\n","import fetch from 'unfetch';\r\nimport { Ensure, Logger } from '../common';\r\n\r\n/**\r\n * HttpClient Abstraction class\r\n */\r\nclass HttpClient {\r\n  /**\r\n   * HttpClient constructor\r\n   */\r\n  constructor() {\r\n    this._logger = new Logger('httpClient');\r\n  }\r\n\r\n  /**\r\n   * Get\r\n   * @param {String} endpointUrl\r\n   * @return {Promise}\r\n   */\r\n  get(endpointUrl) {\r\n    if (!Ensure.isUndefined(endpointUrl)) {\r\n      return this._execute(endpointUrl, 'GET');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete\r\n   * @param {String} endpointUrl\r\n   * @return {Promise}\r\n   */\r\n  delete(endpointUrl) {\r\n    if (!Ensure.isUndefined(endpointUrl)) {\r\n      return this._execute(endpointUrl, 'DELETE');\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {String} endpointUrl\r\n   * @param {JSON} payload\r\n   * @return {Promise}\r\n   */\r\n  post(endpointUrl, payload = {}) {\r\n    if (!Ensure.isUndefined(endpointUrl)) {\r\n      return this._execute(endpointUrl, 'POST', payload);\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {String} endpointUrl\r\n   * @param {JSON} payload\r\n   * @return {Promise}\r\n   */\r\n  put(endpointUrl, payload) {\r\n    if (!Ensure.isUndefined(endpointUrl) && !Ensure.isUndefined(payload)) {\r\n      return this._execute(endpointUrl, 'PUT', payload);\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {String} endpointUrl\r\n   * @param {JSON} payload\r\n   * @return {Promise}\r\n   */\r\n  patch(endpointUrl, payload) {\r\n    if (!Ensure.isUndefined(endpointUrl) && !Ensure.isUndefined(payload)) {\r\n      return this._execute(endpointUrl, 'PATCH', payload);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {String} endpointUrl\r\n   * @param {String} httpVerb\r\n   * @param {Object} payload\r\n   * @return {Promise}\r\n   */\r\n  _execute(endpointUrl, httpVerb, payload) {\r\n    let header = {\r\n      method: httpVerb,\r\n      headers: {\r\n        // 'Accept': 'application/vnd.vtex.ds.v10+json',\r\n        // 'Content-Type': 'application/json',\r\n        accept: 'application/vnd.vtex.masterdata.v10+json',\r\n        'content-type': 'application/json; charset=utf-8',\r\n      },\r\n    };\r\n\r\n    if (payload) {\r\n      header['body'] = JSON.stringify(payload);\r\n    }\r\n\r\n    return fetch(endpointUrl, header)\r\n      .then(this.validateResponse)\r\n      .then(this.parseResponseToJson)\r\n      .then(data => {\r\n        return data;\r\n      })\r\n      .catch(error => {\r\n        this._logger.log('Request succeeded with JSON response', error);\r\n        return error;\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Parse response data to json object\r\n   * @param {*} response - Request response\r\n   * @return {JSON} json data\r\n   */\r\n  async parseResponseToJson(response) {\r\n    if (!response.ok) {\r\n      return response;\r\n    }\r\n\r\n    return await response.json();\r\n  }\r\n\r\n  /**\r\n   * Response validation\r\n   * @param {*} response\r\n   * @return {Promise} promise result\r\n   */\r\n  validateResponse(response) {\r\n    if (response.ok) {\r\n      return Promise.resolve(response);\r\n    } else {\r\n      return Promise.reject(new Error(response.statusText));\r\n    }\r\n  }\r\n}\r\n\r\nexport default HttpClient;\r\n"],"sourceRoot":""}