(function(c){if("function"!==typeof c.fn.QD_SmartResearch){var g=function(c,d){if("object"===typeof console&&"undefined"!==typeof console.error&&"undefined"!==typeof console.info&&"undefined"!==typeof console.warn){var f;"object"===typeof c?(c.unshift("[Smart Research]\n"),f=c):f=["[Smart Research]\n"+c];if("undefined"===typeof d||"alerta"!==d.toLowerCase()&&"aviso"!==d.toLowerCase())if("undefined"!==typeof d&&"info"===d.toLowerCase())try{console.info.apply(console,f)}catch(n){try{console.info(f.join("\n"))}catch(p){}}else try{console.error.apply(console,
f)}catch(n){try{console.error(f.join("\n"))}catch(p){}}else try{console.warn.apply(console,f)}catch(n){try{console.warn(f.join("\n"))}catch(p){}}}};window._QuatroDigital_InfinityScroll=window._QuatroDigital_InfinityScroll||{};var d=window._QuatroDigital_InfinityScroll;window._QuatroDigital_SmartResearch=window._QuatroDigital_SmartResearch||{};var G=window._QuatroDigital_SmartResearch,H=c("");c(document);var I=c("html,body"),q=c("body");c.fn.QD_SmartResearch=function(E){function F(){if(!b.mergeMenu)return!1;
var a=J;a.insertAfter(b.insertMenuAfter);n(a)}function f(){if(b.mergeMenuList){var a=0;h.find("h3,h4").each(function(){var e=t.find("h3,h4").eq(a).next("ul");e.insertAfter(c(this));n(e);a++})}}function n(a){a.find("a").each(function(){var a=c(this);a.text(A(a.text()))})}function p(a){a=a.getParent("fieldset");var c=a.parent();a.find("input:checked").length?(a.addClass("qd-sr-filtered"),c.addClass("qd-sr-on-"+a.attr("data-qd-class"))):(a.removeClass("qd-sr-filtered"),c.removeClass("qd-sr-on-"+a.attr("data-qd-class")))}
function K(){l.fieldsetCount=0;l.tmpCurrentLabel={};h.find("fieldset").each(function(){var a=c(this),e=a.find("label"),d=(a.find("h5:first").text()||"").toLowerCase().replaceSpecialChars().replace(/\s/g,"-"),u="filtro_"+d;l[u]={};1>e.length?a.hide():(a.find("a.ver-filtros").length&&a.addClass("qd-sr-show-more-results"),a.addClass(u).attr("data-qd-class",d),e.each(function(d){var e=c(this),x=e.find("input").val()||e.siblings("input#"+(e.attr("for")||g("O label n\u00e3o tem 'for'","alerta")||"_")).val()||
"",f="sr_"+x.toLowerCase().replaceSpecialChars().replace(/\s/g,"-");l.tmpCurrentLabel={fieldsetParent:[a,u],elem:e};l[u][d.toString()]={className:f,title:x};e.addClass(f).attr({title:x,index:d});b.labelCallback(l)}),l.fieldsetCount++)})}function B(a,e){p(a);var b=e?y:"&"+(a.attr("rel")||"");r.fadeTo(300,.6);d.searchUrl+=b;d.searchUrl=d.searchUrl.replace(/PageNumber=[0-9]*/,"PageNumber=1");d.currentStatus=!1;"false"!=(a.attr("data-sr-exec-ajax")||"")&&(v=c.ajax({url:d.searchUrl,success:C,error:D}));
b=a.parent();b.is("label")||(b=a.attr("id")||g("O input n\u00e3o possui ID")||"",b=a.siblings("[for='"+b+"']"));b.addClass("sr_selected");a.addClass("qd_sr_selected")}function C(a){r.fadeTo(300,0,function(){c(this).hide()});L(c(a));k.requests++;b.ajaxCallback(k);I.animate({scrollTop:b.filterScrollTop(M||{top:0,left:0})},500,function(){z||(d.currentStatus=!0)})}function D(a,e){"abort"!==e&&(r.fadeTo(300,0,function(){c(this).hide()}),alert(b.filterErrorMsg),g("Houve um erro ao tentar fazer a requisi\u00e7\u00e3o da p\u00e1gina com filtros."),
d.currentStatus=!0)}function L(a){z=!0;if(!b.authorizeUpdate(k))return!1;var e=a.filter(b.shelfClass);a=m.find(b.shelfClass);(0<a.length?a:b.emptySearchElem).slideUp(600,function(){c(this).remove();b.usePopup?c(".boxPopUp2").vtexPopUp2():b.emptySearchElem.remove();0<e.length?(e.hide(),m.append(e),b.shelfCallback(),c(window).trigger("QuatroDigital.sr_insertedCallback"),e.slideDown(600,function(){z=!1;d.currentStatus=!0;c(window).trigger("QuatroDigital.sr_shelfCallback")}),k.isEmpty=!1,q.removeClass("qd-sr-empty-search")):
(k.isEmpty=!0,b.usePopup?b.emptySearchElem.addClass("freeContent autoClose ac_"+b.popupAutoCloseSeconds).vtexPopUp2().stop(!0).show():(m.append(b.emptySearchElem),b.emptySearchElem.show().css("height","auto").fadeTo(300,.2,function(){b.emptySearchElem.fadeTo(300,1)})),b.emptySearchCallback(k),q.addClass("qd-sr-empty-search"))})}function N(a){var b=a.parent();var c=!1;b.is("label")||(b=a.attr("id")||""+g("O input n\u00e3o possui ID"),b=a.siblings("[for='"+b+"']"),c=!0);var d=b.text();d=A(d);c?b.text(d):
b.text(d).prepend(a)}function A(a){return a.replace(/\([0-9]+\)/ig,function(a){return""})}var w=c(this),O={loadContent:".prateleira[id^=ResultItems]",shelfClass:".prateleira",filtersMenu:".search-multiple-navigator",linksMenu:".search-single-navigator",menuDepartament:".navigation-tabs .menu-departamento",mergeMenu:!0,insertMenuAfter:".search-multiple-navigator h3:first",emptySearchElem:c('<div class="vtexsr-emptySearch"></div>'),elemLoading:'<div id="scrollLoading">Carregando ... </div>',emptySearchMsg:"<h3>Esta combina\u00e7\u00e3o de filtros n\u00e3o retornou nenhum resultado!</h3>",
filterErrorMsg:"Houve um erro ao tentar filtrar a p\u00e1gina!",usePopup:!1,showLinks:!0,mergeMenuList:!0,popupAutoCloseSeconds:3,isSmartCheckout:!0,invertOrder:!1,filterScrollTop:function(a){return a.top-20},callback:function(){},shelfCallback:function(){},ajaxCallback:function(){},emptySearchCallback:function(){},authorizeUpdate:function(){return!0},labelCallback:function(a){},initChangeCallback:function(a){},endChangeCallback:function(a){}},b=c.extend({},O,E);c(b.elemLoading);var y="",z=!1,m=c(b.loadContent),
h=c(b.filtersMenu),l={},k={requests:0,filters:0,isEmpty:!1};G.ajaxCallbackObj=k;d.searchUrl=d.searchUrl||function(){var a,b,d;c("script:not([src])").each(function(){b=c(this)[0].innerHTML;d=/\/buscapagina\?.+&PageNumber=/i;if(-1<b.search(/\/buscapagina\?/i))return a=d.exec(b),!1});if("undefined"!==typeof a&&"undefined"!==typeof a[0])return a[0];g("N\u00e3o foi poss\u00edvel localizar a url de busca da p\u00e1gina.\n Tente adicionar o .js ao final da p\u00e1gina. \n[M\u00e9todo: getSearchUrl]");return""}();
if(1>w.length)return g("Nenhuma op\u00e7\u00e3o de filtro encontrada","Aviso"),b.showLinks&&c(b.linksMenu).css("visibility","visible").show(),"object"===typeof d.buttonToTop&&d.buttonToTop instanceof c&&d.buttonToTop.trigger("click"),w;if(1>m.length)return g("Elemento para destino da requisi\u00e7\u00e3o n\u00e3o foi encontrado \n ("+m.selector+")"),!1;1>h.length&&g("O menu de filtros n\u00e3o foi encontrado \n ("+h.selector+")");var t=c(b.linksMenu),r=c('<div class="vtexSr-overlay"></div>'),J=c(b.menuDepartament),
M=m.offset(),v=null;b.emptySearchElem.append(b.emptySearchMsg);m.before(r);b.isSmartCheckout?b.mergeMenu&&t.insertAfter(b.insertMenuAfter):q.hasClass("departamento")?F():(q.hasClass("categoria")||q.hasClass("resultado-busca"))&&f();(function(){h.length&&(b.invertOrder?t.insertBefore(h):(t.hide(),h.show()));K();w.each(function(){var a=c(this),e=a.parent();e.is("label")||(e=a.siblings("[for='"+(a.attr("id")||g("O input n\u00e3o possui ID")||"")+"']"));a.is(":checked")&&(y+="&"+(a.attr("rel")||""),e.addClass("sr_selected"),
a.addClass("qd_sr_selected"));N(a);e.append('<span class="sr_box"></span><span class="sr_box2"></span>');a.bind("change.qd_sr_change",function(e){if(!1===b.initChangeCallback.call(this,e))return!1;null!==v&&v.abort();d.currentPage=2;d.pages=9999999999999;d.moreResults=!0;if(a.is(":checked"))B(a);else{p(a);var f=a.attr("rel")||"";r.fadeTo(300,.6);d.searchUrl=d.searchUrl.replace("&"+f,"");d.searchUrl=d.searchUrl.replace(/PageNumber=[0-9]*/,"PageNumber=1");d.currentStatus=!1;"false"!=(a.attr("data-sr-exec-ajax")||
"")&&(v=c.ajax({url:d.searchUrl,success:C,error:D}));a.parent().removeClass("sr_selected");a.removeClass("qd_sr_selected")}k.filters=w.filter(":checked").length;b.endChangeCallback.call(this,e)})});""!==y&&B(H,!0)})();b.callback();h.css("visibility","visible")}}})(jQuery);