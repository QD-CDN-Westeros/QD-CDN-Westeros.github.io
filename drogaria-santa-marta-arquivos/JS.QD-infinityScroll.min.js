/* DESKTOP-US8NRQT - 16/10/2020 08:45:03 GMT */
/*!  */
/**
* Infinity Scroll
* @author Carlos Vinicius [Quatro Digital]
* @version 3.7
* @License MIT
* @contributor https://github.com/freires (https://github.com/caljp13/VTEX-Infinity-Scroll/pull/2)
*/
"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),function(e){"function"!=typeof e.fn.QD_infinityScroll&&(window._QuatroDigital_InfinityScroll=window._QuatroDigital_InfinityScroll||{},e.fn.QD_infinityScroll=function(o){var t,n,i,r,a,l,s,c,u;if(c=window._QuatroDigital_InfinityScroll,n=function(e,o){if("object"==typeof console){var t="object"==typeof e;void 0===o||"alerta"!==o.toLowerCase()&&"aviso"!==o.toLowerCase()?void 0!==o&&"info"===o.toLowerCase()?t?console.info("[Infinity Scroll]\n",e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):console.info("[Infinity Scroll]\n"+e):t?console.error("[Infinity Scroll]\n",e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):console.error("[Infinity Scroll]\n"+e):t?console.warn("[Infinity Scroll]\n",e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):console.warn("[Infinity Scroll]\n"+e)}},t={lastShelf:">div:last",elemLoading:'<div id="scrollLoading">Carregando ... </div>',searchUrl:null,returnToTop:e('<div id="returnToTop"><a href="#"><span class="text">voltar ao</span><span class="text2">TOPO</span><span class="arrowToTop"></span></a></div>'),scrollBy:document,callback:function(){},getShelfHeight:function(){return r.scrollTop()+r.height()},paginate:null,insertContent:function(e,o){e.after(o)},authorizeScroll:function(){return!0}},i=jQuery.extend({},t,o),r=jQuery(this),jQuery(""),1>r.length)return r;1<r.length&&(n("Identifiquei que a seletor informado ("+r.selector+") retornou "+r.length+" elementos.\n Para solucionar o problema estou selecionando automáticamente o primeiro com o id: #"+(r.filter("[id^=ResultItems]:first").attr("id")||"!Not Found"),"Aviso"),r=r.filter("[id^=ResultItems]:first")),r.filter("[id^=ResultItems]").length||n(["Certifique-se que esta selecionando o elemento correto.\n O plugin espera que o elemento seja o que contém o id: #"+(e("div[id^=ResultItems]").attr("id")||"!Not Found"),e("div[id^=ResultItems]")],"Info"),r.parent().filter("[id^=ResultItems]").length&&(r=r.parent(),n(["Identifiquei que o seletor pai do elemento que você informou é o #"+(jQuery("div[id^=ResultItems]").attr("id")||"!Not Found")+".\n Como forma de corrigir esse problema de seleção de elemento, assumirei a prateleira correta.",r],"Aviso")),e("body").append(i.returnToTop),a=e(window),l=e(document),u=e(i.scrollBy),c.toTopE=e(i.returnToTop),s=e(i.elemLoading),c.moreResults=!0,c.currentPage=2;var f={scrollToTop:function(){var e,o,t;e=a.height(),u.bind("resize.QD_infinityScroll",(function(){e=a.height()})),o=null,t=function(){l.scrollTop()>e?c.toTopE.stop(!0).fadeTo(300,1,(function(){c.toTopE.show()})):c.toTopE.stop(!0).fadeTo(300,0,(function(){c.toTopE.hide()}))},u.bind("scroll.QD_infinityScroll",(function(){o&&(clearTimeout(o),o=null),o=setTimeout(t,50)})),c.buttonToTop=c.toTopE.find("a").bind("click.QD_infinityScroll",(function(){return jQuery("html,body").animate({scrollTop:0},"slow"),!1}))},getSearchUrl:function(){var e,o,t,i;return jQuery("script:not([src])").each((function(){return o=jQuery(this)[0].innerHTML,t=/\/buscapagina\?.+&PageNumber=/i,i=/\/paginaprateleira\?.+PageNumber=/i,-1<o.indexOf("buscapagina")?(e=t.exec(o),!1):-1<o.indexOf("paginaprateleira")?(e=i.exec(o),!1):void 0})),void 0!==e&&void 0!==e[0]?e[0].replace("paginaprateleira","buscapagina"):(n("Não foi possível localizar a url de busca da página.\n Tente adicionar o .js ao final da página. \n[Método: getSearchUrl]"),"")},infinityScroll:function(){var o,t,l,p,d;if(c.searchUrl=null!==i.searchUrl?i.searchUrl:f.getSearchUrl(),c.currentStatus=!0,""!==(o=e(".pager[id*=PagerTop]:first").attr("id")||"")&&(c.pages=window["pagecount_"+o.split("_").pop()],void 0===c.pages))for(l in window)if(/pagecount_[0-9]+/.test(l)){c.pages=window[l];break}void 0===c.pages&&(c.pages=9999999999999),t=function(){if(c.currentStatus){var o=r.find(i.lastShelf);if(1>o.length)return n("Última Prateleira/Vitrine não encontrada \n ("+o.selector+")"),!1;o.after(s),c.currentStatus=!1;var t=c.currentPage;e.ajax({url:c.searchUrl.replace(/pagenumber\=[0-9]*/i,"PageNumber="+c.currentPage),dataType:"html",success:function(e){1>e.trim().length?(c.moreResults=!1,n("Não existem mais resultados a partir da página: "+t,"Aviso")):i.insertContent(o,e),c.currentStatus=!0,s.remove()},error:function(){n("Houve um erro na requisição Ajax de uma nova página.")},complete:function(e,o){i.callback()}}),c.currentPage++}},"function"==typeof i.paginate?i.paginate((function(){c.currentPage<=c.pages&&c.moreResults&&t()})):(p=null,d=function(){c.currentPage<=c.pages&&c.moreResults&&a.scrollTop()+a.height()>=i.getShelfHeight()&&i.authorizeScroll()&&t()},u.bind("scroll.QD_infinityScroll_paginate",(function(){p&&(clearTimeout(p),p=null),p=setTimeout(d,50)})))}};return f.scrollToTop(),f.infinityScroll(),r})}(jQuery),$((function(){$(".prateleira[id*=ResultItems]").QD_infinityScroll()}));