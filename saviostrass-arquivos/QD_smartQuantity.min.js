/* Quatro Digital - Smart Quantity // 1.6 // Carlos Vinicius // Todos os direitos reservados */
(function(t){var d=jQuery;if("function"!==typeof d.fn.QD_smartQuantity){var g=function(d,b){if("object"===typeof console&&"function"===typeof console.error&&"function"===typeof console.info&&"function"===typeof console.warn){var e;"object"===typeof d?(d.unshift("[Quatro Digital - Smart Quantity]\n"),e=d):e=["[Quatro Digital - Smart Quantity]\n"+d];if("undefined"===typeof b||"alerta"!==b.toLowerCase()&&"aviso"!==b.toLowerCase())if("undefined"!==typeof b&&"info"===b.toLowerCase())try{console.info.apply(console,
e)}catch(g){console.info(e.join("\n"))}else try{console.error.apply(console,e)}catch(n){console.error(e.join("\n"))}else try{console.warn.apply(console,e)}catch(p){console.warn(e.join("\n"))}}},m={buyButton:".buy-button",qttInput:".qd-sq-quantity",btnMore:".qd-sq-more",btnMinus:".qd-sq-minus",initialValue:1,setQuantityByUrl:!0},h=function(k,b){function e(c,f,a){b.setQuantityByUrl?c.val(((location.search||"").match(h)||[b.initialValue]).pop()):c.val(b.initialValue);c.change(function(){try{var c=d(this),
a=parseInt(c.val().replace(p,""));!isNaN(a)&&a>b.initialValue?c.val(a):c.val(b.initialValue);c.trigger("QuatroDigital.sq_change",this)}catch(f){g(f.message)}});f.click(function(a){a.preventDefault();c.val((parseInt(c.val())||b.initialValue)+1).change()});a.click(function(a){a.preventDefault();c.val((parseInt(c.val())||b.initialValue+1)-1).change()});c.change()}function m(c,f,a){c.on("QuatroDigital.sq_change",function(){(d(this).val()||0)<=b.initialValue?(a.addClass("qd-sq-inactive"),f.removeClass("qd-sq-inactive")):
(f.addClass("qd-sq-inactive"),a.removeClass("qd-sq-inactive"))})}function n(c,d){c.on("QuatroDigital.sq_change",function(){try{var a=d[0].search||"";-1<a.toLowerCase().indexOf("qty=")?d[0].search=a.replace(q,"qty="+(parseInt(c.val())||("number"==typeof b.initialValue?b.initialValue:1))+"&"):d[0].search="qty="+(parseInt(c.val())||("number"==typeof b.initialValue?b.initialValue:1))+"&"+(d[0].search||"").replace(q,"");var e=((d.attr("href")||"").match(r)||[""]).pop()+"";c.attr("data-sku-id",e);if(e.length&&
"object"===typeof skuJson&&!c.attr("data-sku-price"))for(a=0;a<skuJson.skus.length;a++)skuJson.skus[a].sku==e&&c.attr("data-sku-price",skuJson.skus[a].bestPrice)}catch(l){g(l.message)}})}var p=/[^0-9-]/gi,h=/qty\=([0-9]+)/i,r=/sku\=([0-9]+)/i,q=/qty\=[0-9]+\&?/ig;k.each(function(){try{var c=d(this),f=c.find(b.buyButton),a=c.find(b.qttInput),k=c.find(b.btnMore),l=c.find(b.btnMinus);if(!f.length&&null!==b.buyButton||!a.length)return g("O plugin parou por aqui! N\u00e3o foram encontrados o bot\u00e3o comprar e o campo de quantidade",
"alerta");if(a.is(".qd-sq-on"))return g(["Execu\u00e7\u00e3o ignorada pois este input j\u00e1 possui o plugin aplicado. Input: ",a],"info");a.addClass("qd-sq-on");m(a,k,l);null!==b.buyButton&&n(a,f);e(a,k,l);d(window).on("vtex.sku.selected",function(){a.change()})}catch(h){g(h.message)}})};d.fn.QD_smartQuantity=function(g){var b=d(this);b.qdPlugin=new h(b,d.extend({},m,g));d(window).trigger("QuatroDigital.sq_callback");return b};d(function(){d(".qd_auto_smart_quantity").QD_smartQuantity()})}})(this);