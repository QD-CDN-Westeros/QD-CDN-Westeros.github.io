/* Lugia - 11/11/2019 12:12:37 GMT */
var ConceitoE_Categoria={methods:{titlePage:function(){var title_page=$(".x-category-top__title .titulo-sessao").html().replace("Ãª","");$(".x-category-top__title h1").html(title_page),$(".x-category-top__title .titulo-sessao").remove();$(".x-category-top__banner").width();var w_height=$(".x-category-top__banner").height();$(".x-category-top__title, .x-category-top__banner-title").css({width:w_height/2}),$(".x-category-top__title, .x-category-top__banner-title").css({height:w_height/2})},colorInfoCategory:function(){$(".x-category-top__title").addClass("x-departament-"+vtxctx.departmentyId)},sliderMainBanner:function(){$(".x-category-top__banner").slick({slidesToShow:1,autoplay:!0,infinite:!0,adaptiveHeight:!1,fade:!1,dots:!1,arrows:!1,asNavFor:".x-category-top__banner-title"});$(".x-category-top__banner-title").slick({slidesToShow:1,autoplay:!1,infinite:!0,adaptiveHeight:!1,fade:!1,dots:!0,arrows:!1,fade:!0,cssEase:"linear",asNavFor:".x-category-top__banner"})},titleCategory:function(){var _name=vtxctx.departmentName;$(".x-category-top__title .titulo-sessao").text(_name)},actionOrderBy:function(){var locationSearch=window.location.search,locationHref=window.location.href;$(".x-orderby ul li").find("a").click(function(){var dataUrl=$(this).data("orderby").replace("&","");if(-1!==locationHref.indexOf("?")&&0!==locationHref.indexOf("O=")&&(window.location.href=window.location.href+"&"+dataUrl),-1!==locationHref.indexOf("O=")&&0!==locationHref.indexOf("&O=")){var windowUrlSplit=locationHref.split("?")[0];window.location.href=windowUrlSplit+"?"+dataUrl}if(-1!==locationHref.indexOf("&O=")){windowUrlSplit=locationHref.split("&")[0];window.location.href=windowUrlSplit+"&"+dataUrl}locationSearch||(window.location.href=window.location.href+"?"+dataUrl)})},grid:function(){$(".x-view__content > div").click(function(event){var _element=$(this);_element.closest(".x-view__content").find("> div").removeClass("x-active"),_element.addClass("x-active");var _class=_element.attr("class"),wrapper=$(".x-category-bottom__vitrine"),_container=$(".x-products__list .vitrine.prateleira > ul");-1!=_class.indexOf("x-col__four")?(_container.addClass("x-grid"),wrapper.addClass("has--grid")):(_container.removeClass("x-grid"),wrapper.removeClass("has--grid"))})},filters:function(){$(".x-category-bottom__changeCategory h5").html(vtxctx.categoryName);var _container=$(".x-category-bottom__changeCategory ul");$("body").hasClass("departamento")?$(".search-single-navigator h4").each(function(index,el){var _element=$(this),_content=_element.html(),_sub=_element.next("ul").html();_container.append('<li class="js--toggle-handle">'+_content+"</li>"),_container.append('<li class="js--filter-drop x-sub"> <ul>'+_sub+"</ul></li>")}):$(".search-multiple-navigator h4").each(function(index,el){var _element=$(this),_content=_element.html(),_sub=_element.next("ul").html();_sub&&(_container.append('<li class="js--toggle-handle">'+_content+"</li>"),_container.append('<li class="js--filter-drop x-sub"> <ul>'+_sub+"</ul></li>"))}),$(".x-category-bottom__changeCategory .bread-crumb ul li:nth-child(2) a").html("See all"),_container.find("li a").each(function(ev){var newText=$(this).text().replace(/ *\([^)]*\) */g,"");$(this).text(newText)});$(".search-multiple-navigator > fieldset > div");var sideCategoryHandles=$(".js--toggle-handle"),sideCategoriesContainer=$(".x-category-bottom__changeCategory");sideCategoryHandles.mouseenter(function(ev){ev.stopPropagation(),$(this).not(":animated")&&$(this).next(".js--filter-drop").not(":animated")&&($(this).next(".js--filter-drop").slideToggle(),$(".js--filter-drop").not($(this).next(".js--filter-drop")).slideUp())}),sideCategoriesContainer.mouseleave(function(ev){$(".js--filter-drop").slideUp()})},QD_selectedFilters:function(){var wrapper=$(".qd-selected-filters");$(".search-multiple-navigator input[type=checkbox]").on("click",function(){var cat=$(this).parent().text().trim();if($(this).is(".checked")){$(this).removeClass("checked");$('.x-category-bottom__aside a[data-rel="'+cat+'"]').closest("li").removeClass("selected");wrapper.find('[data-rel="'+cat+'"]').remove();return}$(this).addClass("checked");var selectedFilter=$('<span data-rel="'+cat+'"></span>').appendTo(wrapper);selectedFilter.text(cat);selectedFilterClick($(this),selectedFilter)});function selectedFilterClick(input,span){span.on("click",function(){input.click();span.remove()})}},QD_filters:function(){$(".x-category-bottom__changeCategory h5").html(vtxctx.categoryName);$(".search-multiple-navigator fieldset:not(.filtro_tamanho, .filtro_marca, .filtro_cor)").hide();function setCategoryTree(){var ret=[];$(".search-single-navigator h4").each(function(index,el){var $t=$(el);var name=$t.find("a").attr("title");ret[name]=[];var subCategoryTree=$t.next("ul");if(!subCategoryTree.length)subCategoryTree=$(".search-single-navigator h5:not(.HideMarca, .HideCor, .HideTamanho)").next("ul");subCategoryTree.find("li a").each(function(i,sc){ret[name][$(sc).attr("title")]=i})});return ret}var categoryTree=setCategoryTree();var catLength=Object.keys(categoryTree).length;var sCatLength=0;var filterWrapper=$(".x-category-bottom__changeCategory ul");for(cat in categoryTree){if(typeof categoryTree[cat]=="function")continue;$('<li class="js--toggle-handle"><a href="#">'+cat+"</a></li>").appendTo(filterWrapper);var categoryWrapper=$('<li class="js--filter-drop x-sub"><ul></ul></li>').appendTo(filterWrapper).find("ul");if(catLength>1){var categoryLi=$('<li><a data-rel="'+cat+'" href="#">Ver todos</a></li>').appendTo(categoryWrapper);var catInput=$('.search-multiple-navigator label[title="'+cat+'"] input');attrClick(categoryLi,catInput)}else{sCatLength=Object.keys(categoryTree[cat]).length}for(scat in categoryTree[cat]){if(typeof categoryTree[cat][scat]=="function"||cat==scat)continue;var subCategoryLi=$('<li><a data-rel="'+scat+'" href="#">'+scat+"</a></li>").appendTo(categoryWrapper);var inputRel=$('.search-multiple-navigator label[title="'+scat+'"] input');attrClick(subCategoryLi,inputRel)}}function attrClick(element,input){element.on("click",function(e){e.preventDefault();element.toggleClass("selected");input.click()})}var sideCategoryHandles=$(".js--toggle-handle");sideCategoryHandles.on("click",function(ev){ev.preventDefault();$(this).parent().find(".js--filter-drop").not($(this).next(".js--filter-drop")).slideUp();$(this).next(".js--filter-drop").slideToggle()});if(catLength==1){filterWrapper.find(".js--toggle-handle a").click();filterWrapper.find(".js--toggle-handle").hide();filterWrapper.find(".js--toggle-handle").next("li").find("ul").css({border:"none"});if(sCatLength==2)filterWrapper.closest(".x-category-bottom__changeCategory").hide()}},QD_itemsAsideHover:function(){$("h5, span",'.x-category-bottom__aside > div:not([class*="__filters"])').css({cursor:"pointer"}).click(function(e){e.preventDefault();$(this).closest('[class*="x-category-bottom"]').toggleClass("x-open")});$('.x-category-bottom__aside > div[class*="__filters"]').addClass("x-open");$(".x-category-bottom__aside > div fieldset > h5").click(function(e){e.preventDefault();$(this).parent().toggleClass("x-fieldopen")})},itemsAsideHover:function(){$(".x-category-bottom__aside > div").hover(function(){$(this).addClass("x-open")},function(){$(this).removeClass("x-open")}),$(".x-category-bottom__aside > div fieldset").hover(function(){$(this).addClass("x-fieldopen")},function(){$(this).removeClass("x-fieldopen")})},fieldsetThree:function(){3==$(".search-multiple-navigator fieldset").length&&$(".x-category-bottom__filters").addClass("x-three-fieldset")},backPage:function(){$(".x-arrow__back-page *").click(function(event){return parent.history.back(),!1})},bottomPage:function(){setTimeout(function(){$("body").on("click","#x-infinityScroll",function(event){$("html, body").animate({scrollTop:$(document).height()},1e3)})},500)},searchResult:function(){var pageTitle=vtxctx.searchTerm;""==pageTitle&&(pageTitle=window.location.pathname.replace("/",""));var quantityResult=$(".resultado-busca-numero").eq(0).find(".value");$(".x-search-bottom__vitrine-title .x-text span").html(quantityResult),$(".x-search-bottom__vitrine-title .x-title").html('"'+decodeURIComponent(decodeURIComponent(pageTitle))+'"')},filtersThumbsColor:function(){$(".x-category-bottom__filters .filtro_cor label").each(function(){var color=$(this).attr("title");color=ConceitoE.data.removeAcentos(color.replace(/ /g,"-").replace("-/-","-")),$(this).append('<img src="/arquivos/'+color+'.png" border="0" alt=""/>')})},productsPosition:function(){$(".x-products__list .vitrine.prateleira .vitrine.prateleira").eq(0).addClass("x-first-grid"),$(".x-products__list .vitrine.prateleira .vitrine.prateleira").not($(".x-products__list .vitrine.prateleira .vitrine.prateleira").eq(0)).each(function(index,el){var _this=$(this),_li=_this.find("ul").html();_this.find("ul").remove(),$(".x-first-grid > ul").append(_li)})},estrutureSearch:function(){$("body").hasClass("resultado-busca")&&$(".search-single-navigator h3").each(function(index,el){var _this=$(this),_ul=$(this).next("ul"),_className=_this.attr("class");_this.before('<div class="'+_className+'"></div>'),_this.appendTo(_this.prev("div")),_ul.appendTo(_ul.prev("div"))})},init:function(){this.sliderMainBanner(),this.titleCategory(),this.colorInfoCategory(),this.grid(),this.QD_filters(),this.QD_itemsAsideHover(),this.QD_selectedFilters(),this.backPage(),this.bottomPage(),this.searchResult(),this.fieldsetThree(),this.estrutureSearch()},init_ajax:function(){this.productsPosition()}},ajax:function(){return this.methods.init_ajax()},mounted:function(){return this.methods.init()}};$(document).ready(function(){ConceitoE_Categoria.mounted()}),$(document).ajaxStop(function(){ConceitoE_Categoria.ajax()});